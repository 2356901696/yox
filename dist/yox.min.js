!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Yox=t()}(this,function(){"use strict";function e(){}function t(e,t){return"numeric"===t?f(e):Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function n(e){return t(e,"function")}function r(e){return t(e,"array")}function i(e){return e&&t(e,"object")?yt:mt}function o(e){return t(e,"string")}function a(e){return t(e,"number")}function u(e){return t(e,"boolean")}function c(e){return o(e)||a(e)||u(e)||e==gt}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charAt(t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}function v(e,t,n){var r=e.length;if(n)for(var i=r-1;i>=0&&t(e[i],i)!==mt;i--);else for(var o=0;o<r&&t(e[o],o)!==mt;o++);}function d(){var e=h(arguments),t=[];return e.unshift(t),Ot(dn,gt,e),t}function p(e){return function(t){for(var n=arguments,i=1,o=n.length;i<o;i++)r(n[i])?v(n[i],function(n){t[e](n)}):t[e](n[i])}}function h(e){return r(e)?e:Ot(Array.prototype.slice,e)}function y(e,t,n){var r={},i=3===arguments.length;return v(e,function(e,a){a=o(n)?e[n]:i?n:e,r[t?e[t]:e]=a}),r}function m(e,t,n){if(n!==mt)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]==t)return r;return-1}function g(e,t,n){return m(e,t,n)>=0}function k(e){return e[e.length-1]}function b(e){return e.pop()}function w(e,t,n){var r=m(e,t,n);return r>=0?(e.splice(r,1),yt):mt}function _(e){return!r(e)||0===e.length}function x(e){return T(e,Dt)?e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}):e}function O(e){return s(e,0).toUpperCase()+P(e,1)}function $(e){return!o(e)||e===Tt}function j(e,t,n){var r=[];if(o(e)){var i=void 0,a=void 0,u=void 0,c=void 0;v(S(e,t),function(e){i=S(e,n),a=i[0],u=i[1],a&&(c={key:E(a)},o(u)&&(c.value=E(u)),dn(r,c))})}return r}function E(e){return $(e)?Tt:e.trim()}function P(e,t,n){return a(n)?e.slice(t,n):e.slice(t)}function S(e,t){return $(e)?[]:e.split(new RegExp("\\s*"+t.replace(/[.*?]/g,"\\$&")+"\\s*"))}function C(e,t){return e.indexOf(t)}function T(e,t){return C(e,t)>=0}function M(e,t){return 0===C(e,t)}function N(e,t){var n=e.length-t.length;return n>=0&&e.lastIndexOf(t)===n}function A(e){return!$(e)&&C(e,"[")>0&&C(e,"]")>0?e.replace(/\[\s*?([^\]]+)\s*?\]/g,function(e,t){var n=l(t);return n!==Ut&&n!==Bt||(t=P(t,1,-1)),""+mn+t}):e}function D(e){return e!==Tt&&e!==bt&&e!==gn}function z(e){return S(A(e),mn).filter(D)}function L(e){return e.filter(D).join(mn)}function q(e,t){return e&&t?e+mn+t:e?e:t||Tt}function I(e){return Object.keys(e)}function G(e,t){var n=void 0;return n=t?function(e,t){return t.length-e.length}:function(e,t){return e.length-t.length},I(e).sort(n)}function R(e,t){v(I(e),function(n){return t(e[n],n)})}function V(e,t){try{return e.hasOwnProperty(t)}catch(n){return t in e}}function F(e){R(e,function(t,n){delete e[n]})}function U(){for(var e=arguments,t=e[0],n=1,r=e.length;n<r;n++)i(e[n])&&R(e[n],function(e,n){t[n]=e});return t}function Y(e,t){var n=e;return r(e)?(n=[],v(e,function(e,r){n[r]=t?Y(e):e})):i(e)&&(n={},R(e,function(e,r){n[r]=t?Y(e):e})),n}function B(e){return n(e)&&e.toString!==Function.prototype.toString&&(e=e.toString()),e}function H(e,t){if(o(t)&&!V(e,t)&&C(t,Mt)>0)for(var n=z(t),r=0,i=n.length;r<i;r++)if(r<i-1){if(e=B(e[n[r]]),e==gt)return}else t=n[r];if(V(e,t))return{value:B(e[t])}}function K(e,t,n,r){if(o(t)&&!V(e,t)&&C(t,Mt)>0){var i=e,a=z(t),u=b(a);v(a,function(t,n){if(e[t])e=e[t];else{if(r===mt)return e=mt;e=e[t]={}}}),e&&e!==i&&(e[u]=n)}else e[t]=n}function W(){if(wt){var e=wt.DEBUG;if(u(e))return BEBUG}return _n}function Z(e){wn&&W()&&console.log("[Yox log]: "+e)}function J(e){wn&&W()&&console.warn("[Yox warn]: "+e)}function Q(e){wn&&console.error("[Yox error]: "+e)}function X(e){throw new Error("[Yox fatal]: "+e)}function ee(e){var t=new MutationObserver(e),n=_t.createTextNode(Tt);t.observe(n,{characterData:yt}),n.data=ln}function te(e){setImmediate(e)}function ne(e){setTimeout(e)}function re(e,t){jn.length||$n(ae),hn[e](jn,t)}function ie(e){re("push",e)}function oe(e){re("unshift",e)}function ae(){var e=jn;jn=[],v(e,function(e){e.i?(e.i--,dn(e)):e()})}function ue(e){return e>=48&&e<=57}function ce(e){return 36===e||95===e||e>=97&&e<=122||e>=65&&e<=90}function fe(e){return ce(e)||ue(e)}function se(e){if(V(pr,e))return pr[e];var t=e.length,n=0,r=void 0,i=function(){return l(e,n)},o=function(){X("Failed to compile expression: "+sn+e)},a=function(){for(;(r=i())&&(r===vn||r===fn);)n++},u=function(){i()===Nt?f():(c(),i()===Nt&&f())},c=function(){do n++;while(ue(i()))},f=function(){n++,ue(i())?c():o()},s=function(){var r=i();for(n++;n<t;)if(n++,l(e,n-1)===r)return;o()},v=function(){do n++;while(fe(i()))},d=function(t){var r=e.substring(n,(v(),n));return r?t&&V(dr,r)?new sr(dr[r]):new fr(r):void o()},p=function(e){var a=[];for(n++;n<t;){if(r=i(),r===e)return n++,a;r===It?n++:dn(a,k())}o()},h=function(t){a();var r=En(t,P(e,n))[0];if(r)return n+=r.length,r},y=function(){for(var e=d(yt);n<t;){if(r=i(),r===Kt)return new ur(e,p(Zt));if(r===Nt)n++,e=new lr(e,new sr(d().name));else{if(r!==Qt)break;e=new lr(e,k(en))}}return e},m=function t(){if(a(),r=i(),r===Ut||r===Bt){var c=e.substring(n,(s(),n));return new sr(P(c,1,-1),c)}if(ue(r)||r===Nt)return new sr(parseFloat(e.substring(n,(u(),n))));if(r===Qt)return new or(p(en));if(r===Kt)return k(Zt);if(ce(r))return y();var f=h(Hn);return f?new vr(f,t()):void o()},g=function(){var e=m(),t=h(Wn);if(!t)return e;for(var n=[e,t,Kn[t],m()],r=void 0,i=void 0;i=h(Wn);)n.length>3&&Kn[i]<n[n.length-2]&&(r=b(n),b(n),t=b(n),e=b(n),dn(n,new ar(e,t,r))),dn(n,i,Kn[i],m());for(r=b(n);n.length>1;)b(n),t=b(n),e=b(n),r=new ar(e,t,r);return r},k=function(e){e&&n++;var t=g();if(a(),i()===un){n++;var r=g();if(a(),i()===Rt){n++;var u=g();return a(),new cr(t,r,u)}o()}return e&&(i()===e?n++:o()),t};return pr[e]=k()}function le(e,t){return E(P(e,t.length))}function ve(e){return T(e,sn)&&!E(e)}function de(e){return e.replace(/^[ \t]*\n|\n[ \t]*$/g,Tt)}function pe(e){var t=mi[e];if(t)return t;t=[];for(var n=[],r=[],i=[],o=void 0,a=function(t){X("Error compiling template:"+sn+e+sn+"- "+t)},u=function(e,t){var r=void 0;v(n,function(t,i){if(t.type===e)return r=n.splice(i,1)[0],mt},yt),r?r.type===Rr&&t&&r.name!==t&&a("end tag expected </"+r.name+"> to be </"+t+">."):a("{{/"+Jr[e]+"}} is not a pair.")},c=function(e){var o=e.type,a=e.content;if(o===Fr){if(ve(a)||!(a=de(a)))return;e.content=a}Yr[o]&&u(b(r).type);var c=k(n);c?1===i.length&&c.addAttr?c.addAttr(e):c.addChild(e):dn(t,e),Ur[o]||Yr[o]?dn(r,e):Br[o]&&dn(i,e),Kr[o]||dn(n,e)},f=[function(e){if(!i.length){var t=e.match(vi);if(t&&!t.index){var n=t[2];return t[1]===Lt?u(Rr,n):c(new ni(n,hi.test(n))),t[0]}}},function(e){var t=e.match(di);if(t)return 1===i.length&&((t[1]===Lt||yi.test(i[0].name))&&u(Rr),b(i)),t[0]},function(e){if(1===i.length){var t=e.match(pi);if(t){var n=t[1];return Wr[n]?c(new ei(x(n))):M(n,jr)?(n=P(n,jr.length),c(new ei(Cr,x(n)))):M(n,$r)?(n=P(n,$r.length),c(new ei(x(n)))):c(new Xr(i[0].component?x(n):n)),o=t[2],o||u(b(i).type),t[0]}}},function(e){if(2===i.length){for(var t=0,n=void 0,r=void 0;n=s(e,t);){if(n===o){r=yt;break}t++}var a=Tt;return t&&(a=P(e,0,t),c(new si(a))),r&&(a+=o,u(b(i).type)),a}var f=e.match(vi);return f&&f.index&&(e=P(e,0,f.index)),(1!==i.length||E(e))&&c(new si(e)),e}],l=[function(e,t){if(M(e,gr)){var n=S(le(e,gr),Gt);if(n[0])return new ti(se(E(n[0])),E(n[1]));a("invalid each: "+t)}},function(e,t){if(M(e,br))return e=le(e,br),e?new ui(e):a("invalid import: "+t)},function(e,t){if(M(e,kr))return e=le(e,kr),e?new ci(e):a("invalid partial: "+t)},function(e,t){if(M(e,hr))return e=le(e,hr),e?new ai(se(e)):a("invalid if: "+t)},function(e,t){if(M(e,mr))return e=le(e,mr),e?new ii(se(e)):a("invalid else if: "+t)},function(e){if(M(e,yr))return new ri},function(e,t){if(M(e,_r))return e=le(e,_r),e?new fi(se(e)):a("invalid spread: "+t)},function(e,t){if(!M(e,wr))return e=E(e),e?new oi(se(e),!N(t,"}}}")):a("invalid expression: "+t)}],d=function(e){e&&!function(){for(var t=e;t;)v(f,function(e,n){if(n=e(t))return t=P(t,n.length),mt});h=P(h,e.length)}()},p=function(e,t){if(e)if(s(e)===Lt){var n=P(e,1),i=Zr[n];Ur[i]&&(i=b(r).type),u(i)}else v(l,function(n,r){if(r=n(e,t))return c(r),mt});h=P(h,t.length)},h=e,y=void 0;h;)y=h.match(li),y?(d(P(h,0,y.index)),y[1].length===y[3].length?p(y[2],y[0]):a("invalid expression: "+y[0])):d(h);return mi[e]=t}function he(e){var t=function(e){return he(e)};switch(e.type){case Jn:return"["+e.elements.map(t).join(qt)+"]";case Qn:return he(e.left)+" "+e.operator+" "+he(e.right);case Xn:return he(e.callee)+"("+e.args.map(t).join(qt)+")";case rr:return he(e.test)+" ? "+he(e.consequent)+" : "+he(e.alternate);case er:return e.name;case tr:return V(e,"raw")?e.raw:e.value;case nr:return lr.flatten(e).map(function(e,t){if(e.type===tr){var n=e,r=n.value;return f(r)?""+Jt+r+Xt:""+Mt+r}return e=he(e),t>0?""+Jt+e+Xt:e}).join(Tt);case ir:return""+e.operator+he(e.arg);default:return Tt}}function ye(e){var t=e.emitter,n=e.computedDeps,r={},i=function(e){r[e]||(r[e]=yt)};R(t.listeners,function(e,t){i(t)}),R(n,function(e){v(e,i)}),e.watchKeypaths=I(r)}function me(e){return function(t,n,r){var a=t;o(t)&&(a={},a[t]={sync:r,watcher:n});var u=this,c=u.emitter,f=u.context;R(a,function(t,n){var r=t,o=void 0;i(t)&&(r=t.watcher,o=t.sync),c[e](n,r),ye(u),o&&Ot(r,f,[u.get(n),kt,n])})}}function ge(e){if(!ki[e]){var t=e.replace(/\./g,"\\.").replace(/\*\*/g,"([.\\w]+?)").replace(/\*/g,"(\\w+)");ki[e]=new RegExp("^"+t+"$")}return ki[e]}function ke(e,t){var n=En(G(e,yt),t),r=n[0],i=n[1],o=void 0;return r&&(o=e[r]),i&&M(i,mn)&&(i=P(i,1)),{value:o,rest:i}}function be(e,t){var n=wt.SVGElement;return"svg"===e||t&&n&&t instanceof n?_t.createElementNS("http://www.w3.org/2000/svg",e):_t.createElement(e)}function we(e){return _t.createTextNode(e||Tt)}function _e(e){return _t.createComment(e||Tt)}function xe(e){return e}function Oe(e){return 1===e.nodeType}function $e(e,t,n){K(e,t,n,mt)}function je(e,t){$e(e,t,gt)}function Ee(e,t,n){Ti[t]&&(n=n===kt||n?yt:mt),Mi[t]?$e(e,Mi[t],n):Ti[t]?$e(e,t,n):e.setAttribute(t,n)}function Pe(e,t){Mi[t]?je(e,Mi[t]):Ti[t]?je(e,t):e.removeAttribute(t)}function Se(e,t,n){n?e.insertBefore(t,n):Ce(e,t)}function Ce(e,t){e.appendChild(t)}function Te(e,t,n){e.replaceChild(t,n)}function Me(e,t){e.removeChild(t)}function Ne(e){return e.parentNode}function Ae(e){return e.nextSibling}function De(e){var t=e.tagName;return $(t)?Tt:t.toLowerCase()}function ze(e){return e.childNodes}function Le(e,t){return 1===arguments.length?e.nodeValue:e.nodeValue=t}function qe(e,t){return 1===arguments.length?e.innerHTML:e.innerHTML=t}function Ie(e,t){return(t||_t).querySelector(e)}function Ge(e,t,n){e.addEventListener(t,n,mt)}function Re(e,t,n){e.removeEventListener(t,n,mt)}function Ve(e,t){return e.key===t.key&&e.sel===t.sel}function Fe(e,t){return e===t||e.sel===Ui.SEL_COMMENT&&t.sel===Ui.SEL_COMMENT&&e.text===t.text}function Ue(e,t,n){for(var r,i={},o=t;o<=n;o++)r=e[o].key,r!=gt&&(i[r]=o);return i}function Ye(e){return new Ui({text:Fi(e)})}function Be(e,t,n,r){return new Ui({sel:e,key:r,data:t,children:n})}function He(e){return new Ui({sel:Ui.SEL_COMMENT,text:e})}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ni,n=new bn;v(to,function(t){v(e,function(e){n.on(t,e[t])})});var i=function(e){var n=[t.tag(e)],r=e.id,i=e.className;return r&&dn(n,""+At+r),i&&dn(n,""+Mt+S(i,ln).join(Mt)),n.join(Tt)},u=function(e){var t=void 0,n=void 0,r=void 0,i=C(e,At);i>0&&(t=P(e,0,i),e=P(e,i+1));var o=C(e,Mt);if(o>0){var a=P(e,0,o);t?n=a:t=a,r=S(P(e,o+1),Mt).join(ln)}else t?n=e:t=e;return{tagName:t,id:n,className:r}},c=function(e,i,a){var c=i.sel,s=i.data,l=i.children,v=i.text,d=s&&s.hooks||{};if(Ot(d[Yi],gt,i),$(c))return i.el=t.createText(v);if(c===Ui.SEL_COMMENT)return i.el=t.createComment(v);var p=u(c),h=p.tagName,y=p.id,m=p.className,g=t.createElement(h,e);return y&&(g.id=y),m&&(g.className=m),i.el=g,r(l)?f(g,l,0,l.length-1,a):o(v)&&t.append(g,t.createText(v)),s&&(s=[no,i],n.fire(Bi,s,t),Ot(d[Bi],gt,s),d[Hi]&&a.push(i)),i.el},f=function(e,t,n,r,i,o){for(var a=n;a<=r;a++)s(e,t[a],i,o)},s=function(e,n,r,i){var o=c(e,n,r);o&&t.before(e,o,i)},l=function(e,t,n,r){for(var i,o=n;o<=r;o++)i=t[o],i&&d(e,i)},d=function(e,r){var i=r.sel,o=r.el,a=r.data;i?(p(r),t.remove(e,o),a&&(n.fire(Ki,r,t),a.hooks&&Ot(a.hooks[Ki],gt,r))):o&&t.remove(e,o)},p=function e(r){var i=r.data,o=r.children;i&&(o&&v(o,function(t){e(t)}),n.fire(Wi,r,t),i.hooks&&Ot(i.hooks[Wi],gt,r))},h=function(e,n,r){t.before(e,r.el,n.el),d(e,n)},y=function(e,n,r,i){for(var o=0,u=n.length-1,s=n[o],v=n[u],d=0,p=r.length-1,h=r[d],y=r[p],g=void 0,k=void 0,b=void 0;o<=u&&d<=p;)s?v?Ve(s,h)?(m(s,h,i),s=n[++o],h=r[++d]):Ve(v,y)?(m(v,y,i),v=n[--u],y=r[--p]):Ve(s,y)?(m(s,y,i),t.before(e,s.el,t.next(v.el)),s=n[++o],y=r[--p]):Ve(v,h)?(m(v,h,i),t.before(e,v.el,s.el),v=n[--u],h=r[++d]):(g||(g=Ue(n,o,u)),k=g[h.key],a(k)?(b=n[k],m(b,h,i),n[k]=gt):(b=c(e,h,i),b&&(b=h)),b&&t.before(e,b.el,s.el),h=r[++d]):v=n[--u]:s=n[++o];o>u?(b=r[p+1],f(e,r,d,p,i,b?b.el:gt)):d>p&&l(e,n,o,u)},m=function(e,r,i){var a=e.el;if(Fe(e,r))return void(r.el=a);var u=r.data,s=u&&u.hooks||{},v=[e,r];if(Ot(s[Qi],gt,v),r.el=a,!Ve(e,r)){var d=t.parent(a);return void(c(d,r,i)&&d&&h(d,e,r))}u&&(n.fire(Xi,v,t),Ot(s[Xi],gt,v));var p=r.text,m=r.children,g=e.text,k=e.children;o(p)?p!==g&&t.text(a,p):m&&k?m!==k&&y(a,k,m,i):m?(o(g)&&t.text(a,Tt),f(a,m,0,m.length-1,i)):k?l(a,k,0,k.length-1):o(g)&&t.text(a,Tt),Ot(s[eo],gt,v)};return function(e,r){n.fire(Zi,gt,t),t.isElement(e)&&(e=new Ui({el:e,sel:i(e),data:{},children:[]}));var o=[];if(Ve(e,r))m(e,r,o);else{var a=t.parent(e.el);c(a,r,o)&&a&&h(a,e,r)}return v(o,function(e){Ot(e.data.hooks[Hi],gt,e)}),n.fire(Ji,gt,t),r}}function We(e,t){var n=e.data.attrs,r=t.data.attrs;if(!t.data.component&&(n||r)){n=n||{},r=r||{};var i=t.el,o=this,a=function(e,t){if(V(e,t)){var n=e[t].value;return n!==kt?n:t}};R(r,function(e,t){a(r,t)!==a(n,t)&&o.setAttr(i,t,e.value)}),R(n,function(e,t){V(r,t)||o.removeAttr(i,t)})}}function Ze(e,t){var n=e.data.props,r=t.data.props;if(n||r){n=n||{},r=r||{};var i=t.el,o=this;R(r,function(e,t){e!==n[t]&&o.setProp(i,t,e)}),R(n,function(e,t){V(r,t)||o.removeProp(i,t)})}}function Je(e,t){var r=e.el,o=e.data,a=o.instance,u=o.attrs,c=o.directives,f=o.destroies,s=c[t],l={el:r,node:s,instance:a,directives:c,attributes:u||{}},v=r.$component;i(v)&&(V(v,"queue")&&!V(v,"set")&&(v=v.queue),l.component=v);var d=Ot(a.directive(s.name),gt,l);n(d)&&(f||(f=e.data.destroies={}),f[t]=d)}function Qe(e,t){var n=e.data.destroies;n&&n[t]&&(n[t](),delete n[t])}function Xe(e,t){var n=e.data.directives,r=t.data.directives;(n||r)&&(n=n||{},r=r||{},R(r,function(r,i){if(V(n,i)){var o=n[i];o.value!==r.value&&(Qe(e,i),Je(t,i))}else Je(t,i)}),R(n,function(t,n){V(r,n)||Qe(e,n)}),t.data.destroies=U({},e.data.destroies,t.data.destroies))}function et(e){var t=e.data.destroies;t&&R(t,function(e){e()})}function tt(e){var t={};return e&&R(e,function(e){t[e.name]=e.value}),t}function nt(e,t){var n=t.data,i=n.component,o=n.instance,a=n.attrs;if(i){var u=t.el;u.$component={queue:[],attrs:a},o.component(t.sel,function(e){var n=u,i=n.$component;if(i&&r(i.queue)){var a=o.create(e,{el:u,props:tt(i.attrs),replace:yt});u=a.$el,u.$component=a,t.el=u,v(i.queue,function(e){e(a)})}})}}function rt(e,t){var n=t.el.$component;if(i(n)){var r=t.data.attrs;n.set?n.set(tt(r),yt):n.attrs=r}}function it(e,t){var n=e.el,r=n.$component;i(r)&&(r.destroy&&r.destroy(yt),n.$component=gt)}function ot(e,t){var n={},r=void 0,i=void 0,o=void 0;switch(e.type){case Jn:r=[],v(e.elements,function(e){o=ot(e,t),dn(r,o.value),U(n,o.deps)});break;case Qn:var a=e.left,u=e.right;a=ot(a,t),u=ot(u,t),r=ar[e.operator](a.value,u.value),U(n,a.deps,u.deps);break;case Xn:o=ot(e.callee,t),n=o.deps,r=Ot(o.value,gt,e.args.map(function(e){var r=ot(e,t);return U(n,r.deps),r.value}));break;case rr:var c=e.test,f=e.consequent,s=e.alternate;c=ot(c,t),c.value?(f=ot(f,t),r=f.value,U(n,c.deps,f.deps)):(s=ot(s,t),r=s.value,U(n,c.deps,s.deps));break;case er:i=e.name,o=t.get(i),r=o.value,n[o.keypath]=r;break;case tr:r=e.value;break;case nr:var l=[];v(lr.flatten(e),function(e,r){var i=e.type;if(i!==tr)if(r>0){var o=ot(e,t);dn(l,o.value),U(n,o.deps)}else i===er&&dn(l,e.name);else dn(l,e.value)}),i=L(l),o=t.get(i),r=o.value,n[o.keypath]=r;break;case ir:o=ot(e.arg,t),r=vr[e.operator](o.value),n=o.deps}return{value:r,deps:n,keypath:i}}function at(e){var t=z(e);return t[0]===bt?(t.shift(),{keypath:L(t)}):{keypath:L(t),lookup:yt}}function ut(e){return r(e)&&(e[Dt]=yt),e}function ct(e){return r(e)&&e[Dt]}function ft(e,t){if(r(e))switch(e.length){case 0:return Tt;case 1:return e[0];default:return e.join(Tt)}else if(!_(t))return Tt}function st(e,t,n,a,u){var c=void 0,f=[],s=function(){c=L(f)},l=function(){return c};s(),l.toString=l,u[Or]=l;var d=new uo(u,c),p=[],h=[],y={},m=function(e){r(e.context)&&Ot(d.set,d,e.context),e.keypath!==kt&&(dn(f,e.keypath),s()),e.value!==kt&&(d=d.push(e.value,c)),Br[e.type]&&dn(z,e.type),dn(p,{node:e,index:-1,deps:{},parent:S}),S=k(p)},g=function(){var e=S,t=e.node;Br[t.type]&&b(z),t.value!==kt&&(d=d.pop()),t.keypath!==kt&&(b(f),s()),C&&(C=gt),S.binding||U(S.parent?S.parent.deps:y,S.deps),S=S.parent,b(p)},w=function(e){r(e)?e.length&&m({children:e}):m(e)},_=function(e){var t=S.parent,n=void 0;n=t?t.children||(t.children=ut([])):h,ct(e)?dn(n,e):n.push(e)},x=function(e){var t=ot(e,d);return e.keypath=t.keypath,U(S.deps,t.deps),t.value},O=function(e){return Yr[e.type]?mt:(T=gt,yt)},$={},j={};$[zr]=function(e){return I[e.name]=e.children,g(),mt},$[Lr]=function(e){var t=e.name,n=I[t]||a(t);return n?(g(),w(n),mt):void X('Partial "'+t+'" is not found.')},$[Mr]=$[Nr]=function(e){if(!x(e.expr))return!C||Yr[C.type]||Hr[k(z)]||_(ut(t())),g(),mt},$[Dr]=function(e){g();var t=e.expr,n=e.index,o=e.children,a=x(t),u=void 0;if(r(a)?u=v:i(a)&&(u=R),u){var c=[];m({value:a,children:c,keypath:t.keypath}),u(a,function(e,t,r){r={value:e,children:o,keypath:t},n&&(r.context=[n,t]),dn(c,r)})}return mt};var E=function(e,t,n){var r={name:e,value:t,keypath:c,type:Vr};return o(n)&&(r.bindTo=n),r};j[Fr]=function(e){return e.content},j[qr]=function(e){return x(e.expr)},j[Vr]=function(e){var t=e.name,n=e.children,r=ft(S.children,n),i=void 0;if(n&&1===n.length){var a=n[0],u=a.type,c=a.expr,f=a.safe;f&&u===qr&&o(c.keypath)&&(i=c.keypath,S.binding=yt)}return E(t,r,i)},j[Gr]=function(t){var n=t.name,r=t.modifier,i=t.children,o=ft(S.children,i);if(n!==Tr)return{keypath:c,name:n,value:o,modifier:r,type:Gr};if(o!=gt){if(D||(A=e.cache,D=e.cache={}),N=A&&A[o]){for(D[o]=N;S.node.type!==Rr;)g();return U(S.deps,N.deps),N.result}for(var a=void 0;a=S.parent;)if(a.node.type===Rr){a.cache={key:o};break}}},j[Mr]=j[Nr]=j[Ar]=function(e){return T=O,S.children},j[Ir]=function(e){var t=e.expr,n=x(t);if(i(n)){var r=t.keypath,a=o(r),u=ut([]);return R(n,function(e,t){dn(u,E(t,e,a?q(r,t):kt))}),S.binding=a,u}X('Spread "'+he(t)+'" must be an object.')},j[Rr]=function(e){var t=[],r=[],i=[];return S.children&&v(S.children,function(e){e.type===Vr?dn(t,e):e.type===Gr?dn(r,e):dn(i,e)}),n({name:e.name,key:S.cache?S.cache.key:kt,component:e.component,keypath:c,attributes:t,directives:r,children:i},e)},j[kt]=function(e,t){return t.children};var P=function(e,t,n){for(;n=t[++e.index];)if(!T||T(n))return C=t[e.index+1],m(n),mt},S=void 0,C=void 0,T=void 0,M=void 0,N=void 0,A=void 0,D=void 0,z=[],I={};for(w(e);p.length;){var G=S,V=G.node,F=V.type,Y=V.attrs,B=V.children;if(S.enter||(S.enter=yt,Ot($[F],gt,[V,S])!==mt)){if(Y&&!S.attrs){if(P(S,Y)===mt)continue;S.index=-1,S.attrs=yt}B&&P(S,B)===mt||(M=Ot(j[F],gt,[V,S]),M!==kt&&(_(M),N=S.cache,N&&(N.result=M,N.deps=S.deps,D[N.key]=N)),g())}}return{nodes:h,deps:y}}function lt(e,t,n){var r=function(e,t){var r={},i={instance:n,hooks:r,component:e.component},a=t.children,u=e.children;if(a&&1===a.length){var c=a[0];c.type===qr&&c.safe===mt&&(i.props={innerHTML:u[0]},u.length=0)}var f=function(e){var t=i.directives||(i.directives={});t[q(e.name,e.modifier)]=e};return v(e.attributes,function(e){var t=e.name,n=(e.value,e.keypath),r=e.bindTo,a=i.attrs||(i.attrs={});a[t]=e,o(r)&&f({keypath:n,name:Sr,modifier:t,value:r,oneway:yt})}),v(e.directives,f),Be(e.name,i,u.map(function(e){return Ui.is(e)?e:Ye(e)}),e.key)},i=function(e){var t=n.partial(e);return o(t)?pe(t):t};return st(e,He,r,i,t)}function vt(e,t){var n=t.el,r=t.node,i=t.instance,o=t.directives,a=t.attributes,u=Li,c=Gi.tag(n),f=n.type,s=go[f]||go[c];s||(s=po,("oninput"in n||"textarea"===c||"text"===f||"password"===f)&&(u=zi));var l={el:n,keypath:e,instance:i},v=function(){s.set(l)};i.watch(e,v,s.attr&&!V(a,s.attr));var d=vo({el:n,node:r,instance:i,directives:o,type:u,listener:function(){s.sync(l)}});return function(){i.unwatch(e,v),d&&d()}}function dt(e,t){var n=t.el,i=t.node,o=t.instance,a=t.component,u=function(e){var t=i.modifier;if(a){var o=function(n){n.set(t,e)};r(a)?dn(a,o):o(a)}else Gi.setAttr(n,t,e!==kt?e:Tt)};return o.watch(e,u),function(){o.unwatch(e,u)}}function pt(e,t){var r=t[0],i=t[1],o=void 0;return g($o,e)&&n(i)&&(o=i,i=kt),{callback:o,args:i===kt?[r]:[r,i]}}function ht(e){var t=e.args,n=e.get,r=e.set;t=h(t);var a=t[0];t[1];if(i(a))Ot(r,gt,a);else if(o(a)){var u=t,c=u.length;if(2===c)Ot(r,gt,t);else if(1===c)return Ot(n,gt,a)}}var yt=!0,mt=!1,gt=null,kt=void 0,bt="this",wt="undefined"!=typeof window?window:gt,_t="undefined"!=typeof document?document:gt,xt=Object.freeze({is:t,func:n,array:r,object:i,string:o,number:a,boolean:u,primitive:c,numeric:f}),Ot=function(e,t,i){if(n(e))return r(i)?e.apply(t,i):e.call(t,i)},$t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f(e)?+e:t},jt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Et=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Pt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},St=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Ct=function(){function e(t){jt(this,e),t.type?(this.type=t.type,this.originalEvent=t):this.type=t}return Et(e,[{key:"prevent",value:function(){if(!this.isPrevented){var e=this.originalEvent;e&&(n(e.prevent)?e.prevent():n(e.preventDefault)&&e.preventDefault()),this.isPrevented=yt}}},{key:"stop",value:function(){if(!this.isStoped){var e=this.originalEvent;e&&(n(e.stop)?e.stop():n(e.stopPropagation)&&e.stopPropagation()),this.isStoped=yt}}}]),e}();Ct.is=function(e){return e instanceof Ct};var Tt="",Mt=".",Nt=l(Mt),At="#",Dt=(l(At),"-"),zt=(l(Dt),"="),Lt=(l(zt),"/"),qt=(l(Lt),","),It=l(qt),Gt=":",Rt=l(Gt),Vt=";",Ft=(l(Vt),"'"),Ut=l(Ft),Yt='"',Bt=l(Yt),Ht="(",Kt=l(Ht),Wt=")",Zt=l(Wt),Jt="[",Qt=l(Jt),Xt="]",en=l(Xt),tn="{",nn=(l(tn),"}"),rn=(l(nn),"<"),on=(l(rn),">"),an=(l(on),"?"),un=l(an),cn="\t",fn=l(cn),sn="\n",ln=(l(sn)," "),vn=l(ln),dn=p("push"),pn=p("unshift"),hn=Object.freeze({each:v,merge:d,push:dn,unshift:pn,toArray:h,toObject:y,indexOf:m,has:g,last:k,pop:b,remove:w,falsy:_}),yn=Object.freeze({camelCase:x,capitalize:O,falsy:$,parse:j,trim:E,slice:P,split:S,indexOf:C,has:T,startsWith:M,endsWith:N}),mn=".",gn=".",kn=Object.freeze({keys:I,sort:G,each:R,has:V,clear:F,extend:U,copy:Y,get:H,set:K}),bn=function(){function e(){jt(this,e),this.listeners={}}return Et(e,[{key:"on",value:function(e,t){var r=this.listeners,a=function(e,t){n(e)&&dn(r[t]||(r[t]=[]),e)};i(e)?R(e,a):o(e)&&a(t,e)}},{key:"once",value:function(e,t){var r=this,a=function(e,t){n(e)&&(e.$magic=function(){r.off(t,e)})};i(e)?R(e,a):o(e)&&a(t,e),r.on(e,t)}},{key:"off",value:function(e,t){var n=this.listeners;if(e==gt)R(n,function(e,t){r(n[t])&&delete n[t]});else{var i=n[e];r(i)&&(t==gt?i.length=0:w(i,t),i.length||delete n[e])}}},{key:"fire",value:function(e,t,i){2===arguments.length&&(i=gt);var o=t;r(t)&&(o=t[0]);var a=Ct.is(o),u=yt,c=this.listeners,f=c[e];return r(f)&&v(f,function(e){var r=Ot(e,i,t),c=e.$magic;if(n(c)&&(c(),delete e.$magic),a&&(r===mt?(o.prevent(),o.stop()):o.isStoped&&(r=mt)),r===mt)return u=mt}),u}},{key:"has",value:function(e,t){var n=this.listeners,i=n[e];return t==gt?!_(i):r(i)?g(i,t):void 0}}]),e}(),wn="undefined"!=typeof console,_n=/yox/.test(e.toString()),xn=Object.freeze({log:Z,warn:J,error:Q,fatal:X}),On=void 0;On="function"==typeof MutationObserver?ee:"function"==typeof setImmediate?te:ne;var $n=function(e){if(_t){var t=_t.activeElement;if(t&&"autofocus"in t)return void ne(e)}On(e)},jn=[],En=function(e,t){var n=[];return v(e,function(e){if(M(t,e))return dn(n,e,P(t,e.length)),mt}),n},Pn="+",Sn="-",Cn="*",Tn="/",Mn="%",Nn="~",An="&&",Dn="||",zn="!",Ln="!!",qn="===",In="!==",Gn="==",Rn="!=",Vn="<",Fn="<=",Un=">",Yn=">=",Bn={};Bn[Pn]=Bn[Sn]=Bn[zn]=Bn[Nn]=Bn[Ln]=yt;var Hn=G(Bn,yt),Kn={};Kn[Dn]=1,Kn[An]=2,Kn[Gn]=Kn[Rn]=Kn[qn]=Kn[In]=3,Kn[Vn]=Kn[Fn]=Kn[Un]=Kn[Yn]=4,Kn[Pn]=Kn[Sn]=5,Kn[Cn]=Kn[Tn]=Kn[Mn]=6;var Wn=G(Kn,yt),Zn=function e(t){jt(this,e),this.type=t},Jn=1,Qn=2,Xn=3,er=4,tr=5,nr=6,rr=7,ir=8,or=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Jn));return n.elements=e,n}return Pt(t,e),t}(Zn),ar=function(e){function t(e,n,r){jt(this,t);var i=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Qn));return i.left=e,i.operator=n,i.right=r,i}return Pt(t,e),t}(Zn);ar[Dn]=function(e,t){return e||t},ar[An]=function(e,t){return e&&t},ar[qn]=function(e,t){return e===t},ar[In]=function(e,t){return e!==t},ar[Gn]=function(e,t){return e==t},ar[Rn]=function(e,t){return e!=t},ar[Vn]=function(e,t){return e<t},ar[Fn]=function(e,t){return e<=t},ar[Un]=function(e,t){return e>t},ar[Yn]=function(e,t){return e>=t},ar[Pn]=function(e,t){return e+t},ar[Sn]=function(e,t){return e-t},ar[Cn]=function(e,t){return e*t},ar[Tn]=function(e,t){return e/t},ar[Mn]=function(e,t){return e%t};var ur=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Xn));return r.callee=e,r.args=n,r}return Pt(t,e),t}(Zn),cr=function(e){function t(e,n,r){jt(this,t);var i=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,rr));return i.test=e,i.consequent=n,i.alternate=r,i}return Pt(t,e),t}(Zn),fr=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,er));return n.name=e,n}return Pt(t,e),t}(Zn),sr=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,tr));return r.value=e,n&&(r.raw=n),r}return Pt(t,e),t}(Zn),lr=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,nr));return r.object=e,r.prop=n,r}return Pt(t,e),t}(Zn);lr.flatten=function(e){var t=[],n=void 0;do n=e.object,e.type===nr?pn(t,e.prop):pn(t,e);while(e=n);return t};var vr=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ir));return r.operator=e,r.arg=n,r}return Pt(t,e),t}(Zn);vr[Pn]=function(e){return+e},vr[Sn]=function(e){return-e},vr[zn]=function(e){return!e},vr[Nn]=function(e){return~e},vr[Ln]=function(e){return!!e};var dr={};dr.true=yt,dr.false=mt,dr.null=gt,dr.undefined=kt;var pr={},hr="#if",yr="else",mr="else if",gr="#each",kr="#partial",br=">",wr="! ",_r="...",xr="$event",Or="$keypath",$r="o-",jr="on-",Er="ref",Pr="lazy",Sr="model",Cr="event",Tr="key",Mr=1,Nr=2,Ar=3,Dr=4,zr=5,Lr=6,qr=7,Ir=8,Gr=9,Rr=10,Vr=11,Fr=12,Ur={},Yr={},Br={},Hr={},Kr={},Wr={},Zr={},Jr={};Ur[Mr]=Ur[Nr]=Yr[Nr]=Yr[Ar]=Br[Rr]=Br[Vr]=Br[Gr]=Hr[Vr]=Hr[Gr]=Kr[Fr]=Kr[Lr]=Kr[Ir]=Kr[qr]=Wr[Er]=Wr[Pr]=Wr[Sr]=Wr[Tr]=yt,Zr.if=Mr,Zr.each=Dr,Zr.partial=zr,R(Zr,function(e,t){Jr[e]=t});var Qr=function(){function e(t){jt(this,e),this.type=t}return Et(e,[{key:"addChild",value:function(e){dn(this.children||(this.children=[]),e)}}]),e}(),Xr=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Vr));return n.name=e,n}return Pt(t,e),t}(Qr),ei=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Gr));return r.name=e,n&&(r.modifier=n),r}return Pt(t,e),t}(Qr),ti=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Dr));return r.expr=e,n&&(r.index=n),r}return Pt(t,e),t}(Qr),ni=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Rr));return r.name=e,n&&(r.component=n),r}return Pt(t,e),Et(t,[{key:"addAttr",value:function(e){dn(this.attrs||(this.attrs=[]),e)}}]),t}(Qr),ri=function(e){function t(){return jt(this,t),St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ar))}return Pt(t,e),t}(Qr),ii=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Nr));return r.expr=e,r}return Pt(t,e),t}(Qr),oi=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,qr));return r.expr=e,r.safe=n,r}return Pt(t,e),t}(Qr),ai=function(e){function t(e,n){jt(this,t);var r=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Mr));return r.expr=e,r}return Pt(t,e),t}(Qr),ui=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Lr));return n.name=e,n}return Pt(t,e),t}(Qr),ci=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,zr));return n.name=e,n}return Pt(t,e),t}(Qr),fi=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ir));return n.expr=e,n}return Pt(t,e),t}(Qr),si=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Fr));return n.content=e,n}return Pt(t,e),t}(Qr),li=/(\{?\{\{)\s*([^\}]+?)\s*(\}\}\}?)/,vi=/<(\/)?([a-z][-a-z0-9]*)/i,di=/^\s*(\/)?>/,pi=/^\s*([-:\w]+)(?:=(['"]))?/,hi=/[-A-Z]/,yi=/source|param|input|img|br|hr/,mi={},gi=function(){function e(t){jt(this,e);var o=t.data,a=t.context,c=t.computed,f=t.watchers,s=this;if(s.data=o,s.cache={},s.emitter=new bn,s.context=a||s,s.computedDeps={},s.computedDepsReversed={},i(c)){s.computedGetters={},s.computedSetters={},s.computedStack=[],s.computedCache={};var l=s.computedCache,v=s.computedStack,d=s.computedGetters,p=s.computedSetters;R(c,function(e,t){var o=void 0,a=void 0,c=void 0,f=yt;if(n(e)?o=e:i(e)&&(u(e.cache)&&(f=e.cache),r(e.deps)&&(c=e.deps),n(e.get)&&(o=e.get),n(e.set)&&(a=e.set)),o){s.watch(t,function(){V(l,t)&&delete l[t]});var h=function(){if(f&&V(l,t))return l[t];c||v.push([]);var e=Ot(o,s.context);return f&&(l[t]=e),s.setComputedDeps(t,c||b(v)),e};h.toString=d[t]=h}a&&(p[t]=a)})}i(f)&&s.watch(f)}return Et(e,[{key:"get",value:function(e,t){var n=this,r=n.data,i=n.computedStack,a=n.computedGetters,u=function(e){if(i){var t=k(i);t&&dn(t,e)}if(a){var n=ke(a,e),o=n.value,u=n.rest;if(o)return o=o(),u&&!c(o)?H(o,u):{value:o}}return H(r,e)},f=z(e),s=void 0,l=void 0;if(o(t)){var v=z(t);if(f.length>1&&f[0]===bt)e=L(d(v,f.slice(1))),l=u(e);else for(e=gt;yt;){if(s=L(d(v,f)),l=u(s)){e=s;break}if(e==gt&&(e=s),!v.length)break;b(v)}return l||(l={}),l.keypath=e,l}if(l=u(L(f)))return l.value}},{key:"set",value:function(e){var t=this,n={},r=t.data,i=(t.cache,t.emitter),o=t.context,a=(t.computedDeps,t.computedDepsReversed),u=t.computedGetters,f=t.computedSetters,s=t.watchKeypaths,l=function(e,t,r){n[e]||(r&&dn(t,r),n[e]=t)};R(e,function(e,n){if(n=A(n),v(s,function(e){if(T(e,"*")){var r=ge(e),i=n.match(r);i&&l(n,[t.get(n),n],h(i).slice(1))}else M(e,n)&&l(e,[t.get(e),e]);
}),f){var i=f[n];if(i)return void i.call(o,e);var a=ke(u,n),d=a.value,p=a.rest;if(d&&p)return d=d(),void(c(d)||K(d,p,e))}K(r,n,e)}),R(n,function(e,n){var r=t.get(n);if(r!==e[0]){e.unshift(r),i.fire(n,e,o);var u=a[n];u&&v(u,function(e){r=t.get(e),i.fire(e,[r,r,e],o)})}})}},{key:"setComputedDeps",value:function(e,t){var n=this.computedDeps,r=this.computedDepsReversed;if(t!==n[e]){n[e]=t,ye(this),r=this.computedDepsReversed={};var i=function(e,t){var n=r[e]||(r[e]=[]);dn(n,t)};R(n,function(e,t){v(e,function(e){i(e,t)})})}}},{key:"destroy",value:function(){this.emitter.off(),F(this)}}]),e}();U(gi.prototype,{watch:me("on"),watchOnce:me("once"),unwatch:function(e,t){this.emitter.off(e,t),ye(this)}});var ki={},bi=/<[^>]+>/,wi=/^[#.][-\w+]+$/,_i="beforeCreate",xi="afterCreate",Oi="beforeMount",$i="afterMount",ji="beforeUpdate",Ei="afterUpdate",Pi="beforeDestroy",Si="afterDestroy",Ci="allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noshade,noresize,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,typemustmatch,visible",Ti=y(S(Ci,qt));Ci=gt;var Mi={};Mi.for="htmlFor",Mi.value="value",Mi.class="className",Mi.style="style.cssText",Mi.nohref="noHref",Mi.noshade="noShade",Mi.noresize="noResize",Mi.readonly="readOnly",Mi.defaultchecked="defaultChecked",Mi.defaultmuted="defaultMuted",Mi.defaultselected="defaultSelected";var Ni=Object.freeze({createElement:be,createText:we,createComment:_e,createEvent:xe,isElement:Oe,setProp:$e,removeProp:je,setAttr:Ee,removeAttr:Pe,before:Se,append:Ce,replace:Te,remove:Me,parent:Ne,next:Ae,tag:De,children:ze,text:Le,html:qe,find:Ie,on:Ge,off:Re}),Ai="tap",Di="click",zi="input",Li="change",qi="compositionstart",Ii="compositionend",Gi=Y(Ni),Ri=Gi.on,Vi=Gi.off;Gi.specialEvents={input:{on:function(e,t){var n=mt;Gi.on(e,qi,t[qi]=function(){n=yt}),Gi.on(e,Ii,t[Ii]=function(e){n=mt,t(e,zi)}),Ri(e,zi,t[zi]=function(e){n||t(e)})},off:function(e,t){Gi.off(e,qi,t[qi]),Gi.off(e,Ii,t[Ii]),Vi(e,zi,t[zi]),t[qi]=t[Ii]=t[zi]=gt}}},Gi.on=function(e,t,n,r){var i=e.$emitter||(e.$emitter=new bn);if(!i.has(t)){var o=function(t,n){Ct.is(t)||(t=new Ct(Gi.createEvent(t,e))),n&&(t.type=n),i.fire(t.type,t,r)};i[t]=o;var a=Gi.specialEvents[t];a?a.on(e,o):Ri(e,t,o)}i.on(t,n)},Gi.off=function(e,t,n){var r=e.$emitter,i=I(r.listeners);r.off(t,n),v(i,function(t){if(r[t]&&!r.has(t)){var n=r[t],i=Gi.specialEvents[t];i?i.off(e,n):Vi(e,t,n),delete r[t]}})};var Fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt;try{return e.toString()}catch(e){return t}},Ui=function e(t){jt(this,e),U(this,t)};Ui.SEL_COMMENT="!",Ui.is=function(e){return e instanceof Ui};var Yi="init",Bi="create",Hi="insert",Ki="remove",Wi="destroy",Zi="pre",Ji="post",Qi="prepatch",Xi="update",eo="postpatch",to=[Bi,Xi,Ki,Wi,Zi,Ji],no=new Ui({sel:Tt,data:{},children:[]}),ro={create:We,update:We},io={create:Ze,update:Ze},oo={create:Xe,update:Xe,destroy:et},ao={create:nt,update:rt,destroy:it},uo=function(){function e(t,n,r){jt(this,e),this.data=Y(t),this.keypath=n,this.parent=r,this.cache={}}return Et(e,[{key:"push",value:function(t,n){return new e(t,n,this)}},{key:"pop",value:function(){return this.parent}},{key:"set",value:function(e,t){var n=this,r=at(e),i=r.keypath;n&&i&&(V(n.cache,i)&&delete n.cache[i],K(n.data,i,t))}},{key:"get",value:function(e){var t=this,n=at(e),r=n.keypath,i=n.lookup,o=t,a=o.data,u=o.cache,c=function(e,t){return q(e.keypath,t)};if(!V(u,r))if(r){var f=void 0;if(i)for(;t&&!(f=H(t.data,r));)t=t.parent;else f=H(a,r);f&&(u[r]={keypath:c(t,r),value:f.value})}else u[r]={keypath:t.keypath,value:a};return(u=u[r])?u:(J('Failed to lookup "'+e+'".'),{keypath:c(this,r)})}}]),e}(),co=Ke([ao,ro,io,oo],Gi),fo=function(e){var t=e.el,n=e.node,o=e.instance,a=e.component,u=n.value;if(!$(u)){var c=o.$refs;i(c)?V(c,u)&&Q('Passing a ref "'+u+'" is existed.'):c=o.$refs={};var f=function(e){c[u]=e};return a?r(a)?dn(a,f):f(a):f(t),function(){V(c,u)?delete c[u]:r(a)&&w(a,f)}}},so=function(e,t,n){var r=void 0;return function(){if(!r){var i=h(arguments);n&&Ot(e,gt,i),r=setTimeout(function(){r=gt,n||Ot(e,gt,i)},t)}}},lo=[Di,Ai],vo=function(e){var t=e.el,n=e.node,i=e.instance,o=e.component,a=e.directives,u=e.type,c=e.listener;if(u||(u=n.modifier),c||(c=i.compileValue(n.keypath,n.value)),u&&c){var s=a.lazy;if(s){var l=s.value;f(l)&&l>=0?c=so(c,l,g(lo,u)):u===zi&&(u=Li)}if(o){var v=function(e){e.on(u,c)};return r(o)?dn(o,v):v(o),function(){o.off(u,c),r(o)&&w(o,v)}}return Gi.on(t,u,c),function(){Gi.off(t,u,c)}}},po={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=Fi(r.get(n));i!==t.value&&(t.value=i)},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;r.set(n,t.value)},attr:"value"},ho={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=Fi(r.get(n)),o=t.options,a=t.selectedIndex;i!==o[a].value&&v(o,function(e,n){if(e.value===i)return t.selectedIndex=n,mt})},sync:function(e){var t=e.el,n=e.keypath,r=e.instance,i=t.options[t.selectedIndex].value;r.set(n,i)}},yo={set:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked=t.value===Fi(r.get(n))},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked&&r.set(n,t.value)},attr:"checked"},mo={set:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);t.checked=r(o)?g(o,t.value,mt):u(o)?o:!!o},sync:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);r(o)?(t.checked?dn(o,t.value):w(o,t.value,mt),i.set(n,Y(o))):i.set(n,t.checked)},attr:"checked"},go={radio:yo,checkbox:mo,select:ho},ko=function(e){var t=e.node,n=e.instance,r=n.get(t.value,t.keypath),i=r.keypath;return t.oneway?dt(i,e):vt(i,e)},bo="$template$",wo=function(){function e(t){jt(this,e);var r=this;r.$options=t,Ot(t[_i],r,t);var a=t.el,u=t.data,c=t.props,f=t.parent,s=t.replace,l=t.computed,v=t.template,d=t.components,p=t.directives,h=t.partials,y=t.filters,m=t.events,g=t.watchers,k=t.methods,b=t.propTypes,w=t.extensions;U(r,w);var _=c;i(_)?(i(b)&&(_=e.validate(_,b)),u&&!n(u)&&J('"data" option should be a function.')):_={},r.$observer=new gi({context:r,data:_,computed:l});var x=n(u)?Ot(u,r):u;i(x)&&R(x,function(e,t){V(_,t)?J('"'+t+'" is already defined as a prop. Use prop default value instead.'):_[t]=e}),g&&r.$observer.watch(g),r.$eventEmitter=new bn,m&&r.on(m),Ot(t[xi],r),o(v)?(wi.test(v)&&(v=Gi.html(Gi.find(v))),bi.test(v)||Q('"template" option must have a root element.')):v=gt,o(a)&&wi.test(a)&&(a=Gi.find(a)),a&&(Gi.isElement(a)?s||(Gi.html(a,"<div></div>"),a=Gi.children(a)[0]):Q('"el" option must be a html element.')),f&&(r.$parent=f),k&&R(k,function(e,t){V(_o,t)&&Q('"'+t+'" method is conflicted with built-in methods.'),r[t]=e}),d&&r.component(d),p&&r.directive(p),h&&r.partial(h),y&&r.filter(y),v&&(r.watch(bo,function(){r.$dirty=yt}),Ot(t[Oi],r),r.$template=e.compile(v),r.updateView(a||Gi.createElement("div")))}return Et(e,[{key:"get",value:function(e,t){return this.$observer.get(e,t)}},{key:"set",value:function(e,t){var n=void 0,r=void 0;if(o(e))n={},n[e]=t;else{if(!i(e))return;n=e,r=t===yt}this.updateModel(n,r)}},{key:"on",value:function(e,t){this.$eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.$eventEmitter.once(e,t)}},{key:"off",value:function(e,t){this.$eventEmitter.off(e,t)}},{key:"fire",value:function(e,t){var n=e;o(e)&&(n=new Ct(e));var r=this;n.target||(n.target=r);var a=[n];i(t)&&dn(a,t);var u=r.$parent,c=r.$eventEmitter,f=c.fire(n.type,a,r);return f&&u&&(f=u.fire(n,t)),f}},{key:"watch",value:function(e,t,n){this.$observer.watch(e,t,n)}},{key:"watchOnce",value:function(e,t,n){this.$observer.watchOnce(e,t,n)}},{key:"unwatch",value:function(e,t){this.$observer.unwatch(e,t)}},{key:"updateModel",value:function(e){var t=this,n=t.$observer,r=arguments;n.set(e);var i=function(){return t.$dirtyIgnore?void delete t.$dirtyIgnore:void(t.$dirty&&(delete t.$dirty,t.updateView()))};if(1===r.length)t.$dirtyIgnore=yt;else if(2===r.length&&r[1])return void i();t.$pending||(t.$pending=yt,ie(function(){t.$pending&&(delete t.$pending,i())}))}},{key:"updateView",value:function(){var e=this,t=e.$observer,r=e.$options,i=e.$filters,o=e.$node,a=o;if(!a||Ot(r[ji],e)!==mt){var u={},c=xo.filter;U(u,c&&c.data,i&&i.data),R(u,function(t,r){n(t)&&(u[r]=t.bind(e))}),U(u,t.data,t.computedGetters);var f=lt(e.$template,u,e),s=f.nodes,l=f.deps;a?oe(function(){e.$node=co(o,s[0])}):(o=co(arguments[0],s[0]),e.$el=o.el,e.$node=o),oe(function(){t.setComputedDeps(bo,I(l)),Ot(r[a?Ei:$i],e)})}}},{key:"create",value:function(t,n){t=U({},t,n),t.parent=this;var r=new e(t);return dn(this.$children||(this.$children=[]),r),r}},{key:"compileValue",value:function(e,t){if(!$(t)){var n=this;if(!(C(t,Ht)>0))return function(e,r){e.type!==t&&(e=new Ct(e),e.type=t),n.fire(e,r)};var r=se(t);return r.type===Xn?function(t){var i=Ct.is(t),o=Y(r.args);o.length?o=o.map(function(r){var o=r.name,a=r.type;if(a===tr)return r.value;if(a===er)if(o===xr){if(i)return t}else{if(o===Or)return e;if(o===bt)return n.get(e)}else a===nr&&(o=he(r));var u=n.get(o,e);return V(u,"value")?u.value:void 0}):i&&dn(o,t);var a=he(r.callee),u=n[a];if(!u){var c=n.get(a,e);V(c,"value")&&(u=c.value)}Ot(u,n,o)===mt&&i&&(t.prevent(),t.stop())}:void 0}}},{key:"destroy",value:function(){var e=this,t=e.$options,n=e.$node,r=e.$parent,i=e.$observer,o=e.$eventEmitter;Ot(t[Pi],e),r&&r.$children&&w(r.$children,e),n&&arguments[0]!==yt&&co(n,{text:Tt}),o.off(),i.destroy(),F(e),Ot(t[Si],e)}},{key:"nextTick",value:function(t){e.nextTick(t)}},{key:"toggle",value:function(e){var t=!this.get(e);return this.set(e,t),t}},{key:"increase",value:function(e,t,n){var r=$t(this.get(e),0)+(f(t)?t:1);return(!f(n)||r<=n)&&this.set(e,r),r}},{key:"decrease",value:function(e,t,n){var r=$t(this.get(e),0)-(f(t)?t:1);return(!f(n)||r>=n)&&this.set(e,r),r}},{key:"copy",value:function(e,t){return Y(e,t)}}]),e}();wo.version="0.38.1",wo.is=xt,wo.dom=Gi,wo.array=hn,wo.object=kn,wo.string=yn,wo.logger=xn,wo.Event=Ct,wo.Emitter=bn;var _o=wo.prototype,xo={},Oo=function(){function e(){jt(this,e),this.data={}}return Et(e,[{key:"getAsync",value:function(e,t){var r=this.data,i=r[e];if(n(i)){var o=i.$pending;o?dn(o,t):(o=i.$pending=[t],i(function(t){delete i.$pending,r[e]=t,v(o,function(e){e(t)})}))}else t(i)}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){var n=this.data;i(e)?R(e,function(e,t){n[t]=e}):o(e)&&(n[e]=t)}}]),e}(),$o=["component"];return v(d($o,["directive","partial","filter"]),function(e){_o[e]=function(){var t="$"+e+"s",n=this[t]||(this[t]=new Oo),r=pt(e,arguments),i=r.args,o=r.callback;return ht({args:i,get:function(t){return o?void n.getAsync(t,function(n){n?o(n):wo[e](t,o)}):n.get(t)||wo[e](t)},set:function(e,t){n.set(e,t)}})},wo[e]=function(){var t=xo[e]||(xo[e]=new Oo),n=pt(e,arguments),r=n.args,i=n.callback;return ht({args:r,get:function(e){return i?void t.getAsync(e,i):t.get(e)},set:function(e,n){t.set(e,n)}})}}),wo.nextTick=function(e){e.i=2,ie(e)},wo.compile=function(e){return pe(e)[0]},wo.validate=function(e,r){var i={};return R(r,function(r,o){var a=r.type,u=r.value,c=r.required;if(c=c===yt||n(c)&&c(e),V(e,o)){if(a){var f=e[o],s=void 0;$(a)?_(a)?n(a)&&(s=a(f,e)):v(a,function(e){if(t(f,e))return s=yt,mt}):s=t(f,a),s===yt?i[o]=f:J('"'+o+"\" prop's type is not matched.")}}else c?J('"'+o+'" prop is not found.'):V(r,"value")&&(i[o]=n(u)?u(e):u)}),i},wo.use=function(e){e.install(wo)},wo.directive({ref:fo,event:vo,model:ko}),wo});
