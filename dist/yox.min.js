!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Yox=t()}(this,function(){"use strict";function e(){}function t(e,t){return"numeric"===t?f(e):Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function n(e){return t(e,"function")}function r(e){return t(e,"array")}function i(e){return e&&t(e,"object")}function o(e){return t(e,"string")}function u(e){return t(e,"number")}function a(e){return t(e,"boolean")}function c(e){return o(e)||u(e)||a(e)||e==yt}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charAt(t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}function v(e,t,n){var r=e.length;if(r)if(n)for(var i=r-1;i>=0&&t(e[i],i)!==ht;i--);else for(var o=0;o<r&&t(e[o],o)!==ht;o++);}function p(){var e=h(arguments),t=[];return e.unshift(t),_t(ln,yt,e),t}function d(e){return function(t){for(var n=arguments,i=1,o=n.length;i<o;i++)r(n[i])?v(n[i],function(n){t[e](n)}):t[e](n[i])}}function h(e){return r(e)?e:_t(Array.prototype.slice,e)}function y(e,t,n){var r={},i=3===arguments.length;return v(e,function(e,u){u=o(n)?e[n]:i?n:e,r[t?e[t]:e]=u}),r}function m(e,t,n){if(n!==ht)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]==t)return r;return-1}function g(e,t,n){return m(e,t,n)>=0}function k(e){return e[e.length-1]}function b(e){return e.pop()}function w(e,t,n){var r=m(e,t,n);return r>=0?(e.splice(r,1),dt):ht}function _(e){return!r(e)||0===e.length}function x(e){return S(e,Nt)?e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}):e}function $(e){return!o(e)||e===St}function O(e){return $(e)?St:e.trim()}function j(e,t,n){return u(n)?e.slice(t,n):e.slice(t)}function E(e,t){return $(e)?[]:e.split(new RegExp("\\s*"+t.replace(/[.*?]/g,"\\$&")+"\\s*"))}function P(e,t){return e.indexOf(t)}function S(e,t){return P(e,t)>=0}function C(e,t){return 0===P(e,t)}function A(e,t){var n=e.length-t.length;return n>=0&&e.lastIndexOf(t)===n}function T(e){return!$(e)&&P(e,"[")>0&&P(e,"]")>0?(G(mn,e)||(mn[e]=e.replace(/\[\s*?([^\]]+)\s*?\]/g,function(e,t){var n=l(t);return n!==Lt&&n!==Yt||(t=j(t,1,-1)),""+hn+t})),mn[e]):e}function N(e){return e!==St&&e!==gt&&e!==yn}function z(e){return E(T(e),hn).filter(N)}function D(e){return e.filter(N).join(hn)}function q(e,t){return e&&t?e+hn+t:e?e:t||St}function M(e){return Object.keys(e)}function V(e,t){var n=void 0;return n=t?function(e,t){return t.length-e.length}:function(e,t){return e.length-t.length},M(e).sort(n)}function I(e,t){v(M(e),function(n){return t(e[n],n)})}function G(e,t){try{return e.hasOwnProperty(t)}catch(n){return t in e}}function F(e){I(e,function(t,n){delete e[n]})}function L(){for(var e=arguments,t=e[0],n=1,r=e.length;n<r;n++)i(e[n])&&I(e[n],function(e,n){t[n]=e});return t}function U(e,t){var n=e;return r(e)?(n=[],v(e,function(e,r){n[r]=t?U(e):e})):i(e)&&(n={},I(e,function(e,r){n[r]=t?U(e):e})),n}function Y(e){return n(e)&&e.toString!==Function.prototype.toString&&(e=e.toString()),e}function B(e,t){if(!$(t)&&!G(e,t)&&P(t,Ct)>0)for(var n=z(t),r=0,i=n.length;r<i;r++)if(r<i-1){if(e=Y(e[n[r]]),e==yt)return}else t=n[r];if(G(e,t))return{value:Y(e[t])}}function H(e,t,n,r){if(!$(t)&&!G(e,t)&&P(t,Ct)>0){var i=e,o=z(t),u=b(o);v(o,function(t,n){if(e[t])e=e[t];else{if(r===ht)return e=ht;e=e[t]={}}}),e&&e!==i&&(e[u]=n)}else e[t]=n}function K(){if(kt){var e=kt.DEBUG;if(a(e))return BEBUG}return wn}function R(e){bn&&K()&&console.log("[Yox log]: "+e)}function W(e){bn&&K()&&console.warn("[Yox warn]: "+e)}function Z(e){bn&&console.error("[Yox error]: "+e)}function J(e){throw new Error("[Yox fatal]: "+e)}function Q(e){var t=new MutationObserver(e),n=bt.createTextNode(St);t.observe(n,{characterData:dt}),n.data=fn}function X(e){setImmediate(e)}function ee(e){setTimeout(e)}function te(e,t){On.length||$n(ie),pn[e](On,t)}function ne(e){te("push",e)}function re(e){te("unshift",e)}function ie(){var e=On;On=[],v(e,function(e){e.i?(e.i--,ln(On,e)):e()}),On.length&&$n(ie)}function oe(e){return e>=48&&e<=57}function ue(e){return 36===e||95===e||e>=97&&e<=122||e>=65&&e<=90}function ae(e){return ue(e)||oe(e)}function ce(e){if(G(pr,e))return pr[e];var t=e.length,n=0,r=void 0,i=function(){return l(e,n)},o=function(){J("Failed to compile expression: "+cn+e)},u=function(){for(;(r=i())&&(r===sn||r===an);)n++},a=function(){i()===At?f():(c(),i()===At&&f())},c=function(){do n++;while(oe(i()))},f=function(){n++,oe(i())?c():o()},s=function(){var r=i();for(n++;n<t;)if(n++,l(e,n-1)===r)return;o()},v=function(){do n++;while(ae(i()))},p=function(t){var r=e.substring(n,(v(),n));return r?t&&G(vr,r)?new fr(vr[r]):new cr(r):void o()},d=function(e){var u=[];for(n++;n<t;){if(r=i(),r===e)return n++,u;r===Mt?n++:ln(u,k())}o()},h=function(t){u();var r=jn(t,j(e,n))[0];if(r)return n+=r.length,r},y=function(){for(var e=p(dt);n<t;){if(r=i(),r===Ht)return new ur(e,d(Rt));if(r===At)n++,e=new sr(e,new fr(p().name));else{if(r!==Zt)break;e=new sr(e,k(Qt))}}return e},m=function t(){if(u(),r=i(),r===Lt||r===Yt){var c=e.substring(n,(s(),n));return new fr(j(c,1,-1),c)}if(oe(r)||r===At)return new fr(parseFloat(e.substring(n,(a(),n))));if(r===Zt)return new ir(d(Qt));if(r===Ht)return k(Rt);if(ue(r))return y();var f=h(Hn);return f?new lr(f,t()):void o()},g=function(){var e=m(),t=h(Rn);if(!t)return e;for(var n=[e,t,Kn[t],m()],r=void 0,i=void 0;i=h(Rn);)n.length>3&&Kn[i]<n[n.length-2]&&(r=b(n),b(n),t=b(n),e=b(n),ln(n,new or(e,t,r))),ln(n,i,Kn[i],m());for(r=b(n);n.length>1;)b(n),t=b(n),e=b(n),r=new or(e,t,r);return r},k=function(e){e&&n++;var t=g();if(u(),i()===on){n++;var r=g();if(u(),i()===It){n++;var a=g();return u(),new ar(t,r,a)}o()}return e&&(i()===e?n++:o()),t};return pr[e]=k()}function fe(e,t){return O(j(e,t.length))}function se(e){return S(e,cn)&&!O(e)}function le(e){return e.replace(/^[ \t]*\n|\n[ \t]*$/g,St)}function ve(e){var t=mi[e];if(t)return t;t=[];for(var n=[],r=[],i=[],o=void 0,u=function(t){J("Error compiling template:"+cn+e+cn+"- "+t)},a=function(e,t){var r=void 0;v(n,function(t,i){if(t.type===e)return r=n.splice(i,1)[0],ht},dt),r?r.type===Ar&&t&&r.name!==t&&u("end tag expected </"+r.name+"> to be </"+t+">."):u("{{/"+Jr[e]+"}} is not a pair.")},c=function(e){var o=e.type,u=e.content;if(o===Nr){if(se(u)||!(u=le(u)))return;e.content=u}Yr[o]&&a(b(r).type);var c=k(n);c?1===i.length&&c.addAttr?c.addAttr(e):c.addChild(e):ln(t,e),Ur[o]||Yr[o]?ln(r,e):Br[o]&&ln(i,e),Kr[o]||ln(n,e)},f=[function(e){if(!i.length){var t=e.match(vi);if(t&&!t.index){var n=t[2];return t[1]===Dt?a(Ar,n):c(new ni(n,hi.test(n))),t[0]}}},function(e){var t=e.match(pi);if(t)return 1===i.length&&((t[1]===Dt||yi.test(i[0].name))&&a(Ar),b(i)),t[0]},function(e){if(1===i.length){var t=e.match(di);if(t){var n=t[1];return Wr[n]?c(new ei(x(n))):C(n,Or)?(n=j(n,Or.length),c(new ei(Sr,x(n)))):C(n,$r)?(n=j(n,$r.length),c(new ei(x(n)))):c(new Xr(i[0].component?x(n):n)),o=t[2],o||a(b(i).type),t[0]}}},function(e){if(2===i.length){for(var t=0,n=void 0,r=void 0;n=s(e,t);){if(n===o){r=dt;break}t++}var u=St;return t&&(u=j(e,0,t),c(new si(u))),r&&(u+=o,a(b(i).type)),u}var f=e.match(vi);return f&&f.index&&(e=j(e,0,f.index)),(1!==i.length||O(e))&&c(new si(e)),e}],l=[function(e,t){if(C(e,mr)){var n=E(fe(e,mr),Vt);if(n[0])return new ti(ce(O(n[0])),O(n[1]));u("invalid each: "+t)}},function(e,t){if(C(e,kr))return e=fe(e,kr),e?new ai(e):u("invalid import: "+t)},function(e,t){if(C(e,gr))return e=fe(e,gr),e?new ci(e):u("invalid partial: "+t)},function(e,t){if(C(e,dr))return e=fe(e,dr),e?new ui(ce(e)):u("invalid if: "+t)},function(e,t){if(C(e,yr))return e=fe(e,yr),e?new ii(ce(e)):u("invalid else if: "+t)},function(e){if(C(e,hr))return new ri},function(e,t){if(C(e,wr))return e=fe(e,wr),e?new fi(ce(e)):u("invalid spread: "+t)},function(e,t){if(!C(e,br))return e=O(e),e?new oi(ce(e),!A(t,"}}}")):u("invalid expression: "+t)}],p=function(e){e&&!function(){for(var t=e;t;)v(f,function(e,n){if(n=e(t))return t=j(t,n.length),ht});h=j(h,e.length)}()},d=function(e,t){if(e)if(s(e)===Dt){var n=j(e,1),i=Zr[n];Ur[i]&&(i=b(r).type),a(i)}else v(l,function(n,r){if(r=n(e,t))return c(r),ht});h=j(h,t.length)},h=e,y=void 0;h;)y=h.match(li),y?(p(j(h,0,y.index)),y[1].length===y[3].length?d(y[2],y[0]):u("invalid expression: "+y[0])):p(h);return mi[e]=t}function pe(e){var t=function(e){return pe(e)};switch(e.type){case Zn:return"["+e.elements.map(t).join(qt)+"]";case Jn:return pe(e.left)+" "+e.operator+" "+pe(e.right);case Qn:return pe(e.callee)+"("+e.args.map(t).join(qt)+")";case nr:return pe(e.test)+" ? "+pe(e.consequent)+" : "+pe(e.alternate);case Xn:return e.name;case er:return G(e,"raw")?e.raw:e.value;case tr:return sr.flatten(e).map(function(e,t){if(e.type===er){var n=e,r=n.value;return f(r)?""+Wt+r+Jt:""+Ct+r}return e=pe(e),t>0?""+Wt+e+Jt:e}).join(St);case rr:return""+e.operator+pe(e.arg);default:return St}}function de(e){var t=e.deps,n=e.emitter,r={},i=function(e){r[e]=dt};I(n.listeners,function(e,t){i(t)}),I(t,function(e){v(e,i)}),e.watchKeypaths=M(r)}function he(e){return function(t,n,r){var u=t;o(t)&&(u={},u[t]={sync:r,watcher:n});var a=this,c=a.emitter,f=a.context;a.cache;I(u,function(t,n){var r=t,o=void 0;i(t)&&(r=t.watcher,o=t.sync),c[e](n,r),de(a),me(n)||(t=a.get(n),o&&_t(r,f,[t,mt,n]))})}}function ye(e,t){var n=ki[t];n||(n=t.replace(/\./g,"\\.").replace(/\*\*/g,"([.\\w]+?)").replace(/\*/g,"(\\w+)"),n=ki[t]=new RegExp("^"+n+"$"));var r=e.match(n);if(r)return h(r).slice(1)}function me(e){return S(e,"*")}function ge(e,t){var n=jn(V(e,dt),t),r=n[0],i=n[1];return{getter:r?e[r]:yt,rest:i&&C(i,hn)?j(i,1):i}}function ke(e,t){var n=kt.SVGElement;return"svg"===e||t&&n&&t instanceof n?bt.createElementNS("http://www.w3.org/2000/svg",e):bt.createElement(e)}function be(e){return bt.createTextNode(e||St)}function we(e){return bt.createComment(e||St)}function _e(e){return e}function xe(e){return 1===e.nodeType}function $e(e,t,n){H(e,t,n,ht)}function Oe(e,t){$e(e,t,yt)}function je(e,t,n){Ai[t]&&(n=n===mt||n?dt:ht),Ti[t]?$e(e,Ti[t],n):Ai[t]?$e(e,t,n):e.setAttribute(t,n)}function Ee(e,t){Ti[t]?Oe(e,Ti[t]):Ai[t]?Oe(e,t):e.removeAttribute(t)}function Pe(e,t,n){n?e.insertBefore(t,n):Se(e,t)}function Se(e,t){e.appendChild(t)}function Ce(e,t,n){e.replaceChild(t,n)}function Ae(e,t){e.removeChild(t)}function Te(e){return e.parentNode}function Ne(e){return e.nextSibling}function ze(e){var t=e.tagName;return $(t)?St:t.toLowerCase()}function De(e){return e.childNodes}function qe(e,t){return 1===arguments.length?e.nodeValue:e.nodeValue=t}function Me(e,t){return 1===arguments.length?e.innerHTML:e.innerHTML=t}function Ve(e,t){return(t||bt).querySelector(e)}function Ie(e,t,n){e.addEventListener(t,n,ht)}function Ge(e,t,n){e.removeEventListener(t,n,ht)}function Fe(e,t,n,r,i,o){return{sel:e,text:t,data:n,children:r,key:i,component:o}}function Le(e,t){return e.key===t.key&&e.sel===t.sel}function Ue(e,t,n){for(var r,i={},o=t;o<=n;o++)r=e[o].key,r!=yt&&(i[r]=o);return i}function Ye(e){return Fe(mt,Ui(e))}function Be(e,t,n,r,i){return Fe(e,mt,t,n,r,i)}function He(e){return Fe(Yi,e)}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ni,n=new kn;v(to,function(t){v(e,function(e){n.on(t,e[t])})});var i=function(e){var n=[t.tag(e)],r=e.id,i=e.className;return r&&ln(n,""+Tt+r),i&&ln(n,""+Ct+E(i,fn).join(Ct)),n.join(St)},a=function(e){var t=void 0,n=void 0,r=void 0,i=P(e,Tt);i>0&&(t=j(e,0,i),e=j(e,i+1));var o=P(e,Ct);if(o>0){var u=j(e,0,o);t?n=u:t=u,r=E(j(e,o+1),Ct).join(fn)}else t?n=e:t=e;return{tagName:t,id:n,className:r}},c=function(e,i,u){var c=i.sel,s=i.data,l=i.children,v=i.text,p=s&&s.hooks||{};if(_t(p[Bi],yt,i),$(c))return i.el=t.createText(v);if(c===Yi)return i.el=t.createComment(v);var d=a(c),h=d.tagName,y=d.id,m=d.className,g=t.createElement(h,e);return y&&(g.id=y),m&&(g.className=m),i.el=g,r(l)?f(g,l,0,l.length-1,u):o(v)&&t.append(g,t.createText(v)),s&&(s=[no,i],n.fire(Hi,s,t),_t(p[Hi],yt,s),p[Ki]&&u.push(i)),i.el},f=function(e,t,n,r,i,o){for(var u=n;u<=r;u++)s(e,t[u],i,o)},s=function(e,n,r,i){var o=c(e,n,r);o&&t.before(e,o,i)},l=function(e,t,n,r){for(var i,o=n;o<=r;o++)i=t[o],i&&p(e,i)},p=function(e,r){var i=r.sel,o=r.el,u=r.data;i?(d(r),t.remove(e,o),u&&(n.fire(Ri,r,t),u.hooks&&_t(u.hooks[Ri],yt,r))):o&&t.remove(e,o)},d=function e(r){var i=r.data,o=r.children;i&&(o&&v(o,function(t){e(t)}),n.fire(Wi,r,t),i.hooks&&_t(i.hooks[Wi],yt,r))},h=function(e,n,r){t.before(e,r.el,n.el),p(e,n)},y=function(e,n,r,i){for(var o=0,a=n.length-1,s=n[o],v=n[a],p=0,d=r.length-1,h=r[p],y=r[d],g=void 0,k=void 0,b=void 0;o<=a&&p<=d;)s?v?Le(s,h)?(m(s,h,i),s=n[++o],h=r[++p]):Le(v,y)?(m(v,y,i),v=n[--a],y=r[--d]):Le(s,y)?(m(s,y,i),t.before(e,s.el,t.next(v.el)),s=n[++o],y=r[--d]):Le(v,h)?(m(v,h,i),t.before(e,v.el,s.el),v=n[--a],h=r[++p]):(g||(g=Ue(n,o,a)),k=g[h.key],u(k)?(b=n[k],m(b,h,i),n[k]=yt):(b=c(e,h,i),b&&(b=h)),b&&t.before(e,b.el,s.el),h=r[++p]):v=n[--a]:s=n[++o];o>a?(b=r[d+1],f(e,r,p,d,i,b?b.el:yt)):p>d&&l(e,n,o,a)},m=function(e,r,i){if(e!==r){var u=r.data,a=u&&u.hooks||{},s=[e,r];_t(a[Qi],yt,s);var v=e.el;if(r.el=v,!Le(e,r)){var p=t.parent(v);return void(c(p,r,i)&&p&&h(p,e,r))}u&&(n.fire(Xi,s,t),_t(a[Xi],yt,s));var d=r.text,m=r.children,g=e.text,k=e.children;o(d)?d!==g&&t.text(v,d):m&&k?m!==k&&y(v,k,m,i):m?(o(g)&&t.text(v,St),f(v,m,0,m.length-1,i)):k?l(v,k,0,k.length-1):o(g)&&t.text(v,St),_t(a[eo],yt,s)}};return function(e,r){if(n.fire(Zi,yt,t),t.isElement(e)){var o=e;e=Fe(i(o),mt,{},[]),e.el=o}var u=[];if(Le(e,r))m(e,r,u);else{var a=t.parent(e.el);c(a,r,u)&&a&&h(a,e,r)}return v(u,function(e){_t(e.data.hooks[Ki],yt,e)}),n.fire(Ji,yt,t),r}}function Re(e,t){var n=e.data.attrs,r=t.data.attrs;if(!t.component&&(n||r)){n=n||{},r=r||{};var i=t.el,o=this,u=function(e,t){if(G(e,t)){var n=e[t];return n!==mt?n:t}};I(r,function(e,t){u(r,t)!==u(n,t)&&o.setAttr(i,t,e)}),I(n,function(e,t){G(r,t)||o.removeAttr(i,t)})}}function We(e,t){var n=e.data.props,r=t.data.props;if(!t.component&&(n||r)){n=n||{},r=r||{};var i=t.el,o=this;I(r,function(e,t){e!==n[t]&&o.setProp(i,t,e)}),I(n,function(e,t){G(r,t)||o.removeProp(i,t)})}}function Ze(e,t){var r=e.el,o=e.data,u=o.instance,a=o.attrs,c=o.directives,f=o.destroies,s=c[t],l={el:r,node:s,instance:u,directives:c,attributes:a||{}},v=r.$component;i(v)&&(G(v,"queue")&&!G(v,"set")&&(v=v.queue),l.component=v);var p=_t(u.directive(s.name),yt,l);n(p)&&(f||(f=e.data.destroies={}),f[t]=p)}function Je(e,t){var n=e.data.destroies;n&&n[t]&&(n[t](),delete n[t])}function Qe(e,t){var n=e.data.directives,r=t.data.directives;(n||r)&&(n=n||{},r=r||{},I(r,function(r,i){if(G(n,i)){var o=n[i];o.value===r.value&&o.context===r.context||(Je(e,i),Ze(t,i))}else Ze(t,i)}),I(n,function(t,n){G(r,n)||Je(e,n)}),t.data.destroies=L({},e.data.destroies,t.data.destroies))}function Xe(e){var t=e.data.destroies;t&&I(t,function(e){e()})}function et(e,t){var n=t.el,i=t.component;if(i){var o=t.data,u=o.instance,a=o.attrs;n.$component={queue:[],attrs:a},u.component(t.sel,function(e){var o=n,a=o.$component;a&&r(a.queue)&&(i=u.create(e,{el:n,props:a.attrs,replace:dt}),n=t.el=i.$el,n.$component=i,v(a.queue,function(e){e(i)}))})}}function tt(e,t){var n=t.el.$component;if(i(n)){var r=t.data.attrs;n.set?n.set(r,dt):n.attrs=r}}function nt(e,t){var n=e.el,r=n.$component;i(r)&&(r.destroy&&r.destroy(dt),n.$component=yt)}function rt(e,t,n,r){var i={};return i[Zn]=function(e){n(mt);var t=[];return v(e.elements,function(e){ln(t,i[e.type](e))}),t},i[rr]=function(e){return n(mt),lr[e.operator](i[e.arg.type](e.arg))},i[Jn]=function(e){n(mt);var t=e.left,r=e.right;return or[e.operator](i[t.type](t),i[r.type](r))},i[nr]=function(e){n(mt);var t=e.test,r=e.consequent,o=e.alternate;return i[t.type](t)?i[r.type](r):i[o.type](o)},i[Qn]=function(e){return n(mt),_t(i[e.callee.type](e.callee),yt,e.args.map(function(e){return i[e.type](e)}))},i[er]=function(e){return n(mt),e.value},i[Xn]=function(e){var i=e.name;n(i);var o=t.get(i);return r(o.keypath,o.value),o.value},i[tr]=function(e){var o=[];v(sr.flatten(e),function(e,t){var n=e.type;n!==er?t>0?ln(o,i[n](e)):n===Xn&&ln(o,e.name):ln(o,e.value)});var u=D(o);n(u);var a=t.get(u);return r(a.keypath,a.value),a.value},i[e.type](e)}function it(e){var t=z(e);return t[0]===gt?(t.shift(),{keypath:D(t)}):{keypath:D(t),lookup:dt}}function ot(e){return r(e)&&(e[Nt]=dt),e}function ut(e){return r(e)&&e[Nt]}function at(e,t){if(r(e))switch(e.length){case 0:return St;case 1:return e[0];default:return e.join(St)}else if(!_(t))return St}function ct(e,t,n,u,a,c){var f=void 0,s=[],l=function(){f=D(s)},p=function(){return f};l(),p.toString=p,c[xr]=p;var d=new ao(c,f),h=[],y=[],m=ht,g=function(e){r(e.context)&&_t(d.set,d,e.context),e.keypath!==mt&&(ln(s,e.keypath),l()),e.value!==mt&&(d=d.push(e.value,f)),Br[e.type]&&ln(G,e.type),ln(h,{node:e,index:-1,parent:C}),C=k(h)},w=function(){var e=C,t=e.node;Br[t.type]&&b(G),t.value!==mt&&(d=d.pop()),t.keypath!==mt&&(b(s),l()),A&&(A=yt),C=C.parent,b(h)},_=function(e){r(e)?e.length&&g({children:e}):g(e)},x=function(e){var t=C.parent,n=void 0;n=t?t.children||(t.children=ot([])):y,ut(e)?ln(n,e):n.push(e)},$=function(e){return rt(e,d,function(e){m===dt&&(m=e)},function(e,t){m===ht&&a(e,t)})},O=function(e){return Yr[e.type]?ht:(T=yt,dt)},j={},E={};j[Ir]=function(e){return F[e.name]=e.children,w(),ht},j[Gr]=function(e){var t=e.name,n=F[t]||u(t);return n?(w(),_(n),ht):void J('Partial "'+t+'" is not found.')},j[Dr]=j[qr]=function(e){if(!$(e.expr))return!A||Yr[A.type]||Hr[k(G)]||x(ot(t())),w(),ht},j[Vr]=function(e){w();var t=e.expr,n=e.index,o=e.children,u=$(t),a=void 0;if(r(u)?a=v:i(u)&&(a=I),a){var c=[];g({value:u,children:c,keypath:t.keypath}),a(u,function(e,t,r){r={value:e,children:o,keypath:t},n&&(r.context=[n,t]),ln(c,r)})}return ht},j[Tr]=function(e){var t=e.children;t&&1===t.length&&(m=t[0].bindable||ht)};var P=function(e,t,n){var r={name:e,value:t,keypath:f,type:Tr};return o(n)&&(r.binding=n),r};E[Nr]=function(e){return e.content},E[Fr]=function(e){return $(e.expr)},E[Tr]=function(e){return e=P(e.name,at(C.children,e.children),m),m=ht,e},E[zr]=function(t){var n=t,r=n.name,i=at(C.children,t.children),o=d.get(f);if(r!==Cr)return{name:r,value:i,keypath:f,modifier:t.modifier,context:o.value,type:zr};if(i!=yt){if(V||(M=e.cache,V=e.cache={}),z=M&&M[i],z&&z.value===o.value){for(V[i]=z;C.node.type!==Ar;)w();return a(o.keypath,o.value),z.result}for(;t=C.parent;)if(t.node.type===Ar){t.cache={key:i,value:o.value};break}}},E[Dr]=E[qr]=E[Mr]=function(e){return T=O,C.children},E[Lr]=function(e){m=dt;var t=$(e.expr),n=ot([]);if(i(t)){var r=o(m);I(t,function(e,t){ln(n,P(t,e,r?q(m,t):mt))})}else J('Spread "'+pe(e.expr)+'" must be an object.');return m=ht,n},E[Ar]=function(e){var t=[],r=[],i=[];return C.children&&v(C.children,function(e){e.type===Tr?ln(t,e):e.type===zr?ln(r,e):ln(i,e)}),n({name:e.name,key:C.cache?C.cache.key:mt,component:e.component,keypath:f,attributes:t,directives:r,children:i},e)},E[mt]=function(e,t){return t.children};var S=function(e,t,n){for(;n=t[++e.index];)if(!T||T(n))return A=t[e.index+1],g(n),ht},C=void 0,A=void 0,T=void 0,N=void 0,z=void 0,M=void 0,V=void 0,G=[],F={};for(_(e);h.length;){var L=C,U=L.node,Y=U.type,B=U.attrs,H=U.children;if(C.enter||(C.enter=dt,_t(j[Y],yt,[U,C])!==ht)){if(B&&!C.attrs){if(S(C,B)===ht)continue;C.index=-1,C.attrs=dt}H&&S(C,H)===ht||(N=_t(E[Y],yt,[U,C]),N!==mt&&(x(N),z=C.cache,z&&(z.result=N,V[z.key]=z)),w())}}return y}function ft(e,t,n,r){var i=function(e,t){var r={},i={instance:n,hooks:r},u=t.children,a=e.children;if(u&&1===u.length){var c=u[0];c.type===Fr&&c.safe===ht&&(i.props={innerHTML:a[0]},a.length=0)}var f=function(e){var t=i.directives||(i.directives={});t[q(e.name,e.modifier)]=e};return v(e.attributes,function(e){var t=e.name,n=e.value,r=e.keypath,u=e.binding,a=i.attrs||(i.attrs={});a[t]=n,o(u)&&f({keypath:r,name:Pr,modifier:t,value:u,oneway:dt})}),v(e.directives,f),Be(e.name,i,a.map(function(e){return Fe.is(e)?e:Ye(e)}),e.key,e.component)},u=function(e){var t=n.partial(e);return o(t)?ve(t):t};return ct(e,He,i,u,r,t)}function st(e,t){var n=t.el,r=t.node,i=t.instance,o=t.directives,u=t.attributes,a=Mi,c=Gi.tag(n),f=n.type,s=go[f]||go[c];s||(s=po,("oninput"in n||"textarea"===c||"text"===f||"password"===f)&&(a=qi));var l={el:n,keypath:e,instance:i},v=function(){s.set(l)};i.watch(e,v,s.attr&&!G(u,s.attr));var p=vo({el:n,node:r,instance:i,directives:o,type:a,listener:function(){s.sync(l)}});return function(){i.unwatch(e,v),p&&p()}}function lt(e,t){var n=t.el,i=t.node,o=t.instance,u=t.component,a=function(e){var t=i.modifier;if(u){var o=function(n){n.set(t,e)};r(u)?ln(u,o):o(u)}else Gi.setAttr(n,t,e!==mt?e:St)};return o.watch(e,a),function(){o.unwatch(e,a)}}function vt(e,t){var r=t[0],i=t[1],o=void 0;return g(Oo,e)&&n(i)&&(o=i,i=mt),{callback:o,args:i===mt?[r]:[r,i]}}function pt(e){var t=e.args,n=e.get,r=e.set;t=h(t);var u=t[0];t[1];if(i(u))_t(r,yt,u);else if(o(u)){var a=t,c=a.length;if(2===c)_t(r,yt,t);else if(1===c)return _t(n,yt,u)}}var dt=!0,ht=!1,yt=null,mt=void 0,gt="this",kt="undefined"!=typeof window?window:yt,bt="undefined"!=typeof document?document:yt,wt=Object.freeze({is:t,func:n,array:r,object:i,string:o,number:u,boolean:a,primitive:c,numeric:f}),_t=function(e,t,i){if(n(e))return r(i)?e.apply(t,i):e.call(t,i)},xt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f(e)?+e:t},$t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),jt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Et=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Pt=function(){function e(t){$t(this,e),t.type?(this.type=t.type,this.originalEvent=t):this.type=t}return Ot(e,[{key:"prevent",value:function(){if(!this.isPrevented){var e=this.originalEvent;e&&(n(e.prevent)?e.prevent():n(e.preventDefault)&&e.preventDefault()),this.isPrevented=dt}}},{key:"stop",value:function(){if(!this.isStoped){var e=this.originalEvent;e&&(n(e.stop)?e.stop():n(e.stopPropagation)&&e.stopPropagation()),this.isStoped=dt}}}]),e}();Pt.is=function(e){return e instanceof Pt};var St="",Ct=".",At=l(Ct),Tt="#",Nt=(l(Tt),"-"),zt=(l(Nt),"="),Dt=(l(zt),"/"),qt=(l(Dt),","),Mt=l(qt),Vt=":",It=l(Vt),Gt=";",Ft=(l(Gt),"'"),Lt=l(Ft),Ut='"',Yt=l(Ut),Bt="(",Ht=l(Bt),Kt=")",Rt=l(Kt),Wt="[",Zt=l(Wt),Jt="]",Qt=l(Jt),Xt="{",en=(l(Xt),"}"),tn=(l(en),"<"),nn=(l(tn),">"),rn=(l(nn),"?"),on=l(rn),un="\t",an=l(un),cn="\n",fn=(l(cn)," "),sn=l(fn),ln=d("push"),vn=d("unshift"),pn=Object.freeze({each:v,merge:p,push:ln,unshift:vn,toArray:h,toObject:y,indexOf:m,has:g,last:k,pop:b,remove:w,falsy:_}),dn=Object.freeze({camelCase:x,falsy:$,trim:O,slice:j,split:E,indexOf:P,has:S,startsWith:C,endsWith:A}),hn=".",yn=".",mn={},gn=Object.freeze({keys:M,sort:V,each:I,has:G,clear:F,extend:L,copy:U,get:B,set:H}),kn=function(){function e(){$t(this,e),this.listeners={}}return Ot(e,[{key:"on",value:function(e,t){var r=this.listeners,u=function(e,t){n(e)&&ln(r[t]||(r[t]=[]),e)};i(e)?I(e,u):o(e)&&u(t,e)}},{key:"once",value:function(e,t){var r=this,u=function(e,t){n(e)&&(e.$once=function(){r.off(t,e)})};i(e)?I(e,u):o(e)&&u(t,e),r.on(e,t)}},{key:"off",value:function(e,t){if(e==yt)this.listeners={};else{var n=this.listeners,r=n[e];r&&(t==yt?r.length=0:w(r,t),r.length||delete n[e])}}},{key:"fire",value:function(e,t,i){2===arguments.length&&(i=yt);var o=t;r(t)&&(o=t[0]);var u=Pt.is(o),a=dt,c=this.listeners,f=c[e];return f&&v(f,function(e){var r=_t(e,i,t),c=e.$once;if(n(c)&&(c(),delete e.$once),u&&(r===ht?(o.prevent(),o.stop()):o.isStoped&&(r=ht)),r===ht)return a=ht}),a}},{key:"has",value:function(e,t){var n=this.listeners,r=n[e];return t==yt?!_(r):r?g(r,t):void 0}}]),e}(),bn="undefined"!=typeof console,wn=/yox/.test(e.toString()),_n=Object.freeze({log:R,warn:W,error:Z,fatal:J}),xn=void 0;xn="function"==typeof MutationObserver?Q:"function"==typeof setImmediate?X:ee;var $n=function(e){if(bt){var t=bt.activeElement;if(t&&"autofocus"in t)return void ee(e)}xn(e)},On=[],jn=function(e,t){var n=[];return v(e,function(e){if(C(t,e))return ln(n,e,j(t,e.length)),ht}),n},En="+",Pn="-",Sn="*",Cn="/",An="%",Tn="~",Nn="&&",zn="||",Dn="!",qn="!!",Mn="===",Vn="!==",In="==",Gn="!=",Fn="<",Ln="<=",Un=">",Yn=">=",Bn={};Bn[En]=Bn[Pn]=Bn[Dn]=Bn[Tn]=Bn[qn]=dt;var Hn=V(Bn,dt),Kn={};Kn[zn]=1,Kn[Nn]=2,Kn[In]=Kn[Gn]=Kn[Mn]=Kn[Vn]=3,Kn[Fn]=Kn[Ln]=Kn[Un]=Kn[Yn]=4,Kn[En]=Kn[Pn]=5,Kn[Sn]=Kn[Cn]=Kn[An]=6;var Rn=V(Kn,dt),Wn=function e(t){$t(this,e),this.type=t},Zn=1,Jn=2,Qn=3,Xn=4,er=5,tr=6,nr=7,rr=8,ir=function(e){function t(e){$t(this,t);var n=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Zn));return n.elements=e,n}return jt(t,e),t}(Wn),or=function(e){function t(e,n,r){$t(this,t);var i=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Jn));return i.left=e,i.operator=n,i.right=r,i}return jt(t,e),t}(Wn);or[zn]=function(e,t){return e||t},or[Nn]=function(e,t){return e&&t},or[Mn]=function(e,t){return e===t},or[Vn]=function(e,t){return e!==t},or[In]=function(e,t){return e==t},or[Gn]=function(e,t){return e!=t},or[Fn]=function(e,t){return e<t},or[Ln]=function(e,t){return e<=t},or[Un]=function(e,t){return e>t},or[Yn]=function(e,t){return e>=t},or[En]=function(e,t){return e+t},or[Pn]=function(e,t){return e-t},or[Sn]=function(e,t){return e*t},or[Cn]=function(e,t){return e/t},or[An]=function(e,t){return e%t};var ur=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Qn));return r.callee=e,r.args=n,r}return jt(t,e),t}(Wn),ar=function(e){function t(e,n,r){$t(this,t);var i=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,nr));return i.test=e,i.consequent=n,i.alternate=r,i}return jt(t,e),t}(Wn),cr=function(e){function t(e){$t(this,t);var n=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Xn));return n.name=e,n}return jt(t,e),t}(Wn),fr=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,er));return r.value=e,n&&(r.raw=n),r}return jt(t,e),t}(Wn),sr=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,tr));return r.object=e,r.prop=n,r}return jt(t,e),t}(Wn);sr.flatten=function(e){var t=[],n=void 0;do n=e.object,e.type===tr?vn(t,e.prop):vn(t,e);while(e=n);return t};var lr=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,rr));return r.operator=e,r.arg=n,r}return jt(t,e),t}(Wn);lr[En]=function(e){return+e},lr[Pn]=function(e){return-e},lr[Dn]=function(e){return!e},lr[Tn]=function(e){return~e},lr[qn]=function(e){return!!e};var vr={};vr.true=dt,vr.false=ht,vr.null=yt,vr.undefined=mt;var pr={},dr="#if",hr="else",yr="else if",mr="#each",gr="#partial",kr=">",br="! ",wr="...",_r="$event",xr="$keypath",$r="o-",Or="on-",jr="ref",Er="lazy",Pr="model",Sr="event",Cr="key",Ar=1,Tr=2,Nr=3,zr=4,Dr=5,qr=6,Mr=7,Vr=8,Ir=9,Gr=10,Fr=11,Lr=12,Ur={},Yr={},Br={},Hr={},Kr={},Rr={},Wr={},Zr={},Jr={};Ur[Dr]=Ur[qr]=Yr[qr]=Yr[Mr]=Br[Ar]=Br[Tr]=Br[zr]=Hr[Tr]=Hr[zr]=Kr[Nr]=Kr[Gr]=Kr[Lr]=Kr[Fr]=Rr[tr]=Rr[Xn]=Wr[jr]=Wr[Er]=Wr[Pr]=Wr[Cr]=dt,Zr.if=Dr,Zr.each=Vr,Zr.partial=Ir,I(Zr,function(e,t){Jr[e]=t});var Qr=function(){function e(t){$t(this,e),this.type=t}return Ot(e,[{key:"addChild",value:function(e){ln(this.children||(this.children=[]),e)}}]),e}(),Xr=function(e){function t(e){$t(this,t);var n=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Tr));return n.name=e,n}return jt(t,e),t}(Qr),ei=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,zr));return r.name=e,n&&(r.modifier=n),r}return jt(t,e),t}(Qr),ti=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Vr));return r.expr=e,n&&(r.index=n),r}return jt(t,e),t}(Qr),ni=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ar));return r.name=e,n&&(r.component=n),r}return jt(t,e),Ot(t,[{key:"addAttr",value:function(e){ln(this.attrs||(this.attrs=[]),e)}}]),t}(Qr),ri=function(e){function t(){return $t(this,t),Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Mr))}return jt(t,e),t}(Qr),ii=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,qr));return r.expr=e,r}return jt(t,e),t}(Qr),oi=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Fr));return r.expr=e,r.safe=n,n&&Rr[e.type]&&(r.bindable=dt),r}return jt(t,e),t}(Qr),ui=function(e){function t(e,n){$t(this,t);var r=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Dr));return r.expr=e,r}return jt(t,e),t}(Qr),ai=function(e){function t(e){$t(this,t);var n=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Gr));return n.name=e,n}return jt(t,e),t}(Qr),ci=function(e){function t(e){$t(this,t);var n=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ir));return n.name=e,n}return jt(t,e),t}(Qr),fi=function(e){function t(e){$t(this,t);var n=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Lr));return n.expr=e,n}return jt(t,e),t}(Qr),si=function(e){function t(e){$t(this,t);var n=Et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Nr));return n.content=e,n}return jt(t,e),t}(Qr),li=/(\{?\{\{)\s*([^\}]+?)\s*(\}\}\}?)/,vi=/<(\/)?([a-z][-a-z0-9]*)/i,pi=/^\s*(\/)?>/,di=/^\s*([-:\w]+)(?:=(['"]))?/,hi=/[-A-Z]/,yi=/source|param|input|img|br|hr/,mi={},gi=function(){function e(t){$t(this,e);var o=t.data,u=t.context,c=t.computed,f=t.watchers,s=this;if(s.data=o,s.cache={},s.emitter=new kn,s.context=u||s,s.deps={},s.reversedDeps={},i(c)){s.computedGetters={},s.computedSetters={},s.computedStack=[];var l=s.cache,v=s.computedStack;I(c,function(e,t){var o=void 0,u=void 0,c=void 0,f=dt;if(n(e)?o=e:i(e)&&(a(e.cache)&&(f=e.cache),r(e.deps)&&(c=e.deps),n(e.get)&&(o=e.get),n(e.set)&&(u=e.set)),o){s.watch(t,function(){G(l,t)&&delete l[t]});var p=function(){if(f&&G(l,t))return l[t];c||v.push([]);var e=_t(o,s.context);return l[t]=e,s.setDeps(t,c||b(v)),e};p.toString=s.computedGetters[t]=p}u&&(s.computedSetters[t]=u)})}i(f)&&s.watch(f)}return Ot(e,[{key:"get",value:function(e,t){var n=this,r=n.data,i=n.cache,u=n.computedStack,a=n.computedGetters,f=function(e){if(u){var t=k(u);t&&ln(t,e)}var n=void 0;if(a){var o=ge(a,e),f=o.getter,s=o.rest;f&&(f=f(),n=s&&!c(f)?B(f,s):{value:f})}return n||(n=B(r,e)),n&&(i[e]=n.value),n},s=z(e),l=void 0,v=void 0;if(o(t)){var d=z(t);if(s.length>1&&s[0]===gt)e=D(p(d,s.slice(1))),v=f(e);else for(e=yt;dt;){if(l=D(p(d,s)),v=f(l)){e=l;break}if(e==yt&&(e=l),!d.length)break;b(d)}return v||(v={}),v.keypath=e,v}if(v=f(D(s)))return v.value}},{key:"set",value:function(e){var t=this,n=t.data,r=t.cache,i=t.emitter,o=t.context,u=(t.deps,t.reversedDeps),a=t.computedGetters,f=t.computedSetters,s=t.watchKeypaths,l=t.reversedKeypaths,p={},d={},h=function(e){return G(p,e)||(p[e]=r[e]),p[e]},y=function(e){return G(d,e)||(d[e]=t.get(e)),d[e]},m=[],g={},k=function(e,t,n,r,i){var o=e+Nt+t;g[o]||(g[o]=dt,ln(m,{keypath:e,realpath:t,oldValue:n,match:r,force:i}))},b={},w=function(e){s&&!b[e]&&(b[e]=dt,v(s,function(t){if(me(t)){var n=ye(e,t);n&&k(t,e,h(e),n)}else C(t,e)?k(t,t,h(t)):C(e,t)&&k(t,t,h(t),mt,dt)}))},_={},x=function(e){l&&!_[e]&&(_[e]=dt,v(l,function(t){var n=void 0,r=void 0;t===e?n=u[t]:me(t)&&(r=ye(e,t),r&&(n=u[t])),n&&v(n,function(e){k(e,e,h(e),mt,dt)})}))};I(e,function(e,t){if(t=T(t),w(t),f){var r=f[t];if(r)return void r.call(o,e);var i=ge(a,t),u=i.getter,s=i.rest;if(u&&s)return u=u(),
void(c(u)||H(u,s,e))}H(n,t,e)});for(var $=function(e){var t=e.keypath,n=e.realpath,r=e.oldValue,u=e.match,a=e.force,c=y(n);if(a||r!==c){var f=[c,r,t];u&&ln(f,u),i.fire(t,f,o),x(t),w(n)}},O=0;O<m.length;O++)$(m[O])}},{key:"setDeps",value:function(e,t){var n=this,r=n.deps,i=n.reversedDeps;t!==r[e]&&(r[e]=t,de(n),i={},I(r,function(e,t){v(e,function(e){ln(i[e]||(i[e]=[]),t)})}),n.reversedDeps=i,n.reversedKeypaths=M(i))}},{key:"setCache",value:function(e,t){this.cache[e]=t}},{key:"destroy",value:function(){this.emitter.off(),F(this)}}]),e}();L(gi.prototype,{watch:he("on"),watchOnce:he("once"),unwatch:function(e,t){this.emitter.off(e,t),de(this)}});var ki={},bi=/<[^>]+>/,wi=/^[#.][-\w+]+$/,_i="beforeCreate",xi="afterCreate",$i="beforeMount",Oi="afterMount",ji="beforeUpdate",Ei="afterUpdate",Pi="beforeDestroy",Si="afterDestroy",Ci="allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noshade,noresize,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,typemustmatch,visible",Ai=y(E(Ci,qt));Ci=yt;var Ti={};Ti.for="htmlFor",Ti.value="value",Ti.class="className",Ti.style="style.cssText",Ti.nohref="noHref",Ti.noshade="noShade",Ti.noresize="noResize",Ti.readonly="readOnly",Ti.defaultchecked="defaultChecked",Ti.defaultmuted="defaultMuted",Ti.defaultselected="defaultSelected";var Ni=Object.freeze({createElement:ke,createText:be,createComment:we,createEvent:_e,isElement:xe,setProp:$e,removeProp:Oe,setAttr:je,removeAttr:Ee,before:Pe,append:Se,replace:Ce,remove:Ae,parent:Te,next:Ne,tag:ze,children:De,text:qe,html:Me,find:Ve,on:Ie,off:Ge}),zi="tap",Di="click",qi="input",Mi="change",Vi="compositionstart",Ii="compositionend",Gi=U(Ni),Fi=Gi.on,Li=Gi.off;Gi.specialEvents={input:{on:function(e,t){var n=ht;Gi.on(e,Vi,t[Vi]=function(){n=dt}),Gi.on(e,Ii,t[Ii]=function(e){n=ht,t(e,qi)}),Fi(e,qi,t[qi]=function(e){n||t(e)})},off:function(e,t){Gi.off(e,Vi,t[Vi]),Gi.off(e,Ii,t[Ii]),Li(e,qi,t[qi]),t[Vi]=t[Ii]=t[qi]=yt}}},Gi.on=function(e,t,n,r){var i=e.$emitter||(e.$emitter=new kn);if(!i.has(t)){var o=function(t,n){Pt.is(t)||(t=new Pt(Gi.createEvent(t,e))),n&&(t.type=n),i.fire(t.type,t,r)};i[t]=o;var u=Gi.specialEvents[t];u?u.on(e,o):Fi(e,t,o)}i.on(t,n)},Gi.off=function(e,t,n){var r=e.$emitter,i=M(r.listeners);r.off(t,n),v(i,function(t){if(r[t]&&!r.has(t)){var n=r[t],i=Gi.specialEvents[t];i?i.off(e,n):Li(e,t,n),delete r[t]}})};var Ui=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;try{return e.toString()}catch(e){return t}};Fe.is=function(e){return G(e,"sel")};var Yi="!",Bi="init",Hi="create",Ki="insert",Ri="remove",Wi="destroy",Zi="pre",Ji="post",Qi="prepatch",Xi="update",eo="postpatch",to=[Hi,Xi,Ri,Wi,Zi,Ji],no=Fe(St,mt,{},[]),ro={create:Re,update:Re},io={create:We,update:We},oo={create:Qe,update:Qe,destroy:Xe},uo={create:et,update:tt,destroy:nt},ao=function(){function e(t,n,r){$t(this,e),this.data=U(t),this.keypath=n,this.parent=r,this.cache={}}return Ot(e,[{key:"push",value:function(t,n){return new e(t,n,this)}},{key:"pop",value:function(){return this.parent}},{key:"set",value:function(e,t){var n=this,r=it(e),i=r.keypath;n&&i&&(G(n.cache,i)&&delete n.cache[i],n.data[i]=t)}},{key:"get",value:function(e){var t=this,n=it(e),r=n.keypath,i=n.lookup,o=t,u=o.data,a=o.cache,c=function(e,t){return q(e.keypath,t)};if(!G(a,r))if(r){var f=void 0;if(i)for(;t&&!(f=B(t.data,r));)t=t.parent;else f=B(u,r);f&&(a[r]={keypath:c(t,r),value:f.value})}else a[r]={keypath:t.keypath,value:u};return(a=a[r])?a:(W('Failed to lookup "'+e+'".'),{keypath:c(this,r)})}}]),e}(),co=Ke([uo,ro,io,oo],Gi),fo=function(e){var t=e.el,n=e.node,o=e.instance,u=e.component,a=n.value;if(!$(a)){var c=o.$refs;i(c)?G(c,a)&&Z('Passing a ref "'+a+'" is existed.'):c=o.$refs={};var f=function(e){c[a]=e};return u?r(u)?ln(u,f):f(u):f(t),function(){G(c,a)?delete c[a]:r(u)&&w(u,f)}}},so=function(e,t,n){var r=void 0;return function(){if(!r){var i=h(arguments);n&&_t(e,yt,i),r=setTimeout(function(){r=yt,n||_t(e,yt,i)},t)}}},lo=[Di,zi],vo=function(e){var t=e.el,n=e.node,i=e.instance,o=e.component,u=e.directives,a=e.type,c=e.listener;if(a||(a=n.modifier),c||(c=i.compileValue(n.keypath,n.value)),a&&c){var s=u.lazy;if(s){var l=s.value;f(l)&&l>=0?c=so(c,l,g(lo,a)):a===qi&&(a=Mi)}if(o){var v=function(e){e.on(a,c)};return r(o)?ln(o,v):v(o),function(){o.off(a,c),r(o)&&w(o,v)}}return Gi.on(t,a,c),function(){Gi.off(t,a,c)}}},po={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=Ui(r.get(n));i!==t.value&&(t.value=i)},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;r.set(n,t.value)},attr:"value"},ho={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=Ui(r.get(n)),o=t.options,u=t.selectedIndex;i!==o[u].value&&v(o,function(e,n){if(e.value===i)return t.selectedIndex=n,ht})},sync:function(e){var t=e.el,n=e.keypath,r=e.instance,i=t.options[t.selectedIndex].value;r.set(n,i)}},yo={set:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked=t.value===Ui(r.get(n))},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked&&r.set(n,t.value)},attr:"checked"},mo={set:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);t.checked=r(o)?g(o,t.value,ht):a(o)?o:!!o},sync:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);r(o)?(t.checked?ln(o,t.value):w(o,t.value,ht),i.set(n,U(o))):i.set(n,t.checked)},attr:"checked"},go={radio:yo,checkbox:mo,select:ho},ko=function(e){var t=e.node,n=e.instance,r=n.get(t.value,t.keypath),i=r.keypath;return t.oneway?lt(i,e):st(i,e)},bo="$template$",wo=function(){function e(t){$t(this,e);var r=this;r.$options=t,_t(t[_i],r,t);var u=t.el,a=t.data,c=t.props,f=t.parent,s=t.replace,l=t.computed,v=t.template,p=t.components,d=t.directives,h=t.partials,y=t.filters,m=t.events,g=t.watchers,k=t.methods,b=t.propTypes,w=t.extensions;L(r,w);var _=c;i(_)?(i(b)&&(_=e.validate(_,b)),a&&!n(a)&&W('"data" option should be a function.')):_={},r.$observer=new gi({context:r,data:_,computed:l});var x=n(a)?_t(a,r):a;i(x)&&I(x,function(e,t){G(_,t)?W('"'+t+'" is already defined as a prop. Use prop default value instead.'):_[t]=e}),g&&r.$observer.watch(g),r.$eventEmitter=new kn,m&&r.on(m),_t(t[xi],r),o(v)?(wi.test(v)&&(v=Gi.html(Gi.find(v))),bi.test(v)||Z('"template" option must have a root element.')):v=yt,o(u)&&wi.test(u)&&(u=Gi.find(u)),u&&(Gi.isElement(u)?s||(Gi.html(u,"<div></div>"),u=Gi.children(u)[0]):Z('"el" option must be a html element.')),f&&(r.$parent=f),k&&I(k,function(e,t){G(_o,t)&&Z('"'+t+'" method is conflicted with built-in methods.'),r[t]=e}),p&&r.component(p),d&&r.directive(d),h&&r.partial(h),y&&r.filter(y),v&&(r.watch(bo,function(){r.$dirty=dt}),_t(t[$i],r),r.$template=e.compile(v),r.updateView(u||Gi.createElement("div")))}return Ot(e,[{key:"get",value:function(e,t){return this.$observer.get(e,t)}},{key:"set",value:function(e,t){var n=void 0,r=void 0;if(o(e))n={},n[e]=t;else{if(!i(e))return;n=e,r=t===dt}this.updateModel(n,r)}},{key:"on",value:function(e,t){this.$eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.$eventEmitter.once(e,t)}},{key:"off",value:function(e,t){this.$eventEmitter.off(e,t)}},{key:"fire",value:function(e,t){var n=e;o(e)&&(n=new Pt(e));var r=this;n.target||(n.target=r);var u=[n];i(t)&&ln(u,t);var a=r.$parent,c=r.$eventEmitter,f=c.fire(n.type,u,r);return f&&a&&(f=a.fire(n,t)),f}},{key:"watch",value:function(e,t,n){this.$observer.watch(e,t,n)}},{key:"watchOnce",value:function(e,t,n){this.$observer.watchOnce(e,t,n)}},{key:"unwatch",value:function(e,t){this.$observer.unwatch(e,t)}},{key:"updateModel",value:function(e){var t=this,n=t.$observer,r=arguments;n.set(e);var i=function(){return t.$dirtyIgnore?void delete t.$dirtyIgnore:void(t.$dirty&&(delete t.$dirty,t.updateView()))};if(1===r.length)t.$dirtyIgnore=dt;else if(2===r.length&&r[1])return void i();t.$pending||(t.$pending=dt,ne(function(){t.$pending&&(delete t.$pending,i())}))}},{key:"updateView",value:function(){var e=this,t=e.$observer,r=e.$options,i=e.$filters,o=e.$node,u=o;if(!u||_t(r[ji],e)!==ht){var a={},c=xo.filter;L(a,c&&c.data,i&&i.data),I(a,function(t,r){n(t)&&(a[r]=t.bind(e))}),L(a,t.data,t.computedGetters);var f=[],s=ft(e.$template,a,e,function(e,n){ln(f,e),t.setCache(e,n)});t.setDeps(bo,f),re(function(){_t(r[u?Ei:Oi],e)}),u?re(function(){e.$node=co(o,s[0])}):(o=co(arguments[0],s[0]),e.$el=o.el,e.$node=o)}}},{key:"create",value:function(t,n){t=L({},t,n),t.parent=this;var r=new e(t);return ln(this.$children||(this.$children=[]),r),r}},{key:"compileValue",value:function(e,t){if(!$(t)){var n=this;if(!(P(t,Bt)>0))return function(e,r){e.type!==t&&(e=new Pt(e),e.type=t),n.fire(e,r)};var r=ce(t);return r.type===Qn?function(t){var i=Pt.is(t),o=U(r.args);o.length?o=o.map(function(r){var o=r.name,u=r.type;if(u===er)return r.value;if(u===Xn)if(o===_r){if(i)return t}else{if(o===xr)return e;if(o===gt)return n.get(e)}else u===tr&&(o=pe(r));var a=n.get(o,e);return G(a,"value")?a.value:void 0}):i&&ln(o,t);var u=pe(r.callee),a=n[u];if(!a){var c=n.get(u,e);G(c,"value")&&(a=c.value)}_t(a,n,o)===ht&&i&&(t.prevent(),t.stop())}:void 0}}},{key:"destroy",value:function(){var e=this,t=e.$options,n=e.$node,r=e.$parent,i=e.$observer,o=e.$eventEmitter;_t(t[Pi],e),r&&r.$children&&w(r.$children,e),n&&arguments[0]!==dt&&co(n,{text:St}),o.off(),i.destroy(),F(e),_t(t[Si],e)}},{key:"nextTick",value:function(t){e.nextTick(t)}},{key:"toggle",value:function(e){var t=!this.get(e);return this.set(e,t),t}},{key:"increase",value:function(e,t,n){var r=xt(this.get(e),0)+(f(t)?t:1);return(!f(n)||r<=n)&&this.set(e,r),r}},{key:"decrease",value:function(e,t,n){var r=xt(this.get(e),0)-(f(t)?t:1);return(!f(n)||r>=n)&&this.set(e,r),r}},{key:"copy",value:function(e,t){return U(e,t)}}]),e}();wo.version="0.38.7",wo.is=wt,wo.dom=Gi,wo.array=pn,wo.object=gn,wo.string=dn,wo.logger=_n,wo.Event=Pt,wo.Emitter=kn;var _o=wo.prototype,xo={},$o=function(){function e(){$t(this,e),this.data={}}return Ot(e,[{key:"getAsync",value:function(e,t){var r=this.data,i=r[e];if(n(i)){var o=i.$pending;o?ln(o,t):(o=i.$pending=[t],i(function(t){delete i.$pending,r[e]=t,v(o,function(e){e(t)})}))}else t(i)}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){var n=this.data;i(e)?I(e,function(e,t){n[t]=e}):o(e)&&(n[e]=t)}}]),e}(),Oo=["component"];return v(p(Oo,["directive","partial","filter"]),function(e){_o[e]=function(){var t="$"+e+"s",n=this[t]||(this[t]=new $o),r=vt(e,arguments),i=r.args,o=r.callback;return pt({args:i,get:function(t){return o?void n.getAsync(t,function(n){n?o(n):wo[e](t,o)}):n.get(t)||wo[e](t)},set:function(e,t){n.set(e,t)}})},wo[e]=function(){var t=xo[e]||(xo[e]=new $o),n=vt(e,arguments),r=n.args,i=n.callback;return pt({args:r,get:function(e){return i?void t.getAsync(e,i):t.get(e)},set:function(e,n){t.set(e,n)}})}}),wo.nextTick=function(e){e.i=1,ne(e)},wo.compile=function(e){return ve(e)[0]},wo.validate=function(e,r){var i={};return I(r,function(r,o){var u=r.type,a=r.value,c=r.required;if(c=c===dt||n(c)&&c(e),G(e,o)){if(u){var f=e[o],s=void 0;$(u)?_(u)?n(u)&&(s=u(f,e)):v(u,function(e){if(t(f,e))return s=dt,ht}):s=t(f,u),s===dt?i[o]=f:W('"'+o+"\" prop's type is not matched.")}}else c?W('"'+o+'" prop is not found.'):G(r,"value")&&(i[o]=n(a)?a(e):a)}),i},wo.use=function(e){e.install(wo)},wo.directive({ref:fo,event:vo,model:ko}),wo});
