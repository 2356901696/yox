!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Yox=t()}(this,function(){"use strict";function e(){}function t(e,t){return"numeric"===t?f(e):Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function n(e){return t(e,"function")}function r(e){return t(e,"array")}function i(e){return e&&t(e,"object")}function o(e){return t(e,"string")}function u(e){return t(e,"number")}function a(e){return t(e,"boolean")}function c(e){return o(e)||u(e)||a(e)||e==dt}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charAt(t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}function v(e,t,n){var r=e.length;if(r)if(n)for(var i=r-1;i>=0&&t(e[i],i)!==pt;i--);else for(var o=0;o<r&&t(e[o],o)!==pt;o++);}function p(e,t){var n=[];return d(n,e),d(n,t),n}function d(e,t){r(t)?v(t,function(t){e.push(t)}):e.push(t)}function h(e,t){r(t)?v(t,function(t){e.unshift(t)}):e.unshift(t)}function y(e){return r(e)?e:wt([].slice,e)}function m(e,t,n){var r={};return v(e,function(e,i){r[t?e[t]:e]=n}),r}function g(e,t,n){if(n!==pt)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]==t)return r;return-1}function k(e,t,n){return g(e,t,n)>=0}function w(e){return e[e.length-1]}function b(e){return e.pop()}function x(e,t,n){var r=g(e,t,n);return r>=0?(e.splice(r,1),vt):pt}function _(e){return!r(e)||0===e.length}function O(e){return C(e,At)?e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}):e}function $(e){return!o(e)||e===Pt}function j(e){return $(e)?Pt:e.trim()}function P(e,t,n){return u(n)?e.slice(t,n):e.slice(t)}function E(e,t){return $(e)?[]:e.split(new RegExp("\\s*"+t.replace(/[.*?]/g,"\\$&")+"\\s*"))}function S(e,t){return e.indexOf(t)}function C(e,t){return S(e,t)>=0}function A(e,t){return 0===S(e,t)}function T(e,t){var n=e.length-t.length;return n>=0&&e.lastIndexOf(t)===n}function D(e){return!$(e)&&S(e,"[")>0&&S(e,"]")>0?(L(pn,e)||(pn[e]=e.replace(/\[\s*?([^\]]+)\s*?\]/g,function(e,t){var n=l(t);return n!==Ut&&n!==Lt||(t=P(t,1,-1)),""+ln+t})),pn[e]):e}function z(e){return e!==Pt&&e!==yt&&e!==vn}function q(e){return E(D(e),ln).filter(z)}function M(e){return e.filter(z).join(ln)}function N(e,t,n){var r=void 0;return e===t?n?[e,Pt]:vt:A(e,r=t+ln)?n?[t,P(e,r.length)]:vt:pt}function V(e,t){return e&&t?e+ln+t:e?e:t||Pt}function G(e){return Object.keys(e)}function U(e,t){var n=void 0;return n=t?function(e,t){return t.length-e.length}:function(e,t){return e.length-t.length},G(e).sort(n)}function F(e,t){v(G(e),function(n){return t(e[n],n)})}function L(e,t){return e.hasOwnProperty(t)}function I(e,t){return c(e)?L(e,t):t in e}function Y(e){F(e,function(t,n){delete e[n]})}function B(e,t,n,r){return v([t,n,r],function(t){i(t)&&F(t,function(t,n){e[n]=t})}),e}function H(e,t){var n=e;return r(e)?(n=[],v(e,function(e,r){n[r]=t?H(e):e})):i(e)&&(n={},F(e,function(e,r){n[r]=t?H(e):e})),n}function K(e,t){var r=e[t];return n(r)&&r.toString!==Function.prototype.toString&&(r=r.toString()),r}function R(e,t){if(!$(t)&&!I(e,t)&&S(t,Et)>0)for(var n=q(t),r=0,i=n.length;r<i;r++)if(r<i-1){if(e=K(e,n[r]),e==dt)return}else t=n[r];if(I(e,t))return{value:K(e,t)}}function W(e,t,n,r){if(!$(t)&&!I(e,t)&&S(t,Et)>0){var i=e,o=q(t),u=b(o);v(o,function(t,n){if(e[t])e=e[t];else{if(r===pt)return e=pt;e=e[t]={}}}),e&&e!==i&&(e[u]=n)}else e[t]=n}function Z(){if(mt){var e=mt.DEBUG;if(a(e))return BEBUG}return mn}function J(e){yn&&Z()&&console.log("[Yox log]: "+e)}function Q(e){yn&&Z()&&console.warn("[Yox warn]: "+e)}function X(e){yn&&console.error("[Yox error]: "+e)}function ee(e){throw new Error("[Yox fatal]: "+e)}function te(e){var t=new MutationObserver(e),n=gt.createTextNode(Pt);t.observe(n,{characterData:vt}),n.data=an}function ne(e){setImmediate(e)}function re(e){setTimeout(e)}function ie(e,t){bn.length||wn(ae),fn[e](bn,t)}function oe(e){ie("push",e)}function ue(e){ie("unshift",e)}function ae(){var e=bn;bn=[],v(e,function(e){e()})}function ce(e,t,n,r,i,o){return{tag:e,text:t,data:n,children:r,key:i,component:o}}function fe(e,t){return e.key===t.key&&e.tag===t.tag}function se(e,t,n){for(var r,i={},o=t;o<=n;o++)r=e[o].key,r!=dt&&(i[r]=o);return i}function le(e,t,n,r,i){return ce(e,ht,t,n,r,i)}function ve(e){return ce(_n,e)}function pe(e){return ce(ht,xn(e))}function de(e,t){var n=new hn;v(zn,function(t){v(e,function(e){n.on(t,e[t])})});var i=function(e,i,u){var c=i.tag,f=i.data,s=i.children,l=i.text,v=f&&f.hooks||{};if(wt(v[On],dt,i),$(c))return i.el=t.createText(l);if(c===_n)return i.el=t.createComment(l);var p=i.el=t.createElement(c,e);return r(s)?a(p,s,0,s.length-1,u):o(l)&&t.append(p,t.createText(l)),f&&(f=[qn,i],n.fire($n,f,t),wt(v[$n],dt,f),v[jn]&&u.push(i)),i.el},a=function(e,t,n,r,i,o){for(var u=n;u<=r;u++)c(e,t[u],i,o)},c=function(e,n,r,o){var u=i(e,n,r);u&&t.before(e,u,o)},f=function(e,t,n,r){for(var i,o=n;o<=r;o++)i=t[o],i&&s(e,i)},s=function(e,r){var i=r.tag,o=r.el,u=r.data;i?(l(r),t.remove(e,o),u&&(n.fire(Pn,r,t),u.hooks&&wt(u.hooks[Pn],dt,r))):o&&t.remove(e,o)},l=function e(r){var i=r.data,o=r.children;i&&(o&&v(o,function(t){e(t)}),n.fire(En,r,t),i.hooks&&wt(i.hooks[En],dt,r))},p=function(e,n,r){t.before(e,r.el,n.el),s(e,n)},d=function(e,n,r,o){for(var c=0,s=n.length-1,l=n[c],v=n[s],p=0,d=r.length-1,y=r[p],m=r[d],g=void 0,k=void 0,w=void 0;c<=s&&p<=d;)l?v?fe(l,y)?(h(l,y,o),l=n[++c],y=r[++p]):fe(v,m)?(h(v,m,o),v=n[--s],m=r[--d]):fe(l,m)?(h(l,m,o),t.before(e,l.el,t.next(v.el)),l=n[++c],m=r[--d]):fe(v,y)?(h(v,y,o),t.before(e,v.el,l.el),v=n[--s],y=r[++p]):(g||(g=se(n,c,s)),k=g[y.key],u(k)?(w=n[k],h(w,y,o),n[k]=dt):(w=i(e,y,o),w&&(w=y)),w&&t.before(e,w.el,l.el),y=r[++p]):v=n[--s]:l=n[++c];c>s?(w=r[d+1],a(e,r,p,d,o,w?w.el:dt)):p>d&&f(e,n,c,s)},h=function(e,r,u){if(e!==r){var c=r.data,s=c&&c.hooks||{},l=[e,r];wt(s[An],dt,l);var v=e.el;if(r.el=v,!fe(e,r)){var h=t.parent(v);return void(i(h,r,u)&&h&&p(h,e,r))}c&&(n.fire(Tn,l,t),wt(s[Tn],dt,l));var y=r.text,m=r.children,g=e.text,k=e.children;o(y)?y!==g&&t.text(v,y):m&&k?m!==k&&d(v,k,m,u):m?(o(g)&&t.text(v,Pt),a(v,m,0,m.length-1,u)):k?f(v,k,0,k.length-1):o(g)&&t.text(v,Pt),wt(s[Dn],dt,l)}};return function(e,r){if(n.fire(Sn,dt,t),t.isElement(e)){var o=e;e=ce(t.tag(o),ht,{},[]),e.el=o}var u=[];if(fe(e,r))h(e,r,u);else{var a=t.parent(e.el);i(a,r,u)&&a&&p(a,e,r)}return v(u,function(e){wt(e.data.hooks[jn],dt,e)}),n.fire(Cn,dt,t),r}}function he(e,t){var n=e.data.attrs,r=t.data.attrs;if(!t.component&&(n||r)){n=n||{},r=r||{};var i=t.el,o=this,u=function(e,t){if(L(e,t))return e[t]||Pt};F(r,function(e,t){e=u(r,t),e!==u(n,t)&&o.setAttr(i,t,e)}),F(n,function(e,t){L(r,t)||o.removeAttr(i,t)})}}function ye(e,t){var n=e.data.props,r=t.data.props;if(!t.component&&(n||r)){n=n||{},r=r||{};var i=t.el,o=this;F(r,function(e,t){e!==n[t]&&o.setProp(i,t,e)}),F(n,function(e,t){L(r,t)||o.removeProp(i,t)})}}function me(e,t){var r=e.el,o=e.component,u=e.data,a=u.instance,c=u.attrs,f=u.directives,s=u.destroies,l=f[t],v={el:r,node:l,instance:a,directives:f,attrs:c||{}},p=r.$component;o&&i(p)&&(L(p,"queue")&&!L(p,"set")&&(p=p.queue),v.component=p);var d=wt(a.directive(l.name),dt,v);n(d)&&(s||(s=e.data.destroies={}),s[t]=d)}function ge(e,t){var n=e.data.destroies;n&&n[t]&&(n[t](),delete n[t])}function ke(e,t){var n=e.data.directives,r=t.data.directives;(n||r)&&(n=n||{},r=r||{},F(r,function(r,i){if(L(n,i)){var o=n[i];o.value===r.value&&o.context.get(yt).value===r.context.get(yt).value||(ge(e,i),me(t,i))}else me(t,i)}),F(n,function(t,n){L(r,n)||ge(e,n)}),t.data.destroies=B({},e.data.destroies,t.data.destroies))}function we(e){var t=e.data.destroies;t&&F(t,function(e){e()})}function be(e,t){var n=t.el,i=t.component;if(i){var o=t.data,u=o.instance,a=o.attrs;n.$component={queue:[],attrs:a},u.component(t.tag,function(e){var o=n,a=o.$component;a&&r(a.queue)&&(i=u.create(e,{el:n,props:a.attrs,replace:vt}),n=t.el=i.$el,n.$component=i,v(a.queue,function(e){e(i)}))})}}function xe(e,t){var n=t.el.$component;if(t.component&&i(n)){var r=t.data.attrs;n.set?n.set(r,vt):n.attrs=r}}function _e(e,t){var n=e.component,r=e.el,o=r.$component;n&&i(o)&&(o.destroy&&o.destroy(vt),r.$component=dt)}function Oe(e){return e>=48&&e<=57}function $e(e){return 36===e||95===e||e>=97&&e<=122||e>=65&&e<=90}function je(e){return $e(e)||Oe(e)}function Pe(e){if(jr[e])return jr[e];var t=e.length,n=0,r=void 0,i=function(){ee("Failed to compile expression: "+un+e)},o=function(){return l(e,n)},u=function(t){return e.substring(t,n)},a=function(){for(;(r=o())&&(r===cn||r===on);)n++},c=function(){o()===St?s():(f(),o()===St&&s())},f=function(){do n++;while(Oe(o()))},s=function(){n++,Oe(o())?f():i()},p=function(){var r=o();for(n++;n<t;)if(n++,l(e,n-1)===r)return;i()},h=function(){do n++;while(je(o()))},y=function(e){var t=n;h();var r=u(t);return r?e&&L($r,r)?new xr(r,$r[r]):new br(r,r):void i()},m=function(e){var u=[];for(n++;n<t;){if(r=o(),r===e)return n++,u;r===qt?n++:d(u,O())}i()},g=function(t){a();var r=P(e,n),i=void 0;if(v(t,function(e){if(A(r,e))return i=e,pt}),i)return n+=i.length,i},k=function(){for(var e=n,i=y(vt),a=void 0;n<t;){if(r=o(),r===Yt)return a=m(Ht),new kr(u(e),i,a);if(r===St)n++,a=y(),i=new _r(u(e),i,new xr(a.source,a.name));else{if(r!==Rt)break;a=O(Zt),i=new _r(u(e),i,a)}}return i},x=function e(){a(),r=o();var t=n,f=void 0;if(r===Ut||r===Lt)return p(),f=u(t),new xr(f,P(f,1,-1));if(Oe(r)||r===St)return c(),f=u(t),new xr(f,parseFloat(f));if(r===Rt)return f=m(Zt),new mr(u(t),f);if(r===Yt)return O(Ht);if($e(r))return k();var s=g(pr);return s?(f=e(),new Or(u(t),s,f)):void i()},_=function(){for(var e=[n,x()],t=void 0,r=void 0,i=function(){b(e),b(e);var n=b(e),r=b(e);return new gr(u(w(e)),r,n,t)};r=g(hr);)e.length>5&&dr[r]<e[e.length-3]&&(t=b(e),d(e,i())),d(e,r),d(e,dr[r]),d(e,n),d(e,x());for(t=b(e);e.length>4;)t=i();return t},O=function(e){e&&n++;var t=n,r=_();if(a(),o()===nn){n++;var c=_();if(a(),o()===Nt){n++;var f=_();return a(),new wr(u(t),r,c,f)}i()}return e&&(o()===e?n++:i()),r};return jr[e]=O()}function Ee(e,t){return j(P(e,t.length))}function Se(e){return C(e,un)&&!j(e)}function Ce(e){return e.replace(/^[ \t]*\n|\n[ \t]*$/g,Pt)}function Ae(e){var t=Ei[e];if(t)return t;t=[];for(var n=[],r=[],i=[],u=void 0,a=function(t){ee("Error compiling template:"+un+e+un+"- "+t)},c=function(e){return e&&1===e.length&&e[0]},f=function(e,t){var r=void 0;if(v(n,function(t,i){if(t.type===e)return r=n.splice(i,1)[0],pt},vt),r){var u=r,f=u.name,s=u.children,l=c(s);if(e===Yr)t&&f!==t&&a("end tag expected </"+f+"> to be </"+t+">."),l&&l.type===ei&&l.safe===pt&&(r.props={innerHTML:l.expr},delete r.children);else if(e===Br&&f===Ir){var p=w(i),d=p.attrs;x(d,r),d.length||delete p.attrs,_(s)||(p.key=l.type===Hr?l.text:s)}else if(l)if(l.type===Hr)if(e===Kr){var h=Pe(l.text);r.expr=h,r.value=l.text,delete r.children}else e===Br&&(r.value=l.text,delete r.children);else e===Br&&l.type===ei&&l.safe&&o(l.expr.keypath)&&(r.binding=l.expr.keypath)}else a("{{/"+ci[e]+"}} is not a pair.")},l=function(e){var o=e.type,u=e.text;if(o===Hr){if(Se(u)||!(u=Ce(u)))return;e.text=u}ri[o]&&f(b(r).type);var a=w(n);a?1===i.length&&a.addAttr?a.addAttr(e):a.addChild(e):d(t,e),ni[o]||ri[o]?d(r,e):ii[o]&&d(i,e),oi[o]||d(n,e)},p=[function(e){if(!i.length){var t=e.match(_i);if(t&&!t.index){var n=t[2];return t[1]===Dt?f(Yr,n):l(new pi(n,ji.test(n))),t[0]}}},function(e){var t=e.match(Oi);if(t)return 1===i.length&&((t[1]===Dt||Pi.test(i[0].name))&&f(Yr),b(i)),t[0]},function(e){if(1===i.length){var t=e.match($i);if(t){var n=t[1];return ui[n]?l(new li(O(n))):A(n,Vr)?(n=P(n,Vr.length),l(new li(Lr,O(n)))):A(n,Nr)?(n=P(n,Nr.length),l(new li(O(n)))):l(new si(i[0].component?O(n):n)),u=t[2],u||f(b(i).type),t[0]}}},function(e){if(2===i.length){for(var t=0,n=void 0,r=void 0;n=s(e,t);){if(n===u){r=vt;break}t++}var o=Pt;return t&&(o=P(e,0,t),l(new bi(o))),r&&(o+=u,r=b(i),r.children||(r.value=Pt),f(r.type)),o}var a=e.match(_i);return a&&a.index&&(e=P(e,0,a.index)),(1!==i.length||j(e))&&l(new bi(e)),e}],h=[function(e,t){if(A(e,Cr)){var n=E(Ee(e,Cr),Mt);if(n[0])return new vi(Pe(j(n[0])),j(n[1]));a("invalid each: "+t)}},function(e,t){if(A(e,Tr))return e=Ee(e,Tr),e?new gi(e):a("invalid import: "+t)},function(e,t){if(A(e,Ar))return e=Ee(e,Ar),e?new ki(e):a("invalid partial: "+t)},function(e,t){if(A(e,Pr))return e=Ee(e,Pr),e?new mi(Pe(e)):a("invalid if: "+t)},function(e,t){if(A(e,Sr))return e=Ee(e,Sr),e?new hi(Pe(e)):a("invalid else if: "+t)},function(e){if(A(e,Er))return new di},function(e,t){if(A(e,zr))return e=Ee(e,zr),e?new wi(Pe(e)):a("invalid spread: "+t)},function(e,t){if(!A(e,Dr))return e=j(e),e?new yi(Pe(e),!T(t,"}}}")):a("invalid expression: "+t)}],y=function(e){e&&!function(){for(var t=e;t;)v(p,function(e,n){if(n=e(t))return t=P(t,n.length),pt});g=P(g,e.length)}()},m=function(e,t){if(e)if(s(e)===Dt){var n=P(e,1),i=ai[n];ni[i]&&(i=b(r).type),f(i)}else v(h,function(n,r){if(r=n(e,t))return l(r),pt});g=P(g,t.length)},g=e,k=void 0;g;)k=g.match(xi),k?(y(P(g,0,k.index)),k[1].length===k[3].length?m(k[2],k[0]):a("invalid expression: "+k[0])):y(g);return Ei[e]=t}function Te(e,t,n){return Si[e.type](e,t,n)}function De(e){e=D(e);var t=vt,n=N(e,yt,vt);return n&&(e=n[1],t=pt),{keypath:e,lookup:t}}function ze(e,t,n){var u=void 0,a=[],f=function(){u=M(a)},s=function(){return u};f(),s.toString=t[Mr]=s;var l=new Ci(t,u),p=[],h=[],y={},m={},g=void 0,k=void 0,x=void 0,_=function(e){return e!==ht},O=function(e){v(e,function(t,n){A&&!A(t)||(g=e[n+1],C(t))})},$=function(e,t){if(e&&_(t))if(S)L(e,"value")?e.value+=t:e.value=t;else{var n=e.children||(e.children=[]),r=w(n),o="text";if(c(t)||!L(t,o)){if(i(r)&&L(t,o))return void(r[o]+=t);t=pe(t)}n.push(t)}},j=function(e,t,n){var r=e.attrs||(e.attrs={});r[t]=n},P=function(e,t,n,r,i){var o=e.directives||(e.directives={});o[V(t,n)]={name:t,modifier:n,context:l,keypath:u,value:r,expr:i}},E=function(e,t){return L(t,"value")?t.value:L(e,"value")?e.value:e.children?Pt:void 0},S=void 0,C=function(e){var t=e.type,n=e.attrs,i=e.children,o=w(p),c={type:t,source:e,parent:o};if(wt(z[t],dt,[e,c])!==pt)return _(e.keypath)&&(d(a,e.keypath),f()),_(e.forward)&&(l=l.push(e.forward,u)),r(e.context)&&wt(l.set,l,e.context),d(p,c),ii[t]&&d(h,c),n&&(S=vt,O(n),S=dt),i&&O(i),wt(q[t],dt,[e,c]),ii[e.type]&&b(h),b(p),_(e.forward)&&(l=l.pop()),_(e.keypath)&&(b(a),f()),c},A=void 0,T=function(e){return ri[e.type]?pt:(A=dt,vt)},D=function(e,t){return Te(e,function(e){var n=l.get(e);return t||(m[n.keypath]=n.value),n.value},n)},z={},q={};z[Qr]=function(e){return y[e.name]=e.children,pt},z[Xr]=function(e){var t=e.name,i=y[t]||n.importPartial(t);return i?(C(r(i)?{children:i}:i),pt):void ee('Partial "'+t+'" is not found.')},z[Rr]=z[Wr]=function(e){if(!D(e.expr))return!g||ri[g.type]||S||$(w(h),ve()),pt},q[Rr]=q[Wr]=q[Zr]=function(e,t){A=T;var n=t.children;if(n){var r=w(h);v(n,function(e){$(r,e)})}},z[Jr]=function(e){var t=e.expr,n=e.index,o=e.children,u=D(t),a=void 0;if(r(u)?a=v:i(u)&&(a=F),a){var c=[];a(u,function(e,t){var r={forward:e,children:o,keypath:t};n&&(r.context=[n,t]),d(c,r)}),C({forward:u,children:c,keypath:t.keypath})}return pt},z[Yr]=function(t,n){var i=t,a=i.key;if(a){var c=void 0;if(o(a)?c=a:r(a)&&(S=vt,t={type:Br,children:a},c=E(t,C(t)),S=dt),c!=dt){x||(k=e.cache||{},x=e.cache={});var f=k[c],s=l.get(u);if(f&&f.value===s.value)return x[c]=f,m[s.keypath]=s.value,$(h[h.length-2],f.result),pt;n.key=c,x[c]={value:s.value}}}},q[Yr]=function(e,t){var r=t.key,i=void 0;e.props&&(i={},F(e.props,function(e,t){i[t]=D(e)}));var o=le(e.name,{instance:n,props:i,attrs:t.attrs,directives:t.directives},t.children,r,e.component);r&&(x[r].result=o),$(h[h.length-2],o)},q[Hr]=function(e){$(w(h),e.text)},q[ei]=function(e){var t=w(h);$(t,D(e.expr,t&&t.source.binding))},q[Br]=function(e,t){var n=h[h.length-2],r=e.name,i=(e.children,e.binding);j(n,r,E(e,t)),i&&P(n,Fr,r,i)},q[Kr]=function(e,t){P(h[h.length-2],e.name,e.modifier,E(e,t),e.expr)},q[ti]=function(e,t){var n=e.expr,r=o(n.keypath),u=D(n,r);if(i(u)){var a=w(h);F(u,function(e,t){j(a,t,e),r&&P(a,Fr,t,V(n.keypath,t))})}else ee('Spread "'+n.source+'" must be an object.')};var N=C({type:Yr,children:r(e)?e:[e]});return{nodes:N.children,deps:m}}function qe(e){var t=e.deps,n=e.emitter,r={},i=function(e){r[e]=vt};F(n.listeners,function(e,t){i(t)}),F(t,function(e){v(e,i)}),e.watchKeypaths=U(r,vt)}function Me(e){return function(t,n,r){var u=t;o(t)&&(u={},u[t]={sync:r,watcher:n});var a=this,c=a.emitter,f=a.context;F(u,function(t,n){var r=t,o=void 0;i(t)&&(r=t.watcher,o=t.sync),c[e](n,r),qe(a),Ve(n)||oe(function(){t=a.get(n),o&&wt(r,f,[t,ht,n])})})}}function Ne(e,t){var n=zi[t];n||(n=t.replace(/\./g,"\\.").replace(/\*\*/g,"([.\\w]+?)").replace(/\*/g,"(\\w+)"),n=zi[t]=new RegExp("^"+n+"$"));var r=e.match(n);if(r)return y(r).slice(1)}function Ve(e){return C(e,"*")}function Ge(e,t){var n=void 0,r=void 0,i=void 0;return v(U(e,vt),function(o){if(o=N(t,o,vt))return n=o[0],r=e[n],i=o[1],pt}),{key:n,value:r,rest:i}}function Ue(e,t){var n=mt.SVGElement;return"svg"===e||t&&n&&t instanceof n?gt.createElementNS("http://www.w3.org/2000/svg",e):gt.createElement(e)}function Fe(e){return gt.createTextNode(e||Pt)}function Le(e){return gt.createComment(e||Pt)}function Ie(e){return e}function Ye(e){return 1===e.nodeType}function Be(e,t,n){W(e,t,n,pt)}function He(e,t){Be(e,t,dt)}function Ke(e,t,n){Hi[t]&&(n=n===Pt||t===n?vt:pt),Ki[t]?Be(e,Ki[t],n):Hi[t]?Be(e,t,n):e.setAttribute(t,n)}function Re(e,t){Ki[t]?He(e,Ki[t]):Hi[t]?He(e,t):e.removeAttribute(t)}function We(e,t,n){n?e.insertBefore(t,n):Ze(e,t)}function Ze(e,t){e.appendChild(t)}function Je(e,t,n){e.replaceChild(t,n)}function Qe(e,t){e.removeChild(t)}function Xe(e){return e.parentNode}function et(e){return e.nextSibling}function tt(e){var t=e.tagName;return $(t)?Pt:t.toLowerCase()}function nt(e){return e.childNodes}function rt(e,t){return t==dt?e.nodeValue:e.nodeValue=t}function it(e,t){return t==dt?e.innerHTML:e.innerHTML=t}function ot(e,t){return(t||gt).querySelector(e)}function ut(e,t,n){e.addEventListener(t,n,pt)}function at(e,t,n){e.removeEventListener(t,n,pt)}function ct(e,t){var n=t.el,r=t.node,i=t.instance,o=t.directives,u=t.attrs,a=Qi,c=to.tag(n),f=n.type,s=vo[f]||vo[c];s||(s=co,("oninput"in n||"textarea"===c||"text"===f||"password"===f)&&(a=Ji));var l={el:n,keypath:e,instance:i},v=function(){s.set(l)};i.watch(e,v,s.attr&&!L(u,s.attr));var p=ao({el:n,node:r,instance:i,directives:o,type:a,listener:function(){s.sync(l)}});return function(){i.unwatch(e,v),p&&p()}}function ft(e,t){var n=t.el,i=t.node,o=t.instance,u=t.component,a=function(e){var t=i.modifier;if(u){var o=function(n){n.set(t,e)};r(u)?d(u,o):o(u)}else to.setAttr(n,t,e!==ht?e:Pt)};return o.watch(e,a),function(){o.unwatch(e,a)}}function st(e,t){var r=t[0],i=t[1],o=void 0;return k(bo,e)&&n(i)&&(o=i,i=ht),{callback:o,args:i===ht?[r]:[r,i]}}function lt(e){var t=e.args,n=e.get,r=e.set;t=y(t);var u=t[0];t[1];if(i(u))wt(r,dt,u);else if(o(u)){var a=t,c=a.length;if(2===c)wt(r,dt,t);else if(1===c)return wt(n,dt,u)}}var vt=!0,pt=!1,dt=null,ht=void 0,yt="this",mt="undefined"!=typeof window?window:dt,gt="undefined"!=typeof document?document:dt,kt=Object.freeze({is:t,func:n,array:r,object:i,string:o,number:u,boolean:a,primitive:c,numeric:f}),wt=function(e,t,i){if(n(e))return r(i)?e.apply(t,i):e.call(t,i)},bt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f(e)?+e:t},xt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ot=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},jt=function(){function e(t){xt(this,e),t.type?(this.type=t.type,this.originalEvent=t):this.type=t}return _t(e,[{key:"prevent",value:function(){if(!this.isPrevented){var e=this.originalEvent;e&&(n(e.prevent)?e.prevent():n(e.preventDefault)&&e.preventDefault()),this.isPrevented=vt}}},{key:"stop",value:function(){if(!this.isStoped){var e=this.originalEvent;e&&(n(e.stop)?e.stop():n(e.stopPropagation)&&e.stopPropagation()),this.isStoped=vt}}}]),e}();jt.is=function(e){return e instanceof jt};var Pt="",Et=".",St=l(Et),Ct="#",At=(l(Ct),"-"),Tt=(l(At),"="),Dt=(l(Tt),"/"),zt=(l(Dt),","),qt=l(zt),Mt=":",Nt=l(Mt),Vt=";",Gt=(l(Vt),"'"),Ut=l(Gt),Ft='"',Lt=l(Ft),It="(",Yt=l(It),Bt=")",Ht=l(Bt),Kt="[",Rt=l(Kt),Wt="]",Zt=l(Wt),Jt="{",Qt=(l(Jt),"}"),Xt=(l(Qt),"<"),en=(l(Xt),">"),tn=(l(en),"?"),nn=l(tn),rn="\t",on=l(rn),un="\n",an=(l(un)," "),cn=l(an),fn=Object.freeze({each:v,merge:p,push:d,unshift:h,toArray:y,toObject:m,indexOf:g,has:k,last:w,pop:b,remove:x,falsy:_}),sn=Object.freeze({camelCase:O,falsy:$,trim:j,slice:P,split:E,indexOf:S,has:C,startsWith:A,endsWith:T}),ln=".",vn=".",pn={},dn=Object.freeze({keys:G,sort:U,each:F,has:L,exists:I,clear:Y,extend:B,copy:H,get:R,set:W}),hn=function(){function e(){xt(this,e),this.listeners={}}return _t(e,[{key:"on",value:function(e,t){var r=this.listeners,u=function(e,t){n(e)&&d(r[t]||(r[t]=[]),e)};i(e)?F(e,u):o(e)&&u(t,e)}},{key:"once",value:function(e,t){var r=this,u=function(e,t){n(e)&&(e.$once=function(){r.off(t,e)})};i(e)?F(e,u):o(e)&&u(t,e),r.on(e,t)}},{key:"off",value:function(e,t){if(e==dt)this.listeners={};else{var n=this.listeners,r=n[e];r&&(t==dt?r.length=0:x(r,t),r.length||delete n[e])}}},{key:"fire",value:function(e,t,i){var o=vt,u=this.listeners[e];if(u){var a=t;r(t)&&(a=t[0]);var c=jt.is(a);v(u,function(e){var r=wt(e,i,t),u=e.$once;if(n(u)&&(u(),delete e.$once),c&&(r===pt?(a.prevent(),a.stop()):a.isStoped&&(r=pt)),r===pt)return o=pt})}return o}},{key:"has",value:function(e,t){var n=this.listeners[e];return t==dt?!_(n):n?k(n,t):void 0}}]),e}(),yn="undefined"!=typeof console,mn=/yox/.test(e.toString()),gn=Object.freeze({log:J,warn:Q,error:X,fatal:ee}),kn=void 0;kn="function"==typeof MutationObserver?te:"function"==typeof setImmediate?ne:re;var wn=function(e){if(gt){var t=gt.activeElement;if(t&&"autofocus"in t)return void re(e)}kn(e)},bn=[],xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt;try{return e.toString()}catch(e){return t}},_n="!",On="init",$n="create",jn="insert",Pn="remove",En="destroy",Sn="pre",Cn="post",An="prepatch",Tn="update",Dn="postpatch",zn=[$n,Tn,Pn,En,Sn,Cn],qn=ce(Pt,ht,{},[]),Mn={create:he,update:he},Nn={create:ye,update:ye},Vn={create:ke,update:ke,destroy:we},Gn={create:be,update:xe,destroy:_e},Un=1,Fn=2,Ln=3,In=4,Yn=5,Bn=6,Hn=7,Kn=8,Rn="+",Wn="-",Zn="*",Jn="/",Qn="%",Xn="~",er="&&",tr="||",nr="!",rr="!!",ir="===",or="!==",ur="==",ar="!=",cr="<",fr="<=",sr=">",lr=">=",vr={};vr[Rn]=vr[Wn]=vr[nr]=vr[Xn]=vr[rr]=vt;var pr=U(vr,vt),dr={};dr[tr]=1,dr[er]=2,dr[ur]=dr[ar]=dr[ir]=dr[or]=3,dr[cr]=dr[fr]=dr[sr]=dr[lr]=4,dr[Rn]=dr[Wn]=5,dr[Zn]=dr[Jn]=dr[Qn]=6;var hr=U(dr,vt),yr=function e(t,n){xt(this,e),this.type=t,this.source=j(n)},mr=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Hn,e));return r.elements=n,r}return Ot(t,e),t}(yr),gr=function(e){function t(e,n,r,i){xt(this,t);var o=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Yn,e));return o.left=n,o.operator=r,o.right=i,o}return Ot(t,e),t}(yr);gr[tr]=function(e,t){return e||t},gr[er]=function(e,t){return e&&t},gr[ir]=function(e,t){return e===t},gr[or]=function(e,t){return e!==t},gr[ur]=function(e,t){return e==t},gr[ar]=function(e,t){return e!=t},gr[cr]=function(e,t){return e<t},gr[fr]=function(e,t){return e<=t},gr[sr]=function(e,t){return e>t},gr[lr]=function(e,t){return e>=t},gr[Rn]=function(e,t){return e+t},gr[Wn]=function(e,t){return e-t},gr[Zn]=function(e,t){return e*t},gr[Jn]=function(e,t){return e/t},gr[Qn]=function(e,t){return e%t};var kr=function(e){function t(e,n,r){xt(this,t);var i=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Kn,e));return i.callee=n,i.args=r,i}return Ot(t,e),t}(yr),wr=function(e){function t(e,n,r,i){xt(this,t);var o=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Bn,e));return o.test=n,o.consequent=r,o.alternate=i,o}return Ot(t,e),t}(yr),br=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Fn,e));return r.name=n,r.keypath=n,r}return Ot(t,e),t}(yr),xr=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Un,e));return r.value=n,r}return Ot(t,e),t}(yr),_r=function(e){function t(e,n,r){xt(this,t);var i=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ln,e)),o=[];n.type===Ln?d(o,n.props):d(o,n),d(o,r),i.props=o;var u=vt,a=t.stringify(i,function(){u=pt});return u&&(i.keypath=a),i}return Ot(t,e),t}(yr);_r.stringify=function(e,t){var n=e.props.map(function(e,n){var r=e.type;return r===Un?e.value:n>0?t(e):r===Fn?e.name:void 0});return M(n)};var Or=function(e){function t(e,n,r){xt(this,t);var i=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,In,e));return i.operator=n,i.arg=r,i}return Ot(t,e),t}(yr);Or[Rn]=function(e){return+e},Or[Wn]=function(e){return-e},Or[nr]=function(e){return!e},Or[Xn]=function(e){return~e},Or[rr]=function(e){return!!e};var $r={};$r.true=vt,$r.false=pt,$r.null=dt,$r.undefined=ht;var jr={},Pr="#if",Er="else",Sr="else if",Cr="#each",Ar="#partial",Tr=">",Dr="! ",zr="...",qr="$event",Mr="$keypath",Nr="o-",Vr="on-",Gr="ref",Ur="lazy",Fr="model",Lr="event",Ir="key",Yr=1,Br=2,Hr=3,Kr=4,Rr=5,Wr=6,Zr=7,Jr=8,Qr=9,Xr=10,ei=11,ti=12,ni={},ri={},ii={},oi={},ui={},ai={},ci={};ni[Rr]=ni[Wr]=ri[Wr]=ri[Zr]=ii[Yr]=ii[Br]=ii[Kr]=oi[Hr]=oi[Xr]=oi[ti]=oi[ei]=ui[Gr]=ui[Ur]=ui[Fr]=vt,ai.if=Rr,ai.each=Jr,ai.partial=Qr,F(ai,function(e,t){ci[e]=t});var fi=function(){function e(t){xt(this,e),this.type=t}return _t(e,[{key:"addChild",value:function(e){d(this.children||(this.children=[]),e)}}]),e}(),si=function(e){function t(e){xt(this,t);var n=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Br));return n.name=e,n}return Ot(t,e),t}(fi),li=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Kr));return r.name=e,n&&(r.modifier=n),r}return Ot(t,e),t}(fi),vi=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Jr));return r.expr=e,n&&(r.index=n),r}return Ot(t,e),t}(fi),pi=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Yr));return r.name=e,n&&(r.component=n),r}return Ot(t,e),_t(t,[{key:"addAttr",value:function(e){d(this.attrs||(this.attrs=[]),e)}}]),t}(fi),di=function(e){function t(){return xt(this,t),$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Zr))}return Ot(t,e),t}(fi),hi=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Wr));return r.expr=e,r}return Ot(t,e),t}(fi),yi=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ei));return r.expr=e,r.safe=n,r}return Ot(t,e),t}(fi),mi=function(e){function t(e,n){xt(this,t);var r=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Rr));return r.expr=e,r}return Ot(t,e),t}(fi),gi=function(e){function t(e){xt(this,t);var n=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Xr));return n.name=e,n}return Ot(t,e),t}(fi),ki=function(e){function t(e){xt(this,t);var n=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Qr));return n.name=e,n}return Ot(t,e),t}(fi),wi=function(e){function t(e){xt(this,t);var n=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ti));return n.expr=e,n}return Ot(t,e),t}(fi),bi=function(e){function t(e){xt(this,t);var n=$t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Hr));return n.text=e,n}return Ot(t,e),t}(fi),xi=/(\{?\{\{)\s*([^\}]+?)\s*(\}\}\}?)/,_i=/<(\/)?([a-z][-a-z0-9]*)/i,Oi=/^\s*(\/)?>/,$i=/^\s*([-:\w]+)(?:=(['"]))?/,ji=/[-A-Z]/,Pi=/source|param|input|img|br|hr/,Ei={},Si={};Si[Un]=function(e){return e.value},Si[Fn]=function(e,t,n){return t(e.name)},Si[Ln]=function(e,t,n){var r=e.keypath;return r||(r=_r.stringify(e,function(e){return Te(e,t,n)})),t(r)},Si[In]=function(e,t,n){return Or[e.operator](Te(e.arg,t,n))},Si[Yn]=function(e,t,n){var r=e.left,i=e.right;return gr[e.operator](Te(r,t,n),Te(i,t,n))},Si[Bn]=function(e,t,n){var r=e.test,i=e.consequent,o=e.alternate;return Te(r,t,n)?Te(i,t,n):Te(o,t,n)},Si[Hn]=function(e,t,n){return e.elements.map(function(e){return Te(e,t,n)})},Si[Kn]=function(e,t,n){return wt(Te(e.callee,t,n),n,e.args.map(function(e){return Te(e,t,n)}))};var Ci=function(){function e(t,n,r){xt(this,e),this.data={},this.data[yt]=t,this.keypath=n,this.parent=r,this.cache={}}return _t(e,[{key:"push",value:function(t,n){return new e(t,n,this)}},{key:"pop",value:function(){return this.parent}},{key:"set",value:function(e,t){var n=this.data,r=this.cache,i=De(e),o=i.keypath;L(r,o)&&delete r[o],n[o||yt]=t}},{key:"get",value:function(e){var t=this,n=t,r=n.data,i=n.cache,o=De(e),u=o.keypath,a=o.lookup,c=function(e,t){return V(e.keypath,t)},f=function(e,t){return I(e,t)?{value:e[t]}:R(e[yt],t)};if(!L(i,u))if(u){var s=void 0;if(a)for(;t&&!(s=f(t.data,u));)t=t.parent;else s=f(r,u);s&&(i[u]={keypath:c(t,u),value:s.value})}else i[u]={keypath:t.keypath,value:r[yt]};return(i=i[u])?i:(Q('Failed to lookup "'+e+'".'),{keypath:c(this,u)})}}]),e}(),Ai=function(){function e(t){xt(this,e);var o=t.data,u=t.context,c=t.computed,f=t.watchers,s=this;if(s.data=o,s.cache={},s.emitter=new hn,s.context=u||s,s.deps={},s.reversedDeps={},i(c)){s.computedGetters={},s.computedSetters={},s.computedStack=[];var l=s.cache,v=s.computedStack;F(c,function(e,t){var o=void 0,u=void 0,c=void 0,f=vt;if(n(e)?o=e:i(e)&&(e.deps&&(c=e.deps),a(e.cache)&&(f=e.cache),n(e.get)&&(o=e.get),n(e.set)&&(u=e.set)),o){f&&s.watch(t+Ti,function(){p[Di]=vt});var p=function e(){if(f)if(e[Di])delete e[Di];else if(L(l,t))return l[t];c||v.push([]);var n=wt(o,s.context);l[t]=n;var i=c||b(v);return r(i)&&s.setDeps(t,i),n};p.toString=s.computedGetters[t]=p}u&&(s.computedSetters[t]=u)})}i(f)&&s.watch(f)}return _t(e,[{key:"get",value:function(e,t){var n=this,r=n.data,i=n.cache,o=n.computedStack,u=n.computedGetters;if(!e)return r;if(e=D(e),o){var a=w(o);a&&d(a,e)}var f=void 0;if(u){var s=Ge(u,e),l=s.value,v=s.rest;l&&(l=l(),f=v&&!c(l)?R(l,v):{value:l})}return f||(f=R(r,e)),f?i[e]=f.value:t}},{key:"set",value:function(e){var t=this,n=t.data,r=t.cache,i=t.emitter,o=t.context,u=t.reversedDeps,a=t.computedGetters,f=t.computedSetters,s=t.watchKeypaths,l=t.reversedKeypaths,p=[],h={},y=function(e,t,n,r,i){var o=e+At+t;h[o]||(h[o]=vt,d(p,{keypath:e,realpath:t,oldValue:n,match:r,force:i}))},m={},g={},k=function(e){return L(m,e)||(m[e]=r[e]),m[e]},w=function(e){return L(g,e)||(g[e]=t.get(e)),g[e]},b={},x=function(e){l&&!b[e]&&(b[e]=vt,v(l,function(t){var n=void 0,r=void 0;t===e?n=u[t]:Ve(t)&&(r=Ne(e,t),r&&(n=u[t])),n&&v(n,function(e){y(e,e,k(e),ht,vt)})}))};F(e,function(e,t){if(t=D(t),y(t,t,k(t)),f){var r=f[t];if(r)return void r.call(o,e);var i=Ge(a,t),u=i.value,s=i.rest;if(u&&s)return u=u(),void(c(u)||W(u,s,e))}W(n,t,e)});for(var _=function(e){var t=e.keypath,n=e.realpath,r=e.oldValue,u=e.match,a=e.force,c=a?r:w(n);if(a||c!==r){var f=[c,r,t];u&&d(f,u),i.fire(t+(a?Ti:Pt),f,o),c=w(n),c!==r&&(a&&(f[0]=c,i.fire(t,f,o)),v(s,function(e){if(e!==n)if(Ve(e)){if(!C(n,Ti)){var t=Ne(n,e);t&&y(e,n,k(n),t)}}else N(e,n)&&y(e,e,k(e))}),x(n))}},O=0;O<p.length;O++)_(p[O])}},{key:"setDeps",value:function(e,t){var n=this,r=n.deps,i=n.reversedDeps;t!==r[e]&&(r[e]=t,qe(n),i={},F(r,function(e,t){v(e,function(e){d(i[e]||(i[e]=[]),t)});
}),n.reversedDeps=i,n.reversedKeypaths=U(i,vt))}},{key:"setCache",value:function(e,t){this.cache[e]=t}},{key:"destroy",value:function(){this.emitter.off(),Y(this)}}]),e}();B(Ai.prototype,{watch:Me("on"),watchOnce:Me("once"),unwatch:function(e,t){this.emitter.off(e,t),qe(this)}});var Ti="._force_",Di="_dirty_",zi={},qi=/<[^>]+>/,Mi=/^[#.][-\w+]+$/,Ni="beforeCreate",Vi="afterCreate",Gi="beforeMount",Ui="afterMount",Fi="beforeUpdate",Li="afterUpdate",Ii="beforeDestroy",Yi="afterDestroy",Bi="allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noshade,noresize,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,typemustmatch,visible",Hi=m(E(Bi,zt),pt,vt);Bi=dt;var Ki={};Ki.for="htmlFor",Ki.value="value",Ki.class="className",Ki.style="style.cssText",Ki.nohref="noHref",Ki.noshade="noShade",Ki.noresize="noResize",Ki.readonly="readOnly",Ki.defaultchecked="defaultChecked",Ki.defaultmuted="defaultMuted",Ki.defaultselected="defaultSelected";var Ri=Object.freeze({createElement:Ue,createText:Fe,createComment:Le,createEvent:Ie,isElement:Ye,setProp:Be,removeProp:He,setAttr:Ke,removeAttr:Re,before:We,append:Ze,replace:Je,remove:Qe,parent:Xe,next:et,tag:tt,children:nt,text:rt,html:it,find:ot,on:ut,off:at}),Wi="tap",Zi="click",Ji="input",Qi="change",Xi="compositionstart",eo="compositionend",to=H(Ri),no=to.on,ro=to.off;to.specialEvents={input:{on:function(e,t){var n=pt;to.on(e,Xi,t[Xi]=function(){n=vt}),to.on(e,eo,t[eo]=function(e){n=pt,t(e,Ji)}),no(e,Ji,t[Ji]=function(e){n||t(e)})},off:function(e,t){to.off(e,Xi,t[Xi]),to.off(e,eo,t[eo]),ro(e,Ji,t[Ji]),t[Xi]=t[eo]=t[Ji]=dt}}},to.on=function(e,t,n,r){var i=e.$emitter||(e.$emitter=new hn);if(!i.has(t)){var o=function(t,n){jt.is(t)||(t=new jt(to.createEvent(t,e))),n&&(t.type=n),i.fire(t.type,t,r)};i[t]=o;var u=to.specialEvents[t];u?u.on(e,o):no(e,t,o)}i.on(t,n)},to.off=function(e,t,n){var r=e.$emitter,i=G(r.listeners);r.off(t,n),v(i,function(t){if(r[t]&&!r.has(t)){var n=r[t],i=to.specialEvents[t];i?i.off(e,n):ro(e,t,n),delete r[t]}})};var io=function(e){var t=e.el,n=e.node,o=e.instance,u=e.component,a=n.value;if(!$(a)){var c=o.$refs;i(c)?L(c,a)&&X('Passing a ref "'+a+'" is existed.'):c=o.$refs={};var f=function(e){c[a]=e};return u?r(u)?d(u,f):f(u):f(t),function(){L(c,a)?delete c[a]:r(u)&&x(u,f)}}},oo=function(e,t,n){var r=void 0;return function(){if(!r){var i=y(arguments);n&&wt(e,dt,i),r=setTimeout(function(){r=dt,n||wt(e,dt,i)},t)}}},uo=[Zi,Wi],ao=function(e){var t=e.el,n=e.node,i=e.instance,o=e.component,u=e.directives,a=e.type,c=e.listener;if(a||(a=n.modifier),c||(c=i.compileDirective(n)),a&&c){var s=u.lazy;if(s){var l=s.value;f(l)&&l>=0?c=oo(c,l,k(uo,a)):a===Ji&&(a=Qi)}if(o){var v=function(e){e.on(a,c)};return r(o)?d(o,v):v(o),function(){o.off(a,c),r(o)&&x(o,v)}}return to.on(t,a,c),function(){to.off(t,a,c)}}},co={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=xn(r.get(n));i!==t.value&&(t.value=i)},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;r.set(n,t.value)},attr:"value"},fo={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=xn(r.get(n)),o=t.options,u=t.selectedIndex;i!==o[u].value&&v(o,function(e,n){if(e.value===i)return t.selectedIndex=n,pt})},sync:function(e){var t=e.el,n=e.keypath,r=e.instance,i=t.options[t.selectedIndex].value;r.set(n,i)}},so={set:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked=t.value===xn(r.get(n))},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked&&r.set(n,t.value)},attr:"checked"},lo={set:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);t.checked=r(o)?k(o,t.value,pt):a(o)?o:!!o},sync:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);r(o)?(t.checked?d(o,t.value):x(o,t.value,pt),i.set(n,H(o))):i.set(n,t.checked)},attr:"checked"},vo={radio:so,checkbox:lo,select:fo},po=function(e){var t=e.node,n=t.modifier,r=t.value,i=t.context;if(r){var o=i.get(r),u=o.keypath;return n?ft(u,e):ct(u,e)}},ho="_template_",yo=de([Gn,Mn,Nn,Vn],to),mo=function(){function e(t){xt(this,e);var r=this;r.$options=t,wt(t[Ni],r,t);var u=t.el,a=t.data,c=t.props,f=t.parent,s=t.replace,l=t.computed,v=t.template,p=t.components,d=t.directives,h=t.partials,y=t.filters,m=t.events,g=t.watchers,k=t.methods,w=t.propTypes,b=t.extensions;B(r,b);var x=c;i(x)?(i(w)&&(x=e.validate(x,w)),a&&!n(a)&&Q('"data" option should be a function.')):x={},l=l?H(l):{};var _=0;l[ho]={deps:vt,get:function(){return _++}};var O=new Ai({context:r,data:x,computed:l});r.$observer=O;var $=n(a)?wt(a,r):a;if(i($)&&F($,function(e,t){L(x,t)?Q('"'+t+'" is already defined as a prop. Use prop default value instead.'):x[t]=e}),g&&O.watch(g),r.$emitter=new hn,m&&r.on(m),wt(t[Vi],r),o(v)?(Mi.test(v)&&(v=to.html(to.find(v))),qi.test(v)||X('"template" option must have a root element.')):v=dt,o(u)&&Mi.test(u)&&(u=to.find(u)),u&&(to.isElement(u)?s||(to.html(u,"<div></div>"),u=to.children(u)[0]):X('"el" option must be a html element.')),f&&(r.$parent=f),k&&F(k,function(e,t){L(go,t)&&X('"'+t+'" method is conflicted with built-in methods.'),r[t]=e}),p&&r.component(p),d&&r.directive(d),h&&r.partial(h),y&&r.filter(y),v){var j=ko.filter;r.$context=B({},j&&j.data,y,O.computedGetters),r.$template=e.compile(v)[0],r.updateView(u||to.createElement("div"),r.render())}}return _t(e,[{key:"get",value:function(e,t){return this.$observer.get(e,t)}},{key:"set",value:function(e,t){var n=void 0,r=void 0;if(o(e))n={},n[e]=t;else{if(!i(e))return;n=e,r=t===vt}this.updateModel(n,r)}},{key:"on",value:function(e,t){return this.$emitter.on(e,t),this}},{key:"once",value:function(e,t){return this.$emitter.once(e,t),this}},{key:"off",value:function(e,t){return this.$emitter.off(e,t),this}},{key:"fire",value:function(e,t){var n=e;o(e)&&(n=new jt(e));var r=this;n.target||(n.target=r);var u=[n];i(t)&&d(u,t);var a=r.$parent,c=r.$emitter,f=c.fire(n.type,u,r);return f&&a&&(f=a.fire(n,t)),f}},{key:"watch",value:function(e,t,n){return this.$observer.watch(e,t,n),this}},{key:"watchOnce",value:function(e,t,n){return this.$observer.watchOnce(e,t,n),this}},{key:"unwatch",value:function(e,t){return this.$observer.unwatch(e,t),this}},{key:"updateModel",value:function(e){var t=this,n=arguments,r=t.$observer,i=t.$node,o=t.get(ho);r.set(e),o!==t.get(ho)&&1!==n.length&&(2===n.length&&n[1]?t.updateView(i,t.render()):t.forceUpdate())}},{key:"forceUpdate",value:function(){var e=this;e.$pending||(e.$pending=vt,ue(function(){e.$pending&&(delete e.$pending,e.updateView(e.$node,e.render()))}))}},{key:"render",value:function(){var e=this,t=e.$template,n=e.$observer,r=e.$context;B(r,n.data);var i=ze(t,r,e),o=i.nodes,u=i.deps,a=G(u);return F(a,function(e){n.setCache(e,u[e])}),n.setDeps(ho,a),o[0]}},{key:"updateView",value:function(e,t){var n=this,r=n.$node,i=n.$options;r?(wt(i[Fi],n),n.$node=yo(e,t),wt(i[Li],n)):(wt(i[Gi],n),r=yo(e,t),n.$el=r.el,n.$node=r,wt(i[Ui],n))}},{key:"importPartial",value:function(t){return e.compile(this.partial(t))}},{key:"create",value:function(t,n){t=B({},t,n),t.parent=this;var r=new e(t);return d(this.$children||(this.$children=[]),r),r}},{key:"compileDirective",value:function(e){var t=this,n=e.value,r=e.expr,i=e.keypath,o=e.context;if(r&&r.type===Kn){var u=function(e){return o.get(e).value};return function(e){var n=jt.is(e),a=r.callee,c=r.args;c.length?(o.set(Mr,i),o.set(qr,e),c=c.map(function(e){return Te(e,u,t)})):n&&(c=[e]);var f=t[a.source]||u(a.source);wt(f,t,c)===pt&&n&&(e.prevent(),e.stop())}}if(n)return function(e,r){e.type!==n&&(e=new jt(e),e.type=n),t.fire(e,r)}}},{key:"destroy",value:function(){var e=this,t=e.$options,n=e.$node,r=e.$parent,i=e.$emitter,o=e.$observer;wt(t[Ii],e),r&&r.$children&&x(r.$children,e),n&&arguments[0]!==vt&&vdom.patch(n,{text:Pt}),i.off(),o.destroy(),Y(e),wt(t[Yi],e)}},{key:"nextTick",value:function(e){oe(e)}},{key:"toggle",value:function(e){var t=!this.get(e);return this.set(e,t),t}},{key:"increase",value:function(e,t,n){var r=bt(this.get(e),0)+(f(t)?t:1);return(!f(n)||r<=n)&&this.set(e,r),r}},{key:"decrease",value:function(e,t,n){var r=bt(this.get(e),0)-(f(t)?t:1);return(!f(n)||r>=n)&&this.set(e,r),r}},{key:"copy",value:function(e,t){return H(e,t)}}]),e}();mo.version="0.41.3",mo.is=kt,mo.dom=to,mo.array=fn,mo.object=dn,mo.string=sn,mo.logger=gn,mo.Event=jt,mo.Emitter=hn;var go=mo.prototype,ko={},wo=function(){function e(){xt(this,e),this.data={}}return _t(e,[{key:"getAsync",value:function(e,t){var r=this.data,i=r[e];if(n(i)){var o=i.$pending;o?d(o,t):(o=i.$pending=[t],i(function(t){delete i.$pending,r[e]=t,v(o,function(e){e(t)})}))}else t(i)}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){var n=this.data;i(e)?F(e,function(e,t){n[t]=e}):o(e)&&(n[e]=t)}}]),e}(),bo=["component"];return v(p(bo,["directive","partial","filter"]),function(e){go[e]=function(){var t="$"+e+"s",n=this[t]||(this[t]=new wo),r=st(e,arguments),i=r.args,o=r.callback;return lt({args:i,get:function(t){return o?void n.getAsync(t,function(n){n?o(n):mo[e](t,o)}):n.get(t)||mo[e](t)},set:function(e,t){n.set(e,t)}})},mo[e]=function(){var t=ko[e]||(ko[e]=new wo),n=st(e,arguments),r=n.args,i=n.callback;return lt({args:r,get:function(e){return i?void t.getAsync(e,i):t.get(e)},set:function(e,n){t.set(e,n)}})}}),mo.nextTick=oe,mo.compile=function(e){return o(e)?Ae(e):e},mo.validate=function(e,r){var i={};return F(r,function(r,o){var u=r.type,a=r.value,c=r.required;if(c=c===vt||n(c)&&c(e),L(e,o)){if(u){var f=e[o],s=void 0;$(u)?_(u)?n(u)&&(s=u(f,e)):v(u,function(e){if(t(f,e))return s=vt,pt}):s=t(f,u),s===vt?i[o]=f:Q('"'+o+"\" prop's type is not matched.")}}else c?Q('"'+o+'" prop is not found.'):L(r,"value")&&(i[o]=n(a)?a(e):a)}),i},mo.use=function(e){e.install(mo)},mo.directive({ref:io,event:ao,model:po}),mo});
