!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Yox=t()}(this,function(){"use strict";function e(){}function t(e,t){return"numeric"===t?f(e):Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function n(e){return t(e,"function")}function r(e){return t(e,"array")}function i(e){return e&&t(e,"object")?ht:yt}function o(e){return t(e,"string")}function a(e){return t(e,"number")}function u(e){return t(e,"boolean")}function c(e){return o(e)||a(e)||u(e)||e==mt}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charAt(t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}function v(e,t,n){var r=e.length;if(n)for(var i=r-1;i>=0&&t(e[i],i)!==yt;i--);else for(var o=0;o<r&&t(e[o],o)!==yt;o++);}function d(){var e=h(arguments),t=[];return e.unshift(t),xt(vn,mt,e),t}function p(e){return function(t){for(var n=arguments,i=1,o=n.length;i<o;i++)r(n[i])?v(n[i],function(n){t[e](n)}):t[e](n[i])}}function h(e){return r(e)?e:xt(Array.prototype.slice,e)}function y(e,t,n){var r={},i=3===arguments.length;return v(e,function(e,a){a=o(n)?e[n]:i?n:e,r[t?e[t]:e]=a}),r}function m(e,t,n){if(n!==yt)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]==t)return r;return-1}function g(e,t,n){return m(e,t,n)>=0}function k(e){return e[e.length-1]}function b(e){return e.pop()}function w(e,t,n){var r=m(e,t,n);return r>=0?(e.splice(r,1),ht):yt}function _(e){return!r(e)||0===e.length}function x(e){return T(e,zt)?e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}):e}function $(e){return s(e,0).toUpperCase()+P(e,1)}function O(e){return!o(e)||e===Ct}function j(e,t,n){var r=[];if(o(e)){var i=void 0,a=void 0,u=void 0,c=void 0;v(S(e,t),function(e){i=S(e,n),a=i[0],u=i[1],a&&(c={key:E(a)},o(u)&&(c.value=E(u)),vn(r,c))})}return r}function E(e){return O(e)?Ct:e.trim()}function P(e,t,n){return a(n)?e.slice(t,n):e.slice(t)}function S(e,t){return O(e)?[]:e.split(new RegExp("\\s*"+t.replace(/[.*?]/g,"\\$&")+"\\s*"))}function C(e,t){return e.indexOf(t)}function T(e,t){return C(e,t)>=0}function A(e,t){return 0===C(e,t)}function D(e,t){var n=e.length-t.length;return n>=0&&e.lastIndexOf(t)===n}function z(e){return!O(e)&&C(e,"[")>0&&C(e,"]")>0?e.replace(/\[\s*?([^\]]+)\s*?\]/g,function(e,t){var n=l(t);return n!==Lt&&n!==Yt||(t=P(t,1,-1)),""+yn+t}):e}function N(e){return e!==Ct&&e!==kt&&e!==mn}function q(e){return S(z(e),yn).filter(N)}function M(e){return e.filter(N).join(yn)}function I(e,t){return e&&t?e+yn+t:e?e:t||Ct}function G(e){return Object.keys(e)}function R(e,t){var n=void 0;return n=t?function(e,t){return t.length-e.length}:function(e,t){return e.length-t.length},G(e).sort(n)}function V(e,t){v(G(e),function(n){return t(e[n],n)})}function F(e,t){try{return e.hasOwnProperty(t)}catch(n){return t in e}}function L(e){V(e,function(t,n){delete e[n]})}function U(){for(var e=arguments,t=e[0],n=1,r=e.length;n<r;n++)i(e[n])&&V(e[n],function(e,n){t[n]=e});return t}function Y(e,t){var n=e;return r(e)?(n=[],v(e,function(e,r){n[r]=t?Y(e):e})):i(e)&&(n={},V(e,function(e,r){n[r]=t?Y(e):e})),n}function B(e){return n(e)&&e.toString!==Function.prototype.toString&&(e=e.toString()),e}function H(e,t){if(o(t)&&!F(e,t)&&C(t,Tt)>0)for(var n=q(t),r=0,i=n.length;r<i;r++)if(r<i-1){if(e=B(e[n[r]]),e==mt)return}else t=n[r];if(F(e,t))return{value:B(e[t])}}function K(e,t,n,r){if(o(t)&&!F(e,t)&&C(t,Tt)>0){var i=e,a=q(t),u=b(a);v(a,function(t,n){if(e[t])e=e[t];else{if(r===yt)return e=yt;e=e[t]={}}}),e&&e!==i&&(e[u]=n)}else e[t]=n}function W(){if(bt){var e=bt.DEBUG;if(u(e))return BEBUG}return wn}function Z(e){bn&&W()&&console.log("[Yox log]: "+e)}function J(e){bn&&W()&&console.warn("[Yox warn]: "+e)}function Q(e){bn&&console.error("[Yox error]: "+e)}function X(e){throw new Error("[Yox fatal]: "+e)}function ee(e){var t=new MutationObserver(e),n=wt.createTextNode(Ct);t.observe(n,{characterData:ht}),n.data=sn}function te(e){setImmediate(e)}function ne(e){setTimeout(e)}function re(e,t){On.length||$n(ae),pn[e](On,t)}function ie(e){re("push",e)}function oe(e){re("unshift",e)}function ae(){var e=On;On=[],v(e,function(e){e.i?(e.i--,vn(On,e)):e()}),On.length&&$n(ae)}function ue(e){return e>=48&&e<=57}function ce(e){return 36===e||95===e||e>=97&&e<=122||e>=65&&e<=90}function fe(e){return ce(e)||ue(e)}function se(e){if(F(dr,e))return dr[e];var t=e.length,n=0,r=void 0,i=function(){return l(e,n)},o=function(){X("Failed to compile expression: "+fn+e)},a=function(){for(;(r=i())&&(r===ln||r===cn);)n++},u=function(){i()===At?f():(c(),i()===At&&f())},c=function(){do n++;while(ue(i()))},f=function(){n++,ue(i())?c():o()},s=function(){var r=i();for(n++;n<t;)if(n++,l(e,n-1)===r)return;o()},v=function(){do n++;while(fe(i()))},d=function(t){var r=e.substring(n,(v(),n));return r?t&&F(vr,r)?new fr(vr[r]):new cr(r):void o()},p=function(e){var a=[];for(n++;n<t;){if(r=i(),r===e)return n++,a;r===It?n++:vn(a,k())}o()},h=function(t){a();var r=jn(t,P(e,n))[0];if(r)return n+=r.length,r},y=function(){for(var e=d(ht);n<t;){if(r=i(),r===Ht)return new ar(e,p(Wt));if(r===At)n++,e=new sr(e,new fr(d().name));else{if(r!==Jt)break;e=new sr(e,k(Xt))}}return e},m=function t(){if(a(),r=i(),r===Lt||r===Yt){var c=e.substring(n,(s(),n));return new fr(P(c,1,-1),c)}if(ue(r)||r===At)return new fr(parseFloat(e.substring(n,(u(),n))));if(r===Jt)return new ir(p(Xt));if(r===Ht)return k(Wt);if(ce(r))return y();var f=h(Bn);return f?new lr(f,t()):void o()},g=function(){var e=m(),t=h(Kn);if(!t)return e;for(var n=[e,t,Hn[t],m()],r=void 0,i=void 0;i=h(Kn);)n.length>3&&Hn[i]<n[n.length-2]&&(r=b(n),b(n),t=b(n),e=b(n),vn(n,new or(e,t,r))),vn(n,i,Hn[i],m());for(r=b(n);n.length>1;)b(n),t=b(n),e=b(n),r=new or(e,t,r);return r},k=function(e){e&&n++;var t=g();if(a(),i()===an){n++;var r=g();if(a(),i()===Rt){n++;var u=g();return a(),new ur(t,r,u)}o()}return e&&(i()===e?n++:o()),t};return dr[e]=k()}function le(e,t){return E(P(e,t.length))}function ve(e){return T(e,fn)&&!E(e)}function de(e){return e.replace(/^[ \t]*\n|\n[ \t]*$/g,Ct)}function pe(e){var t=yi[e];if(t)return t;t=[];for(var n=[],r=[],i=[],o=void 0,a=function(t){X("Error compiling template:"+fn+e+fn+"- "+t)},u=function(e,t){var r=void 0;v(n,function(t,i){if(t.type===e)return r=n.splice(i,1)[0],yt},ht),r?r.type===Rr&&t&&r.name!==t&&a("end tag expected </"+r.name+"> to be </"+t+">."):a("{{/"+Zr[e]+"}} is not a pair.")},c=function(e){var o=e.type,a=e.content;if(o===Fr){if(ve(a)||!(a=de(a)))return;e.content=a}Ur[o]&&u(b(r).type);var c=k(n);c?1===i.length&&c.addAttr?c.addAttr(e):c.addChild(e):vn(t,e),Lr[o]||Ur[o]?vn(r,e):Yr[o]&&vn(i,e),Hr[o]||vn(n,e)},f=[function(e){if(!i.length){var t=e.match(li);if(t&&!t.index){var n=t[2];return t[1]===qt?u(Rr,n):c(new ti(n,pi.test(n))),t[0]}}},function(e){var t=e.match(vi);if(t)return 1===i.length&&((t[1]===qt||hi.test(i[0].name))&&u(Rr),b(i)),t[0]},function(e){if(1===i.length){var t=e.match(di);if(t){var n=t[1];return Kr[n]?c(new Xr(x(n))):A(n,Or)?(n=P(n,Or.length),c(new Xr(Sr,x(n)))):A(n,$r)?(n=P(n,$r.length),c(new Xr(x(n)))):c(new Qr(i[0].component?x(n):n)),o=t[2],o||u(b(i).type),t[0]}}},function(e){if(2===i.length){for(var t=0,n=void 0,r=void 0;n=s(e,t);){if(n===o){r=ht;break}t++}var a=Ct;return t&&(a=P(e,0,t),c(new fi(a))),r&&(a+=o,u(b(i).type)),a}var f=e.match(li);return f&&f.index&&(e=P(e,0,f.index)),(1!==i.length||E(e))&&c(new fi(e)),e}],l=[function(e,t){if(A(e,mr)){var n=S(le(e,mr),Gt);if(n[0])return new ei(se(E(n[0])),E(n[1]));a("invalid each: "+t)}},function(e,t){if(A(e,kr))return e=le(e,kr),e?new ai(e):a("invalid import: "+t)},function(e,t){if(A(e,gr))return e=le(e,gr),e?new ui(e):a("invalid partial: "+t)},function(e,t){if(A(e,pr))return e=le(e,pr),e?new oi(se(e)):a("invalid if: "+t)},function(e,t){if(A(e,yr))return e=le(e,yr),e?new ri(se(e)):a("invalid else if: "+t)},function(e){if(A(e,hr))return new ni},function(e,t){if(A(e,wr))return e=le(e,wr),e?new ci(se(e)):a("invalid spread: "+t)},function(e,t){if(!A(e,br))return e=E(e),e?new ii(se(e),!D(t,"}}}")):a("invalid expression: "+t)}],d=function(e){e&&!function(){for(var t=e;t;)v(f,function(e,n){if(n=e(t))return t=P(t,n.length),yt});h=P(h,e.length)}()},p=function(e,t){if(e)if(s(e)===qt){var n=P(e,1),i=Wr[n];Lr[i]&&(i=b(r).type),u(i)}else v(l,function(n,r){if(r=n(e,t))return c(r),yt});h=P(h,t.length)},h=e,y=void 0;h;)y=h.match(si),y?(d(P(h,0,y.index)),y[1].length===y[3].length?p(y[2],y[0]):a("invalid expression: "+y[0])):d(h);return yi[e]=t}function he(e){var t=function(e){return he(e)};switch(e.type){case Zn:return"["+e.elements.map(t).join(Mt)+"]";case Jn:return he(e.left)+" "+e.operator+" "+he(e.right);case Qn:return he(e.callee)+"("+e.args.map(t).join(Mt)+")";case nr:return he(e.test)+" ? "+he(e.consequent)+" : "+he(e.alternate);case Xn:return e.name;case er:return F(e,"raw")?e.raw:e.value;case tr:return sr.flatten(e).map(function(e,t){if(e.type===er){var n=e,r=n.value;return f(r)?""+Zt+r+Qt:""+Tt+r}return e=he(e),t>0?""+Zt+e+Qt:e}).join(Ct);case rr:return""+e.operator+he(e.arg);default:return Ct}}function ye(e){var t=e.emitter,n=e.computedDeps,r={},i=function(e){r[e]||(r[e]=ht)};V(t.listeners,function(e,t){i(t)}),V(n,function(e){v(e,i)}),e.watchKeypaths=G(r)}function me(e){return function(t,n,r){var a=t;o(t)&&(a={},a[t]={sync:r,watcher:n});var u=this,c=u.emitter,f=u.context;V(a,function(t,n){var r=t,o=void 0;i(t)&&(r=t.watcher,o=t.sync),c[e](n,r),ye(u),o&&xt(r,f,[u.get(n),gt,n])})}}function ge(e,t){var n=gi[t];n||(n=t.replace(/\./g,"\\.").replace(/\*\*/g,"([.\\w]+?)").replace(/\*/g,"(\\w+)"),n=gi[t]=new RegExp("^"+n+"$"));var r=e.match(n);if(r)return h(r).slice(1)}function ke(e,t){var n=jn(R(e,ht),t),r=n[0],i=n[1],o=void 0;return r&&(o=e[r]),i&&A(i,yn)&&(i=P(i,1)),{value:o,rest:i}}function be(e,t){var n=bt.SVGElement;return"svg"===e||t&&n&&t instanceof n?wt.createElementNS("http://www.w3.org/2000/svg",e):wt.createElement(e)}function we(e){return wt.createTextNode(e||Ct)}function _e(e){return wt.createComment(e||Ct)}function xe(e){return e}function $e(e){return 1===e.nodeType}function Oe(e,t,n){K(e,t,n,yt)}function je(e,t){Oe(e,t,mt)}function Ee(e,t,n){Ci[t]&&(n=n===gt||n?ht:yt),Ti[t]?Oe(e,Ti[t],n):Ci[t]?Oe(e,t,n):e.setAttribute(t,n)}function Pe(e,t){Ti[t]?je(e,Ti[t]):Ci[t]?je(e,t):e.removeAttribute(t)}function Se(e,t,n){n?e.insertBefore(t,n):Ce(e,t)}function Ce(e,t){e.appendChild(t)}function Te(e,t,n){e.replaceChild(t,n)}function Ae(e,t){e.removeChild(t)}function De(e){return e.parentNode}function ze(e){return e.nextSibling}function Ne(e){var t=e.tagName;return O(t)?Ct:t.toLowerCase()}function qe(e){return e.childNodes}function Me(e,t){return 1===arguments.length?e.nodeValue:e.nodeValue=t}function Ie(e,t){return 1===arguments.length?e.innerHTML:e.innerHTML=t}function Ge(e,t){return(t||wt).querySelector(e)}function Re(e,t,n){e.addEventListener(t,n,yt)}function Ve(e,t,n){e.removeEventListener(t,n,yt)}function Fe(e,t){return e.key===t.key&&e.sel===t.sel}function Le(e,t,n){for(var r,i={},o=t;o<=n;o++)r=e[o].key,r!=mt&&(i[r]=o);return i}function Ue(e){return new Li({text:Fi(e)})}function Ye(e,t,n,r){return new Li({sel:e,key:r,data:t,children:n})}function Be(e){return new Li({sel:Ui,text:e})}function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ai,n=new kn;v(to,function(t){v(e,function(e){n.on(t,e[t])})});var i=function(e){var n=[t.tag(e)],r=e.id,i=e.className;return r&&vn(n,""+Dt+r),i&&vn(n,""+Tt+S(i,sn).join(Tt)),n.join(Ct)},u=function(e){var t=void 0,n=void 0,r=void 0,i=C(e,Dt);i>0&&(t=P(e,0,i),e=P(e,i+1));var o=C(e,Tt);if(o>0){var a=P(e,0,o);t?n=a:t=a,r=S(P(e,o+1),Tt).join(sn)}else t?n=e:t=e;return{tagName:t,id:n,className:r}},c=function(e,i,a){var c=i.sel,s=i.data,l=i.children,v=i.text,d=s&&s.hooks||{};if(xt(d[Yi],mt,i),O(c))return i.el=t.createText(v);if(c===Ui)return i.el=t.createComment(v);var p=u(c),h=p.tagName,y=p.id,m=p.className,g=t.createElement(h,e);return y&&(g.id=y),m&&(g.className=m),i.el=g,r(l)?f(g,l,0,l.length-1,a):o(v)&&t.append(g,t.createText(v)),s&&(s=[no,i],n.fire(Bi,s,t),xt(d[Bi],mt,s),d[Hi]&&a.push(i)),i.el},f=function(e,t,n,r,i,o){for(var a=n;a<=r;a++)s(e,t[a],i,o)},s=function(e,n,r,i){var o=c(e,n,r);o&&t.before(e,o,i)},l=function(e,t,n,r){for(var i,o=n;o<=r;o++)i=t[o],i&&d(e,i)},d=function(e,r){var i=r.sel,o=r.el,a=r.data;i?(p(r),t.remove(e,o),a&&(n.fire(Ki,r,t),a.hooks&&xt(a.hooks[Ki],mt,r))):o&&t.remove(e,o)},p=function e(r){var i=r.data,o=r.children;i&&(o&&v(o,function(t){e(t)}),n.fire(Wi,r,t),i.hooks&&xt(i.hooks[Wi],mt,r))},h=function(e,n,r){t.before(e,r.el,n.el),d(e,n)},y=function(e,n,r,i){for(var o=0,u=n.length-1,s=n[o],v=n[u],d=0,p=r.length-1,h=r[d],y=r[p],g=void 0,k=void 0,b=void 0;o<=u&&d<=p;)s?v?Fe(s,h)?(m(s,h,i),s=n[++o],h=r[++d]):Fe(v,y)?(m(v,y,i),v=n[--u],y=r[--p]):Fe(s,y)?(m(s,y,i),t.before(e,s.el,t.next(v.el)),s=n[++o],y=r[--p]):Fe(v,h)?(m(v,h,i),t.before(e,v.el,s.el),v=n[--u],h=r[++d]):(g||(g=Le(n,o,u)),k=g[h.key],a(k)?(b=n[k],m(b,h,i),n[k]=mt):(b=c(e,h,i),b&&(b=h)),b&&t.before(e,b.el,s.el),h=r[++d]):v=n[--u]:s=n[++o];o>u?(b=r[p+1],f(e,r,d,p,i,b?b.el:mt)):d>p&&l(e,n,o,u)},m=function(e,r,i){if(e!==r){var a=r.data,u=a&&a.hooks||{},s=[e,r];xt(u[Qi],mt,s);var v=e.el;if(r.el=v,!Fe(e,r)){var d=t.parent(v);return void(c(d,r,i)&&d&&h(d,e,r))}a&&(n.fire(Xi,s,t),xt(u[Xi],mt,s));var p=r.text,m=r.children,g=e.text,k=e.children;o(p)?p!==g&&t.text(v,p):m&&k?m!==k&&y(v,k,m,i):m?(o(g)&&t.text(v,Ct),f(v,m,0,m.length-1,i)):k?l(v,k,0,k.length-1):o(g)&&t.text(v,Ct),xt(u[eo],mt,s)}};return function(e,r){n.fire(Zi,mt,t),t.isElement(e)&&(e=new Li({el:e,sel:i(e),data:{},children:[]}));var o=[];if(Fe(e,r))m(e,r,o);else{var a=t.parent(e.el);c(a,r,o)&&a&&h(a,e,r)}return v(o,function(e){xt(e.data.hooks[Hi],mt,e)}),n.fire(Ji,mt,t),r}}function Ke(e,t){var n=e.data.attrs,r=t.data.attrs;if(!t.data.component&&(n||r)){n=n||{},r=r||{};var i=t.el,o=this,a=function(e,t){if(F(e,t)){var n=e[t].value;return n!==gt?n:t}};V(r,function(e,t){a(r,t)!==a(n,t)&&o.setAttr(i,t,e.value)}),V(n,function(e,t){F(r,t)||o.removeAttr(i,t)})}}function We(e,t){var n=e.data.props,r=t.data.props;if(n||r){n=n||{},r=r||{};var i=t.el,o=this;V(r,function(e,t){e!==n[t]&&o.setProp(i,t,e)}),V(n,function(e,t){F(r,t)||o.removeProp(i,t)})}}function Ze(e,t){var r=e.el,o=e.data,a=o.instance,u=o.attrs,c=o.directives,f=o.destroies,s=c[t],l={el:r,node:s,instance:a,directives:c,attributes:u||{}},v=r.$component;i(v)&&(F(v,"queue")&&!F(v,"set")&&(v=v.queue),l.component=v);var d=xt(a.directive(s.name),mt,l);n(d)&&(f||(f=e.data.destroies={}),f[t]=d)}function Je(e,t){var n=e.data.destroies;n&&n[t]&&(n[t](),delete n[t])}function Qe(e,t){var n=e.data.directives,r=t.data.directives;(n||r)&&(n=n||{},r=r||{},V(r,function(r,i){if(F(n,i)){var o=n[i];o.value!==r.value&&(Je(e,i),Ze(t,i))}else Ze(t,i)}),V(n,function(t,n){F(r,n)||Je(e,n)}),t.data.destroies=U({},e.data.destroies,t.data.destroies))}function Xe(e){var t=e.data.destroies;t&&V(t,function(e){e()})}function et(e){var t={};return e&&V(e,function(e){t[e.name]=e.value}),t}function tt(e,t){var n=t.data,i=n.component,o=n.instance,a=n.attrs;if(i){var u=t.el;u.$component={queue:[],attrs:a},o.component(t.sel,function(e){var n=u,i=n.$component;if(i&&r(i.queue)){var a=o.create(e,{el:u,props:et(i.attrs),replace:ht});u=a.$el,u.$component=a,t.el=u,v(i.queue,function(e){e(a)})}})}}function nt(e,t){var n=t.el.$component;if(i(n)){var r=t.data.attrs;n.set?n.set(et(r),ht):n.attrs=r}}function rt(e,t){var n=e.el,r=n.$component;i(r)&&(r.destroy&&r.destroy(ht),n.$component=mt)}function it(e,t){var n={},r=void 0,i=void 0,o=void 0;switch(e.type){case Zn:r=[],v(e.elements,function(e){o=it(e,t),vn(r,o.value),U(n,o.deps)});break;case Jn:var a=e.left,u=e.right;a=it(a,t),u=it(u,t),r=or[e.operator](a.value,u.value),U(n,a.deps,u.deps);break;case Qn:o=it(e.callee,t),n=o.deps,r=xt(o.value,mt,e.args.map(function(e){var r=it(e,t);return U(n,r.deps),r.value}));break;case nr:var c=e.test,f=e.consequent,s=e.alternate;c=it(c,t),c.value?(f=it(f,t),r=f.value,U(n,c.deps,f.deps)):(s=it(s,t),r=s.value,U(n,c.deps,s.deps));break;case Xn:i=e.name,o=t.get(i),r=o.value,n[o.keypath]=r;break;case er:r=e.value;break;case tr:var l=[];v(sr.flatten(e),function(e,r){var i=e.type;if(i!==er)if(r>0){var o=it(e,t);vn(l,o.value),U(n,o.deps)}else i===Xn&&vn(l,e.name);else vn(l,e.value)}),i=M(l),o=t.get(i),r=o.value,n[o.keypath]=r;break;case rr:o=it(e.arg,t),r=lr[e.operator](o.value),n=o.deps}return{value:r,deps:n,keypath:i}}function ot(e){var t=q(e);return t[0]===kt?(t.shift(),{keypath:M(t)}):{keypath:M(t),lookup:ht}}function at(e){return r(e)&&(e[zt]=ht),e}function ut(e){return r(e)&&e[zt]}function ct(e,t){if(r(e))switch(e.length){case 0:return Ct;case 1:return e[0];default:return e.join(Ct)}else if(!_(t))return Ct}function ft(e,t,n,a,u){var c=void 0,f=[],s=function(){c=M(f)},l=function(){return c};s(),l.toString=l,u[xr]=l;var d=new uo(u,c),p=[],h=[],y={},m=function(e){r(e.context)&&xt(d.set,d,e.context),e.keypath!==gt&&(vn(f,e.keypath),s()),e.value!==gt&&(d=d.push(e.value,c)),Yr[e.type]&&vn(q,e.type),vn(p,{node:e,index:-1,deps:{},parent:S}),S=k(p)},g=function(){var e=S,t=e.node;Yr[t.type]&&b(q),t.value!==gt&&(d=d.pop()),t.keypath!==gt&&(b(f),s()),C&&(C=mt),S.binding||U(S.parent?S.parent.deps:y,S.deps),S=S.parent,b(p)},w=function(e){r(e)?e.length&&m({children:e}):m(e)},_=function(e){var t=S.parent,n=void 0;n=t?t.children||(t.children=at([])):h,ut(e)?vn(n,e):n.push(e)},x=function(e){var t=it(e,d);return e.keypath=t.keypath,U(S.deps,t.deps),t.value},$=function(e){return Ur[e.type]?yt:(T=mt,ht)},O={},j={};O[Nr]=function(e){return G[e.name]=e.children,g(),yt},O[qr]=function(e){var t=e.name,n=G[t]||a(t);return n?(g(),w(n),yt):void X('Partial "'+t+'" is not found.')},O[Tr]=O[Ar]=function(e){if(!x(e.expr))return!C||Ur[C.type]||Br[k(q)]||_(at(t())),g(),yt},O[zr]=function(e){g();var t=e.expr,n=e.index,o=e.children,a=x(t),u=void 0;if(r(a)?u=v:i(a)&&(u=V),u){var c=[];m({value:a,children:c,keypath:t.keypath}),u(a,function(e,t,r){r={value:e,children:o,keypath:t},n&&(r.context=[n,t]),vn(c,r)})}return yt};var E=function(e,t,n){var r={name:e,value:t,keypath:c,type:Vr};return o(n)&&(r.bindTo=n),r};j[Fr]=function(e){return e.content},j[Mr]=function(e){return x(e.expr)},j[Vr]=function(e){var t=e.name,n=e.children,r=ct(S.children,n),i=void 0;if(n&&1===n.length){var a=n[0],u=a.type,c=a.expr,f=a.safe;f&&u===Mr&&o(c.keypath)&&(i=c.keypath,S.binding=ht)}return E(t,r,i)},j[Gr]=function(t){var n=t.name,r=t.modifier,i=t.children,o=ct(S.children,i);if(n!==Cr)return{keypath:c,name:n,value:o,modifier:r,type:Gr};if(o!=mt){if(N||(z=e.cache,N=e.cache={}),D=z&&z[o]){for(N[o]=D;S.node.type!==Rr;)g();return U(S.deps,D.deps),D.result}for(var a=void 0;a=S.parent;)if(a.node.type===Rr){a.cache={key:o};break}}},j[Tr]=j[Ar]=j[Dr]=function(e){return T=$,S.children},j[Ir]=function(e){var t=e.expr,n=x(t);if(i(n)){var r=t.keypath,a=o(r),u=at([]);return V(n,function(e,t){vn(u,E(t,e,a?I(r,t):gt))}),S.binding=a,u}X('Spread "'+he(t)+'" must be an object.')},j[Rr]=function(e){var t=[],r=[],i=[];return S.children&&v(S.children,function(e){e.type===Vr?vn(t,e):e.type===Gr?vn(r,e):vn(i,e)}),n({name:e.name,key:S.cache?S.cache.key:gt,component:e.component,keypath:c,attributes:t,directives:r,children:i},e)},j[gt]=function(e,t){return t.children};var P=function(e,t,n){for(;n=t[++e.index];)if(!T||T(n))return C=t[e.index+1],m(n),yt},S=void 0,C=void 0,T=void 0,A=void 0,D=void 0,z=void 0,N=void 0,q=[],G={};for(w(e);p.length;){var R=S,F=R.node,L=F.type,Y=F.attrs,B=F.children;if(S.enter||(S.enter=ht,xt(O[L],mt,[F,S])!==yt)){if(Y&&!S.attrs){if(P(S,Y)===yt)continue;S.index=-1,S.attrs=ht}B&&P(S,B)===yt||(A=xt(j[L],mt,[F,S]),A!==gt&&(_(A),D=S.cache,D&&(D.result=A,D.deps=S.deps,N[D.key]=D)),g())}}return{nodes:h,deps:y}}function st(e,t,n){var r=function(e,t){var r={},i={instance:n,hooks:r,component:e.component},a=t.children,u=e.children;if(a&&1===a.length){var c=a[0];c.type===Mr&&c.safe===yt&&(i.props={innerHTML:u[0]},u.length=0)}var f=function(e){var t=i.directives||(i.directives={});t[I(e.name,e.modifier)]=e};return v(e.attributes,function(e){var t=e.name,n=(e.value,e.keypath),r=e.bindTo,a=i.attrs||(i.attrs={});a[t]=e,o(r)&&f({keypath:n,name:Pr,modifier:t,value:r,oneway:ht})}),v(e.directives,f),Ye(e.name,i,u.map(function(e){return Li.is(e)?e:Ue(e)}),e.key)},i=function(e){var t=n.partial(e);return o(t)?pe(t):t};return ft(e,Be,r,i,t)}function lt(e,t){var n=t.el,r=t.node,i=t.instance,o=t.directives,a=t.attributes,u=qi,c=Gi.tag(n),f=n.type,s=go[f]||go[c];s||(s=po,("oninput"in n||"textarea"===c||"text"===f||"password"===f)&&(u=Ni));var l={el:n,keypath:e,instance:i},v=function(){s.set(l)};i.watch(e,v,s.attr&&!F(a,s.attr));var d=vo({el:n,node:r,instance:i,directives:o,type:u,listener:function(){s.sync(l)}});return function(){i.unwatch(e,v),d&&d()}}function vt(e,t){var n=t.el,i=t.node,o=t.instance,a=t.component,u=function(e){var t=i.modifier;if(a){var o=function(n){n.set(t,e)};r(a)?vn(a,o):o(a)}else Gi.setAttr(n,t,e!==gt?e:Ct)};return o.watch(e,u),function(){o.unwatch(e,u)}}function dt(e,t){var r=t[0],i=t[1],o=void 0;return g(Oo,e)&&n(i)&&(o=i,i=gt),{callback:o,args:i===gt?[r]:[r,i]}}function pt(e){var t=e.args,n=e.get,r=e.set;t=h(t);var a=t[0];t[1];if(i(a))xt(r,mt,a);else if(o(a)){var u=t,c=u.length;if(2===c)xt(r,mt,t);else if(1===c)return xt(n,mt,a)}}var ht=!0,yt=!1,mt=null,gt=void 0,kt="this",bt="undefined"!=typeof window?window:mt,wt="undefined"!=typeof document?document:mt,_t=Object.freeze({is:t,func:n,array:r,object:i,string:o,number:a,boolean:u,primitive:c,numeric:f}),xt=function(e,t,i){if(n(e))return r(i)?e.apply(t,i):e.call(t,i)},$t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f(e)?+e:t},Ot=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},jt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Et=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Pt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},St=function(){function e(t){Ot(this,e),t.type?(this.type=t.type,this.originalEvent=t):this.type=t}return jt(e,[{key:"prevent",value:function(){if(!this.isPrevented){var e=this.originalEvent;e&&(n(e.prevent)?e.prevent():n(e.preventDefault)&&e.preventDefault()),this.isPrevented=ht}}},{key:"stop",value:function(){if(!this.isStoped){var e=this.originalEvent;e&&(n(e.stop)?e.stop():n(e.stopPropagation)&&e.stopPropagation()),this.isStoped=ht}}}]),e}();St.is=function(e){return e instanceof St};var Ct="",Tt=".",At=l(Tt),Dt="#",zt=(l(Dt),"-"),Nt=(l(zt),"="),qt=(l(Nt),"/"),Mt=(l(qt),","),It=l(Mt),Gt=":",Rt=l(Gt),Vt=";",Ft=(l(Vt),"'"),Lt=l(Ft),Ut='"',Yt=l(Ut),Bt="(",Ht=l(Bt),Kt=")",Wt=l(Kt),Zt="[",Jt=l(Zt),Qt="]",Xt=l(Qt),en="{",tn=(l(en),"}"),nn=(l(tn),"<"),rn=(l(nn),">"),on=(l(rn),"?"),an=l(on),un="\t",cn=l(un),fn="\n",sn=(l(fn)," "),ln=l(sn),vn=p("push"),dn=p("unshift"),pn=Object.freeze({each:v,merge:d,push:vn,unshift:dn,toArray:h,toObject:y,indexOf:m,has:g,last:k,pop:b,remove:w,falsy:_}),hn=Object.freeze({camelCase:x,capitalize:$,falsy:O,parse:j,trim:E,slice:P,split:S,indexOf:C,has:T,startsWith:A,endsWith:D}),yn=".",mn=".",gn=Object.freeze({keys:G,sort:R,each:V,has:F,clear:L,extend:U,copy:Y,get:H,set:K}),kn=function(){function e(){Ot(this,e),this.listeners={}}return jt(e,[{key:"on",value:function(e,t){var r=this.listeners,a=function(e,t){n(e)&&vn(r[t]||(r[t]=[]),e)};i(e)?V(e,a):o(e)&&a(t,e)}},{key:"once",value:function(e,t){var r=this,a=function(e,t){n(e)&&(e.$magic=function(){r.off(t,e)})};i(e)?V(e,a):o(e)&&a(t,e),r.on(e,t)}},{key:"off",value:function(e,t){var n=this.listeners;if(e==mt)V(n,function(e,t){r(n[t])&&delete n[t]});else{var i=n[e];r(i)&&(t==mt?i.length=0:w(i,t),i.length||delete n[e])}}},{key:"fire",value:function(e,t,i){2===arguments.length&&(i=mt);var o=t;r(t)&&(o=t[0]);var a=St.is(o),u=ht,c=this.listeners,f=c[e];return r(f)&&v(f,function(e){var r=xt(e,i,t),c=e.$magic;if(n(c)&&(c(),delete e.$magic),a&&(r===yt?(o.prevent(),o.stop()):o.isStoped&&(r=yt)),r===yt)return u=yt}),u}},{key:"has",value:function(e,t){var n=this.listeners,i=n[e];return t==mt?!_(i):r(i)?g(i,t):void 0}}]),e}(),bn="undefined"!=typeof console,wn=/yox/.test(e.toString()),_n=Object.freeze({log:Z,warn:J,error:Q,fatal:X}),xn=void 0;xn="function"==typeof MutationObserver?ee:"function"==typeof setImmediate?te:ne;var $n=function(e){if(wt){var t=wt.activeElement;if(t&&"autofocus"in t)return void ne(e)}xn(e)},On=[],jn=function(e,t){var n=[];return v(e,function(e){if(A(t,e))return vn(n,e,P(t,e.length)),yt}),n},En="+",Pn="-",Sn="*",Cn="/",Tn="%",An="~",Dn="&&",zn="||",Nn="!",qn="!!",Mn="===",In="!==",Gn="==",Rn="!=",Vn="<",Fn="<=",Ln=">",Un=">=",Yn={};Yn[En]=Yn[Pn]=Yn[Nn]=Yn[An]=Yn[qn]=ht;var Bn=R(Yn,ht),Hn={};Hn[zn]=1,Hn[Dn]=2,Hn[Gn]=Hn[Rn]=Hn[Mn]=Hn[In]=3,Hn[Vn]=Hn[Fn]=Hn[Ln]=Hn[Un]=4,Hn[En]=Hn[Pn]=5,Hn[Sn]=Hn[Cn]=Hn[Tn]=6;var Kn=R(Hn,ht),Wn=function e(t){Ot(this,e),this.type=t},Zn=1,Jn=2,Qn=3,Xn=4,er=5,tr=6,nr=7,rr=8,ir=function(e){function t(e){Ot(this,t);var n=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Zn));return n.elements=e,n}return Et(t,e),t}(Wn),or=function(e){function t(e,n,r){Ot(this,t);var i=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Jn));return i.left=e,i.operator=n,i.right=r,i}return Et(t,e),t}(Wn);or[zn]=function(e,t){return e||t},or[Dn]=function(e,t){return e&&t},or[Mn]=function(e,t){return e===t},or[In]=function(e,t){return e!==t},or[Gn]=function(e,t){return e==t},or[Rn]=function(e,t){return e!=t},or[Vn]=function(e,t){return e<t},or[Fn]=function(e,t){return e<=t},or[Ln]=function(e,t){return e>t},or[Un]=function(e,t){return e>=t},or[En]=function(e,t){return e+t},or[Pn]=function(e,t){return e-t},or[Sn]=function(e,t){return e*t},or[Cn]=function(e,t){return e/t},or[Tn]=function(e,t){return e%t};var ar=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Qn));return r.callee=e,r.args=n,r}return Et(t,e),t}(Wn),ur=function(e){function t(e,n,r){Ot(this,t);var i=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,nr));return i.test=e,i.consequent=n,i.alternate=r,i}return Et(t,e),t}(Wn),cr=function(e){function t(e){Ot(this,t);var n=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Xn));return n.name=e,n}return Et(t,e),t}(Wn),fr=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,er));return r.value=e,n&&(r.raw=n),r}return Et(t,e),t}(Wn),sr=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,tr));return r.object=e,r.prop=n,r}return Et(t,e),t}(Wn);sr.flatten=function(e){var t=[],n=void 0;do n=e.object,e.type===tr?dn(t,e.prop):dn(t,e);while(e=n);return t};var lr=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,rr));return r.operator=e,r.arg=n,r}return Et(t,e),t}(Wn);lr[En]=function(e){return+e},lr[Pn]=function(e){return-e},lr[Nn]=function(e){return!e},lr[An]=function(e){return~e},lr[qn]=function(e){return!!e};var vr={};vr.true=ht,vr.false=yt,vr.null=mt,vr.undefined=gt;var dr={},pr="#if",hr="else",yr="else if",mr="#each",gr="#partial",kr=">",br="! ",wr="...",_r="$event",xr="$keypath",$r="o-",Or="on-",jr="ref",Er="lazy",Pr="model",Sr="event",Cr="key",Tr=1,Ar=2,Dr=3,zr=4,Nr=5,qr=6,Mr=7,Ir=8,Gr=9,Rr=10,Vr=11,Fr=12,Lr={},Ur={},Yr={},Br={},Hr={},Kr={},Wr={},Zr={};Lr[Tr]=Lr[Ar]=Ur[Ar]=Ur[Dr]=Yr[Rr]=Yr[Vr]=Yr[Gr]=Br[Vr]=Br[Gr]=Hr[Fr]=Hr[qr]=Hr[Ir]=Hr[Mr]=Kr[jr]=Kr[Er]=Kr[Pr]=Kr[Cr]=ht,Wr.if=Tr,Wr.each=zr,Wr.partial=Nr,V(Wr,function(e,t){Zr[e]=t});var Jr=function(){function e(t){Ot(this,e),this.type=t}return jt(e,[{key:"addChild",value:function(e){vn(this.children||(this.children=[]),e)}}]),e}(),Qr=function(e){function t(e){Ot(this,t);var n=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Vr));return n.name=e,n}return Et(t,e),t}(Jr),Xr=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Gr));return r.name=e,n&&(r.modifier=n),r}return Et(t,e),t}(Jr),ei=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,zr));return r.expr=e,n&&(r.index=n),r}return Et(t,e),t}(Jr),ti=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Rr));return r.name=e,n&&(r.component=n),r}return Et(t,e),jt(t,[{key:"addAttr",value:function(e){vn(this.attrs||(this.attrs=[]),e)}}]),t}(Jr),ni=function(e){function t(){return Ot(this,t),Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Dr))}return Et(t,e),t}(Jr),ri=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ar));return r.expr=e,r}return Et(t,e),t}(Jr),ii=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Mr));return r.expr=e,r.safe=n,r}return Et(t,e),t}(Jr),oi=function(e){function t(e,n){Ot(this,t);var r=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Tr));return r.expr=e,r}return Et(t,e),t}(Jr),ai=function(e){function t(e){Ot(this,t);var n=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,qr));return n.name=e,n}return Et(t,e),t}(Jr),ui=function(e){function t(e){Ot(this,t);var n=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Nr));return n.name=e,n}return Et(t,e),t}(Jr),ci=function(e){function t(e){Ot(this,t);var n=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ir));return n.expr=e,n}return Et(t,e),t}(Jr),fi=function(e){function t(e){Ot(this,t);var n=Pt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Fr));return n.content=e,n}return Et(t,e),t}(Jr),si=/(\{?\{\{)\s*([^\}]+?)\s*(\}\}\}?)/,li=/<(\/)?([a-z][-a-z0-9]*)/i,vi=/^\s*(\/)?>/,di=/^\s*([-:\w]+)(?:=(['"]))?/,pi=/[-A-Z]/,hi=/source|param|input|img|br|hr/,yi={},mi=function(){function e(t){Ot(this,e);var o=t.data,a=t.context,c=t.computed,f=t.watchers,s=this;if(s.data=o,s.cache={},s.emitter=new kn,s.context=a||s,s.computedDeps={},s.computedDepsReversed={},i(c)){s.computedGetters={},s.computedSetters={},s.computedStack=[],s.computedCache={};var l=s.computedCache,v=s.computedStack,d=s.computedGetters,p=s.computedSetters;V(c,function(e,t){var o=void 0,a=void 0,c=void 0,f=ht;if(n(e)?o=e:i(e)&&(u(e.cache)&&(f=e.cache),r(e.deps)&&(c=e.deps),n(e.get)&&(o=e.get),n(e.set)&&(a=e.set)),o){s.watch(t,function(){F(l,t)&&delete l[t]});var h=function(){if(f&&F(l,t))return l[t];c||v.push([]);var e=xt(o,s.context);return f&&(l[t]=e),s.setComputedDeps(t,c||b(v)),e};h.toString=d[t]=h}a&&(p[t]=a)})}i(f)&&s.watch(f)}return jt(e,[{key:"get",value:function(e,t){var n=this,r=n.data,i=n.computedStack,a=n.computedGetters,u=function(e){if(i){var t=k(i);t&&vn(t,e)}if(a){var n=ke(a,e),o=n.value,u=n.rest;if(o)return o=o(),u&&!c(o)?H(o,u):{value:o}}return H(r,e)},f=q(e),s=void 0,l=void 0;if(o(t)){var v=q(t);if(f.length>1&&f[0]===kt)e=M(d(v,f.slice(1))),l=u(e);else for(e=mt;ht;){if(s=M(d(v,f)),l=u(s)){e=s;break}if(e==mt&&(e=s),!v.length)break;b(v)}return l||(l={}),l.keypath=e,l}if(l=u(M(f)))return l.value}},{key:"set",value:function(e){var t=this,n={},r=t.data,i=(t.cache,t.emitter),o=t.context,a=(t.computedDeps,t.computedDepsReversed),u=t.computedGetters,f=t.computedSetters,s=t.watchKeypaths,l=function(e,t,r){n[e]||(r&&vn(t,r),n[e]=t)};V(e,function(e,n){if(n=z(n),v(s,function(e){if(T(e,"*")){var r=ge(n,e);r&&l(n,[t.get(n),n],r)}else A(e,n)&&l(e,[t.get(e),e])}),f){var i=f[n];if(i)return void i.call(o,e);var a=ke(u,n),d=a.value,p=a.rest;if(d&&p)return d=d(),
void(c(d)||K(d,p,e))}K(r,n,e)});var d={},p=G(a),h=function e(t,n){d[t]||(d[t]=ht,i.fire(t,n,o),v(p,function(n){var r=void 0,i=void 0;n===t?r=a[n]:T(n,"*")&&(i=ge(t,n),i&&(r=a[n])),r&&v(r,function(t){e(t)})}))};V(n,function(e,n){var r=t.get(n);r!==e[0]&&(e.unshift(r),h(n,e))})}},{key:"setComputedDeps",value:function(e,t){var n=this.computedDeps,r=this.computedDepsReversed;if(t!==n[e]){n[e]=t,ye(this),r=this.computedDepsReversed={};var i=function(e,t){var n=r[e]||(r[e]=[]);vn(n,t)};V(n,function(e,t){v(e,function(e){i(e,t)})})}}},{key:"destroy",value:function(){this.emitter.off(),L(this)}}]),e}();U(mi.prototype,{watch:me("on"),watchOnce:me("once"),unwatch:function(e,t){this.emitter.off(e,t),ye(this)}});var gi={},ki=/<[^>]+>/,bi=/^[#.][-\w+]+$/,wi="beforeCreate",_i="afterCreate",xi="beforeMount",$i="afterMount",Oi="beforeUpdate",ji="afterUpdate",Ei="beforeDestroy",Pi="afterDestroy",Si="allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noshade,noresize,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,typemustmatch,visible",Ci=y(S(Si,Mt));Si=mt;var Ti={};Ti.for="htmlFor",Ti.value="value",Ti.class="className",Ti.style="style.cssText",Ti.nohref="noHref",Ti.noshade="noShade",Ti.noresize="noResize",Ti.readonly="readOnly",Ti.defaultchecked="defaultChecked",Ti.defaultmuted="defaultMuted",Ti.defaultselected="defaultSelected";var Ai=Object.freeze({createElement:be,createText:we,createComment:_e,createEvent:xe,isElement:$e,setProp:Oe,removeProp:je,setAttr:Ee,removeAttr:Pe,before:Se,append:Ce,replace:Te,remove:Ae,parent:De,next:ze,tag:Ne,children:qe,text:Me,html:Ie,find:Ge,on:Re,off:Ve}),Di="tap",zi="click",Ni="input",qi="change",Mi="compositionstart",Ii="compositionend",Gi=Y(Ai),Ri=Gi.on,Vi=Gi.off;Gi.specialEvents={input:{on:function(e,t){var n=yt;Gi.on(e,Mi,t[Mi]=function(){n=ht}),Gi.on(e,Ii,t[Ii]=function(e){n=yt,t(e,Ni)}),Ri(e,Ni,t[Ni]=function(e){n||t(e)})},off:function(e,t){Gi.off(e,Mi,t[Mi]),Gi.off(e,Ii,t[Ii]),Vi(e,Ni,t[Ni]),t[Mi]=t[Ii]=t[Ni]=mt}}},Gi.on=function(e,t,n,r){var i=e.$emitter||(e.$emitter=new kn);if(!i.has(t)){var o=function(t,n){St.is(t)||(t=new St(Gi.createEvent(t,e))),n&&(t.type=n),i.fire(t.type,t,r)};i[t]=o;var a=Gi.specialEvents[t];a?a.on(e,o):Ri(e,t,o)}i.on(t,n)},Gi.off=function(e,t,n){var r=e.$emitter,i=G(r.listeners);r.off(t,n),v(i,function(t){if(r[t]&&!r.has(t)){var n=r[t],i=Gi.specialEvents[t];i?i.off(e,n):Vi(e,t,n),delete r[t]}})};var Fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct;try{return e.toString()}catch(e){return t}},Li=function e(t){Ot(this,e),U(this,t)};Li.is=function(e){return e instanceof Li};var Ui="!",Yi="init",Bi="create",Hi="insert",Ki="remove",Wi="destroy",Zi="pre",Ji="post",Qi="prepatch",Xi="update",eo="postpatch",to=[Bi,Xi,Ki,Wi,Zi,Ji],no=new Li({sel:Ct,data:{},children:[]}),ro={create:Ke,update:Ke},io={create:We,update:We},oo={create:Qe,update:Qe,destroy:Xe},ao={create:tt,update:nt,destroy:rt},uo=function(){function e(t,n,r){Ot(this,e),this.data=Y(t),this.keypath=n,this.parent=r,this.cache={}}return jt(e,[{key:"push",value:function(t,n){return new e(t,n,this)}},{key:"pop",value:function(){return this.parent}},{key:"set",value:function(e,t){var n=this,r=ot(e),i=r.keypath;n&&i&&(F(n.cache,i)&&delete n.cache[i],K(n.data,i,t))}},{key:"get",value:function(e){var t=this,n=ot(e),r=n.keypath,i=n.lookup,o=t,a=o.data,u=o.cache,c=function(e,t){return I(e.keypath,t)};if(!F(u,r))if(r){var f=void 0;if(i)for(;t&&!(f=H(t.data,r));)t=t.parent;else f=H(a,r);f&&(u[r]={keypath:c(t,r),value:f.value})}else u[r]={keypath:t.keypath,value:a};return(u=u[r])?u:(J('Failed to lookup "'+e+'".'),{keypath:c(this,r)})}}]),e}(),co=He([ao,ro,io,oo],Gi),fo=function(e){var t=e.el,n=e.node,o=e.instance,a=e.component,u=n.value;if(!O(u)){var c=o.$refs;i(c)?F(c,u)&&Q('Passing a ref "'+u+'" is existed.'):c=o.$refs={};var f=function(e){c[u]=e};return a?r(a)?vn(a,f):f(a):f(t),function(){F(c,u)?delete c[u]:r(a)&&w(a,f)}}},so=function(e,t,n){var r=void 0;return function(){if(!r){var i=h(arguments);n&&xt(e,mt,i),r=setTimeout(function(){r=mt,n||xt(e,mt,i)},t)}}},lo=[zi,Di],vo=function(e){var t=e.el,n=e.node,i=e.instance,o=e.component,a=e.directives,u=e.type,c=e.listener;if(u||(u=n.modifier),c||(c=i.compileValue(n.keypath,n.value)),u&&c){var s=a.lazy;if(s){var l=s.value;f(l)&&l>=0?c=so(c,l,g(lo,u)):u===Ni&&(u=qi)}if(o){var v=function(e){e.on(u,c)};return r(o)?vn(o,v):v(o),function(){o.off(u,c),r(o)&&w(o,v)}}return Gi.on(t,u,c),function(){Gi.off(t,u,c)}}},po={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=Fi(r.get(n));i!==t.value&&(t.value=i)},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;r.set(n,t.value)},attr:"value"},ho={set:function(e){var t=e.el,n=e.keypath,r=e.instance,i=Fi(r.get(n)),o=t.options,a=t.selectedIndex;i!==o[a].value&&v(o,function(e,n){if(e.value===i)return t.selectedIndex=n,yt})},sync:function(e){var t=e.el,n=e.keypath,r=e.instance,i=t.options[t.selectedIndex].value;r.set(n,i)}},yo={set:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked=t.value===Fi(r.get(n))},sync:function(e){var t=e.el,n=e.keypath,r=e.instance;t.checked&&r.set(n,t.value)},attr:"checked"},mo={set:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);t.checked=r(o)?g(o,t.value,yt):u(o)?o:!!o},sync:function(e){var t=e.el,n=e.keypath,i=e.instance,o=i.get(n);r(o)?(t.checked?vn(o,t.value):w(o,t.value,yt),i.set(n,Y(o))):i.set(n,t.checked)},attr:"checked"},go={radio:yo,checkbox:mo,select:ho},ko=function(e){var t=e.node,n=e.instance,r=n.get(t.value,t.keypath),i=r.keypath;return t.oneway?vt(i,e):lt(i,e)},bo="$template$",wo=function(){function e(t){Ot(this,e);var r=this;r.$options=t,xt(t[wi],r,t);var a=t.el,u=t.data,c=t.props,f=t.parent,s=t.replace,l=t.computed,v=t.template,d=t.components,p=t.directives,h=t.partials,y=t.filters,m=t.events,g=t.watchers,k=t.methods,b=t.propTypes,w=t.extensions;U(r,w);var _=c;i(_)?(i(b)&&(_=e.validate(_,b)),u&&!n(u)&&J('"data" option should be a function.')):_={},r.$observer=new mi({context:r,data:_,computed:l});var x=n(u)?xt(u,r):u;i(x)&&V(x,function(e,t){F(_,t)?J('"'+t+'" is already defined as a prop. Use prop default value instead.'):_[t]=e}),g&&r.$observer.watch(g),r.$eventEmitter=new kn,m&&r.on(m),xt(t[_i],r),o(v)?(bi.test(v)&&(v=Gi.html(Gi.find(v))),ki.test(v)||Q('"template" option must have a root element.')):v=mt,o(a)&&bi.test(a)&&(a=Gi.find(a)),a&&(Gi.isElement(a)?s||(Gi.html(a,"<div></div>"),a=Gi.children(a)[0]):Q('"el" option must be a html element.')),f&&(r.$parent=f),k&&V(k,function(e,t){F(_o,t)&&Q('"'+t+'" method is conflicted with built-in methods.'),r[t]=e}),d&&r.component(d),p&&r.directive(p),h&&r.partial(h),y&&r.filter(y),v&&(r.watch(bo,function(){r.$dirty=ht}),xt(t[xi],r),r.$template=e.compile(v),r.updateView(a||Gi.createElement("div")))}return jt(e,[{key:"get",value:function(e,t){return this.$observer.get(e,t)}},{key:"set",value:function(e,t){var n=void 0,r=void 0;if(o(e))n={},n[e]=t;else{if(!i(e))return;n=e,r=t===ht}this.updateModel(n,r)}},{key:"on",value:function(e,t){this.$eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.$eventEmitter.once(e,t)}},{key:"off",value:function(e,t){this.$eventEmitter.off(e,t)}},{key:"fire",value:function(e,t){var n=e;o(e)&&(n=new St(e));var r=this;n.target||(n.target=r);var a=[n];i(t)&&vn(a,t);var u=r.$parent,c=r.$eventEmitter,f=c.fire(n.type,a,r);return f&&u&&(f=u.fire(n,t)),f}},{key:"watch",value:function(e,t,n){this.$observer.watch(e,t,n)}},{key:"watchOnce",value:function(e,t,n){this.$observer.watchOnce(e,t,n)}},{key:"unwatch",value:function(e,t){this.$observer.unwatch(e,t)}},{key:"updateModel",value:function(e){var t=this,n=t.$observer,r=arguments;n.set(e);var i=function(){return t.$dirtyIgnore?void delete t.$dirtyIgnore:void(t.$dirty&&(delete t.$dirty,t.updateView()))};if(1===r.length)t.$dirtyIgnore=ht;else if(2===r.length&&r[1])return void i();t.$pending||(t.$pending=ht,ie(function(){t.$pending&&(delete t.$pending,i())}))}},{key:"updateView",value:function(){var e=this,t=e.$observer,r=e.$options,i=e.$filters,o=e.$node,a=o;if(!a||xt(r[Oi],e)!==yt){var u={},c=xo.filter;U(u,c&&c.data,i&&i.data),V(u,function(t,r){n(t)&&(u[r]=t.bind(e))}),U(u,t.data,t.computedGetters);var f=st(e.$template,u,e),s=f.nodes,l=f.deps;a?oe(function(){e.$node=co(o,s[0])}):(o=co(arguments[0],s[0]),e.$el=o.el,e.$node=o),oe(function(){t.setComputedDeps(bo,G(l)),xt(r[a?ji:$i],e)})}}},{key:"create",value:function(t,n){t=U({},t,n),t.parent=this;var r=new e(t);return vn(this.$children||(this.$children=[]),r),r}},{key:"compileValue",value:function(e,t){if(!O(t)){var n=this;if(!(C(t,Bt)>0))return function(e,r){e.type!==t&&(e=new St(e),e.type=t),n.fire(e,r)};var r=se(t);return r.type===Qn?function(t){var i=St.is(t),o=Y(r.args);o.length?o=o.map(function(r){var o=r.name,a=r.type;if(a===er)return r.value;if(a===Xn)if(o===_r){if(i)return t}else{if(o===xr)return e;if(o===kt)return n.get(e)}else a===tr&&(o=he(r));var u=n.get(o,e);return F(u,"value")?u.value:void 0}):i&&vn(o,t);var a=he(r.callee),u=n[a];if(!u){var c=n.get(a,e);F(c,"value")&&(u=c.value)}xt(u,n,o)===yt&&i&&(t.prevent(),t.stop())}:void 0}}},{key:"destroy",value:function(){var e=this,t=e.$options,n=e.$node,r=e.$parent,i=e.$observer,o=e.$eventEmitter;xt(t[Ei],e),r&&r.$children&&w(r.$children,e),n&&arguments[0]!==ht&&co(n,{text:Ct}),o.off(),i.destroy(),L(e),xt(t[Pi],e)}},{key:"nextTick",value:function(t){e.nextTick(t)}},{key:"toggle",value:function(e){var t=!this.get(e);return this.set(e,t),t}},{key:"increase",value:function(e,t,n){var r=$t(this.get(e),0)+(f(t)?t:1);return(!f(n)||r<=n)&&this.set(e,r),r}},{key:"decrease",value:function(e,t,n){var r=$t(this.get(e),0)-(f(t)?t:1);return(!f(n)||r>=n)&&this.set(e,r),r}},{key:"copy",value:function(e,t){return Y(e,t)}}]),e}();wo.version="0.38.2",wo.is=_t,wo.dom=Gi,wo.array=pn,wo.object=gn,wo.string=hn,wo.logger=_n,wo.Event=St,wo.Emitter=kn;var _o=wo.prototype,xo={},$o=function(){function e(){Ot(this,e),this.data={}}return jt(e,[{key:"getAsync",value:function(e,t){var r=this.data,i=r[e];if(n(i)){var o=i.$pending;o?vn(o,t):(o=i.$pending=[t],i(function(t){delete i.$pending,r[e]=t,v(o,function(e){e(t)})}))}else t(i)}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){var n=this.data;i(e)?V(e,function(e,t){n[t]=e}):o(e)&&(n[e]=t)}}]),e}(),Oo=["component"];return v(d(Oo,["directive","partial","filter"]),function(e){_o[e]=function(){var t="$"+e+"s",n=this[t]||(this[t]=new $o),r=dt(e,arguments),i=r.args,o=r.callback;return pt({args:i,get:function(t){return o?void n.getAsync(t,function(n){n?o(n):wo[e](t,o)}):n.get(t)||wo[e](t)},set:function(e,t){n.set(e,t)}})},wo[e]=function(){var t=xo[e]||(xo[e]=new $o),n=dt(e,arguments),r=n.args,i=n.callback;return pt({args:r,get:function(e){return i?void t.getAsync(e,i):t.get(e)},set:function(e,n){t.set(e,n)}})}}),wo.nextTick=function(e){e.i=1,ie(e)},wo.compile=function(e){return pe(e)[0]},wo.validate=function(e,r){var i={};return V(r,function(r,o){var a=r.type,u=r.value,c=r.required;if(c=c===ht||n(c)&&c(e),F(e,o)){if(a){var f=e[o],s=void 0;O(a)?_(a)?n(a)&&(s=a(f,e)):v(a,function(e){if(t(f,e))return s=ht,yt}):s=t(f,a),s===ht?i[o]=f:J('"'+o+"\" prop's type is not matched.")}}else c?J('"'+o+'" prop is not found.'):F(r,"value")&&(i[o]=n(u)?u(e):u)}),i},wo.use=function(e){e.install(wo)},wo.directive({ref:fo,event:vo,model:ko}),wo});
