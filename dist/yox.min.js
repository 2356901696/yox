!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Yox=t()}(this,function(){"use strict";function e(){}function t(e,t){return"numeric"===t?c(e):Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function n(e){return t(e,$t)}function r(e){return t(e,"array")}function i(e){return e&&t(e,"object")}function o(e){return t(e,"string")}function u(e){return t(e,"number")}function a(e){return t(e,"boolean")}function c(e){return!isNaN(parseFloat(e))&&isFinite(e)}function f(e){return o(e)||u(e)||a(e)||e==gt}function s(e,t){return e.charAt(t||0)}function l(e,t){return e.charCodeAt(t||0)}function v(e,t,n){var r=e.length;if(r)if(n)for(var i=r-1;i>=0&&t(e[i],i)!==mt;i--);else for(var o=0;o<r&&t(e[o],o)!==mt;o++);}function p(e,t){var n=[];return h(n,e),h(n,t),n}function d(e,t,n){r(t)?v(t,function(t){e[n](t)}):e[n](t)}function h(e,t){d(e,t,"push")}function y(e,t){d(e,t,"unshift")}function m(e){return r(e)?e:St([].slice,e)}function g(e,t,n){var r={},i=3===arguments.length;return v(e,function(e,o){r[t?e[t]:e]=i?n:e}),r}function k(e,t,n){if(n!==mt)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]==t)return r;return-1}function x(e,t,n){return k(e,t,n)>=0}function b(e){return e[e.length-1]}function w(e){return e.pop()}function _(e,t,n){var r=0;return v(e,function(i,o){(n===mt?i==t:i===t)&&(e.splice(o,1),r++)},yt),r}function O(e){return!r(e)||0===e.length}function $(e){return C(e,Mt)?e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}):e}function j(e){return D(e)?zt:e.trim()}function P(e,t,n){return u(n)?e.slice(t,n):e.slice(t)}function E(e,t){return D(e)?[]:e.split(new RegExp("\\s*"+t.replace(/[.*?]/g,"\\$&")+"\\s*"))}function S(e,t){return e.indexOf(t)}function C(e,t){return S(e,t)>=0}function T(e,t){return 0===S(e,t)}function z(e,t){var n=e.length-t.length;return n>=0&&e.lastIndexOf(t)===n}function D(e){return!o(e)||e===zt}function A(e){if(!D(e)){var t=S(e,Qt);if(t>0&&S(e,en)>t)return mn[e]||(mn[e]=e.replace(/\[\s*?([^\]]+)\s*?\]/g,function(e,t){var n=l(t);return n!==Yt&&n!==Ht||(t=P(t,1,-1)),""+yn+t})),mn[e]}return e}function F(e){return e!==zt&&e!==Ot}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt,n=A(e).split(yn);return t?n.filter(F):n}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt;return t&&(e=e.filter(F)),e.join(yn)}function R(e,t){var n=void 0;return e===t?t.length:T(e,n=t+yn)?n.length:mt}function V(e,t){var n=[];return D(e)&&!u(e)||h(n,e),D(t)&&!u(t)||h(n,t),q(n,mt)}function N(e){return Object.keys(e)}function G(e,t){return e.length-t.length}function U(e,t){return t.length-e.length}function I(e,t){return N(e).sort(t?U:G)}function L(e,t){v(N(e),function(n){return t(e[n],n)})}function Y(e,t){return e.hasOwnProperty(t)}function B(e,t){return f(e)?Y(e,t):t in e}function H(e){L(e,function(t,n){delete e[n]})}function K(e,t,n,r){return v([t,n,r],function(t){i(t)&&L(t,function(t,n){e[n]=t})}),e}function W(e,t){var n=e;return r(e)?(n=[],v(e,function(e,r){n[r]=t?W(e):e})):i(e)&&(n={},L(e,function(e,r){n[r]=t?W(e):e})),n}function Z(e,t){if(!D(t)&&!B(e,t)&&S(t,Dt)>0)for(var n=M(t),r=0,i=n.length;r<i;r++)if(r<i-1){if(e=e[n[r]],e==gt)return}else t=n[r];if(B(e,t))return{value:e[t]}}function J(e,t,n,r){if(!D(t)&&!B(e,t)&&S(t,Dt)>0){var i=e,o=M(t),u=w(o);v(o,function(t,n){if(e[t])e=e[t];else{if(r===mt)return e=mt;e=e[t]={}}}),e&&e!==i&&(e[u]=n)}else e[t]=n}function Q(e){return function(t,r){var u=this.listeners,a=function(t,r){n(t)&&(t={func:t}),i(t)&&n(t.func)&&(e&&K(t,e),h(u[r]||(u[r]=[]),t))};i(t)?L(t,a):o(t)&&a(r,t)}}function X(){if(jt){var e=jt.DEBUG;if(a(e))return BEBUG}return wn}function ee(e){bn&&X()&&bn.log("[Yox log]: "+e)}function te(e){bn&&X()&&bn.warn("[Yox warn]: "+e)}function ne(e){bn&&bn.error("[Yox error]: "+e)}function re(e){throw new Error("[Yox fatal]: "+e)}function ie(e,t){jn.length||$n(ae),dn[e](jn,t)}function oe(e){ie("push",e)}function ue(e){ie("unshift",e)}function ae(){var e=jn;jn=[],v(e,function(e){e()})}function ce(e,t,n,r,i,o){return{tag:e,text:t,data:n,children:r,key:i,component:o}}function fe(e,t){return e.key===t.key&&e.tag===t.tag}function se(e,t,n){for(var r,i={},o=t;o<=n;o++)r=e[o].key,r!=gt&&(i[r]=o);return i}function le(e,t,n,r,i){return ce(e,kt,t,n,r,i)}function ve(e){return ce(Pn,e)}function pe(e){return ce(kt,xn(e))}function de(e,t){var n=new kn;v(Dn,function(r){v(e,function(e){n.on(r,{context:t,func:e[r]})})});var i=function(e,i){var u=i.tag,c=i.data,f=i.children,s=i.text;if(D(u))return i.el=t.createText(s);if(u===Pn)return i.el=t.createComment(s);var l=i.el=t.createElement(u,e);return r(f)?a(l,f,0,f.length-1):o(s)&&t.append(l,t.createText(s)),c&&n.fire(En,[An,i]),i.el},a=function(e,t,n,r,i){for(var o=n;o<=r;o++)c(e,t[o],i)},c=function(e,n,r){var o=i(e,n);o&&t.before(e,o,r)},f=function(e,t,n,r){for(var i,o=n;o<=r;o++)i=t[o],i&&s(e,i)},s=function(e,r){var i=r.tag,o=r.el,u=r.data;i?(l(r),t.remove(e,o),u&&n.fire(Sn,r)):o&&t.remove(e,o)},l=function e(t){var r=t.data,i=t.children;r&&(i&&v(i,function(t){e(t)}),n.fire(Cn,t))},p=function(e,n,r){t.before(e,r.el,n.el),s(e,n)},d=function(e,n,r){for(var o=0,c=n.length-1,s=n[o],l=n[c],v=0,p=r.length-1,d=r[v],y=r[p],m=void 0,g=void 0,k=void 0;o<=c&&v<=p;)s?l?fe(s,d)?(h(s,d),s=n[++o],d=r[++v]):fe(l,y)?(h(l,y),l=n[--c],y=r[--p]):fe(s,y)?(h(s,y),t.before(e,s.el,t.next(l.el)),s=n[++o],y=r[--p]):fe(l,d)?(h(l,d),t.before(e,l.el,s.el),l=n[--c],d=r[++v]):(m||(m=se(n,o,c)),g=m[d.key],u(g)?(k=n[g],h(k,d),n[g]=gt):(k=i(e,d),k&&(k=d)),k&&t.before(e,k.el,s.el),d=r[++v]):l=n[--c]:s=n[++o];o>c?(k=r[p+1],a(e,r,v,p,k?k.el:gt)):v>p&&f(e,n,o,c)},h=function(e,r){if(e!==r){var u=[e,r],c=e.el;if(r.el=c,!fe(e,r)){var s=t.parent(c);return void(i(s,r)&&s&&p(s,e,r))}var l=r.data;l&&n.fire(Tn,u);var v=r.text,h=r.children,y=e.text,m=e.children;o(v)?v!==y&&t.text(c,v):h&&m?h!==m&&d(c,m,h):h?(o(y)&&t.text(c,zt),a(c,h,0,h.length-1)):m?f(c,m,0,m.length-1):o(y)&&t.text(c,zt),l&&n.fire(zn,u)}};return function(e,n){if(t.isElement(e)){var r=e;e=ce(t.tag(r),kt,{},[]),e.el=r}if(fe(e,n))h(e,n);else{var o=t.parent(e.el);i(o,n)&&o&&p(o,e,n)}return n}}function he(e,t){var n=e.data.attrs,r=t.data.attrs;if(!t.component&&(n||r)){n=n||{},r=r||{};var i=t.el,o=this;L(r,function(e,t){Y(r,t)&&(Y(n,t)&&e===n[t]||o.setAttr(i,t,e))}),L(n,function(e,t){Y(r,t)||o.removeAttr(i,t)})}}function ye(e,t){var n=t.data.props;if(n){var r=this,i=e.data.props||{};L(n,function(e,n){e!==i[n]&&r.setProp(t.el,n,e)})}}function me(e,t){var n=e.data.props;if(n){var r=this,i=t.data.props||{};L(n,function(e,n){Y(i,n)||r.removeProp(t.el,n)})}}function ge(e,t,n){return mr[e.type](e,t,n)}function ke(e,t){var r=e.el,o=e.component,u=e.data,a=u.instance,c=u.attrs,f=u.directives,s=u.destroies,l=f[t],v={el:r,node:l,instance:a,directives:f,attrs:c||{}},p=r.$component;o&&i(p)&&(Y(p,"queue")&&!Y(p,"set")&&(p=p.queue),v.component=p);var d=St(a.directive(l.name),a,v);n(d)&&(s||(s=e.data.destroies={}),s[t]=d)}function xe(e,t){var n=e.data.destroies;n&&n[t]&&(n[t](),delete n[t])}function be(e){var t=e.expr,n=e.context;if(t)return ge(t,function(e){return n.get(e).value})}function we(e,t){var n=e.data.directives,r=t.data.directives;(n||r)&&(n=n||{},r=r||{},L(r,function(r,i){if(Y(n,i)){var o=n[i];o.value===r.value&&o.keypath===r.keypath&&o.context.get(Ot).value===r.context.get(Ot).value&&be(o)===be(r)||(xe(e,i),ke(t,i))}else ke(t,i)}),L(n,function(t,n){Y(r,n)||xe(e,n)}),t.data.destroies=K({},e.data.destroies,t.data.destroies))}function _e(e){var t=e.data.destroies;t&&L(t,function(e){e()})}function Oe(e,t){var n=t.el,i=t.component;if(i){var o=t.data,u=o.instance,a=o.attrs;n.$component={queue:[],attrs:a},u.component(t.tag,function(e){var o=n,a=o.$component;a&&r(a.queue)&&(i=u.create(e,{el:n,props:a.attrs,replace:yt}),n=t.el=i.$el,n.$component=i,v(a.queue,function(e){e(i)}))})}}function $e(e,t){var n=t.el.$component;if(t.component&&i(n)){var r=t.data.attrs;n.set?n.set(r,yt):n.attrs=r}}function je(e,t){var n=e.component,r=e.el,o=r.$component;n&&i(o)&&(o.destroy&&o.destroy(yt),r.$component=gt)}function Pe(e){return e>=48&&e<=57}function Ee(e){return 36===e||95===e||e>=97&&e<=122||e>=65&&e<=90}function Se(e){return Ee(e)||Pe(e)}function Ce(e){if(Er[e])return Er[e];var t=e.length,n=0,r=void 0,i=function(){re("Failed to compile expression: "+ln+e)},o=function(){return l(e,n)},u=function(t){return e.substring(t,n)},a=function(){for(;(r=o())&&(r===pn||r===sn);)n++},c=function(){o()===At?s():(f(),o()===At&&s())},f=function(){do n++;while(Pe(o()))},s=function(){n++,Pe(o())?f():i()},p=function(){var r=o();for(n++;n<t;)if(n++,l(e,n-1)===r)return;i()},d=function(){do n++;while(Se(o()))},y=function(e){var t=n;d();var r=u(t);return r?e&&Y(Pr,r)?new $r(r,Pr[r]):new Or(r,r):void i()},m=function(e){var u=[];for(n++;n<t;){if(r=o(),r===e)return n++,u;r===Nt?n++:h(u,O())}i()},g=function(t){a();var r=P(e,n),i=void 0;if(v(t,function(e){if(T(r,e))return i=e,mt}),i)return n+=i.length,i},k=function(){for(var e=n,i=y(yt),a=void 0;n<t;){if(r=o(),r===Wt)return a=m(Jt),new wr(u(e),i,a);if(r===At)n++,a=y(),i=new yr(u(e),i,new $r(a.raw,a.name));else{if(r!==Xt)break;a=O(tn),i=new yr(u(e),i,a)}}return i},x=function e(){a(),r=o();var t=n,f=void 0;if(r===Yt||r===Ht)return p(),f=u(t),new $r(f,P(f,1,-1));if(Pe(r)||r===At)return c(),f=u(t),new $r(f,parseFloat(f));if(r===Xt)return f=m(tn),new xr(u(t),f);if(r===Wt)return O(Jt);if(Ee(r))return k();var s=g(sr);return s?(f=e(),new jr(u(t),s,f)):void i()},_=function(){for(var e=[n,x()],t=void 0,r=void 0,i=function(){w(e),w(e);var n=w(e),r=w(e);return new br(u(b(e)),r,n,t)};r=g(vr);)e.length>5&&lr[r]<e[e.length-3]&&(t=w(e),h(e,i())),h(e,r),h(e,lr[r]),h(e,n),h(e,x());for(t=w(e);e.length>4;)t=i();return t},O=function(e){e&&n++;var t=n,r=_();if(a(),o()===cn){n++;var c=_();if(a(),o()===Ut){n++;var f=_();return a(),new _r(u(t),r,c,f)}i()}return e&&(o()===e?n++:i()),r};return Er[e]=O()}function Te(e,t){return j(P(e,t.length))}function ze(e){return C(e,ln)&&!j(e)}function De(e){return e.replace(/^[ \t]*\n|\n[ \t]*$/g,zt)}function Ae(e){var t=Ti[e];if(t)return t;t=[];for(var n=[],r=[],i=[],a=void 0,c=function(t){re("Error compiling template:"+ln+e+ln+"- "+t)},f=function(e,t){var r=void 0;if(v(n,function(t,i){if(t.type===e)return r=n.splice(i,1)[0],mt},yt),r){var a=r,f=a.name,s=a.divider,l=a.children;if(e===Hr&&t&&f!==t&&c("end tag expected </"+f+"> to be </"+t+">."),u(s)&&delete r.divider,l&&!l.length&&delete r.children,!r.children)return;var p=1===l.length&&l[0];if(e===Hr){if(l.length-s===1&&(p=b(l),p.type===ri)){var d={};p.safe===mt?d.innerHTML=p.expr:d.innerText=p.expr,r.props=d,s?l.length=s:delete r.children}}else if(e===Kr&&f===Br){var h=b(i);_(h.children,r),h.children.length||delete h.children,p?p.type===Wr?h.key=p.text:p.type===ri&&(h.key=p.expr):h.key=l}else if(p)if(p.type===Wr)e===Zr?(r.expr=Ce(p.text),r.value=p.text,delete r.children):e===Kr&&(r.value=p.text,delete r.children);else if(e===Kr&&p.type===ri){var y=p,m=y.expr;o(m.keypath)&&(r.expr=m,r.binding=m.keypath,delete r.children)}}else c("{{/"+li[e]+"}} is not a pair.")},l=function(e){var o=e.type,u=e.text;if(o===Wr){if(ze(u)||!(u=De(u)))return;e.text=u}if(ui[o]){var a=w(r);return a.then=e,f(a.type),h(r,e),void h(n,e)}var c=void 0,s=b(n);if(s){var l=s.children,v=s.divider;l?l.length!==v&&(c=l[l.length-1]):l=s.children=[],h(l,e)}else c=b(t),h(t,e);c&&oi[c.type]&&!i.length&&(c.needFaker=yt),oi[o]?h(r,e):ai[o]&&h(i,e),ci[o]||h(n,e)},p=[function(e){if(!i.length){var t=e.match(ji);if(t&&!t.index){var n=t[2];return t[1]===Rt?f(Hr,n):l(new yi(n,Si.test(n))),t[0]}}},function(e){var t=e.match(Pi);if(t){if(1===i.length){var n=b(i);n.divider=n.children?n.children.length:0,(t[1]===Rt||Ci.test(i[0].name))&&f(Hr),w(i)}return t[0]}},function(e){if(1===i.length){var t=e.match(Ei);if(t){var n=t[1];return fi[n]?l(new di($(n))):T(n,Nr)?(n=P(n,Nr.length),l(new di(Lr,$(n)))):T(n,Vr)?(n=P(n,Vr.length),l(new di($(n)))):l(new pi(i[0].component?$(n):n)),a=t[2],a||f(w(i).type),t[0]}}},function(e){if(2===i.length){for(var t=0,n=void 0,r=void 0;n=s(e,t);){if(n===a){r=yt;break}t++}var o=zt;return t&&(o=P(e,0,t),l(new Oi(o))),r&&(o+=a,r=w(i),r.children||(r.value=zt),f(r.type)),o}var u=e.match(ji);return u&&u.index&&(e=P(e,0,u.index)),(1!==i.length||j(e))&&l(new Oi(e)),e}],d=[function(e,t){if(T(e,zr)){var n=E(Te(e,zr),Gt);if(n[0])return new hi(Ce(j(n[0])),j(n[1]));c("invalid each: "+t)}},function(e,t){if(T(e,Ar))return e=Te(e,Ar),e?new bi(e):c("invalid import: "+t)},function(e,t){if(T(e,Dr))return e=Te(e,Dr),e?new wi(e):c("invalid partial: "+t)},function(e,t){if(T(e,Sr))return e=Te(e,Sr),e?new xi(Ce(e)):c("invalid if: "+t)},function(e,t){if(T(e,Tr))return e=Te(e,Tr),e?new gi(Ce(e)):c("invalid else if: "+t)},function(e){if(T(e,Cr))return new mi},function(e,t){if(T(e,Mr))return e=Te(e,Mr),e?new _i(Ce(e)):c("invalid spread: "+t)},function(e,t){if(!T(e,Fr))return e=j(e),e?new ki(Ce(e),!z(t,"}}}")):c("invalid expression: "+t)}],y=function(e){e&&!function(){for(var t=e;t;)v(p,function(e,n){if(n=e(t))return t=P(t,n.length),mt});g=P(g,e.length)}()},m=function(e,t){if(e)if(s(e)===Rt){var n=P(e,1),i=si[n];oi[i]&&(i=w(r).type),f(i)}else v(d,function(n,r){if(r=n(e,t))return l(r),mt});g=P(g,t.length)},g=e,k=void 0;g;)k=g.match($i),k?(y(P(g,0,k.index)),k[1].length===k[3].length?m(k[2],k[0]):c("invalid syntax: "+k[0])):y(g);return Ti[e]=t}function Fe(e){e=A(e);var t=yt,n=R(e,Ot);return u(n)&&(e=P(e,n),t=mt),{keypath:e,lookup:t}}function Me(e,t,u){var a=zt,s=[],l=function(){a=q(s)},p=new zi(t,a),d=[],y=[],m={},g={},k=void 0,x=void 0,_=function(e){return e!==kt},O=function(e,t){if(e&&_(t))if(e.type===Hr){var n=e.children||(e.children=[]),r=b(n),u="text";if(f(t)||!Y(t,u)){if(i(r)&&o(r[u]))return void(r[u]+=t);t=pe(t)}n.push(t)}else Y(e,"value")?e.value+=t:e.value=t},$=function(e,t,n){var r=e.attrs||(e.attrs={});r[t]=n},j=function(e,t,n,r){var i=e.directives||(e.directives={});return i[V(t,n)]={name:t,modifier:n,context:p,keypath:a,value:r}},P=function(e,t){var n=void 0;return Y(t,"value")?n=t.value:Y(e,"value")?n=e.value:e.expr&&(n=C(e.expr,e.binding||e.type===Zr)),_(n)||!e.expr&&!e.children||(n=zt),n},E=function e(t){var n=t.type,r=t.children,i=b(d),o={type:n,source:t,parent:i};if(St(T[n],gt,[t,o])!==mt)return h(d,o),ai[n]&&h(y,o),r&&v(r,function(t,n){e(t)}),St(z[n],gt,[t,o]),ai[t.type]&&w(y),w(d),o},S=void 0,C=function(e,t){return ge(e,function(e){var r=p.get(e),i=r.keypath,o=r.value;return t||c(i)||n(o)||e===qr||e===Rr||(g[i]=o,S&&(S[e]=o)),o},u)},T={},z={};T[ti]=function(e){return m[e.name]=e.children,mt},T[ni]=function(e){var t=e.name,n=m[t]||u.importPartial(t);return n?(E(r(n)?{children:n}:n),mt):void re('Partial "'+t+'" is not found.')},T[Jr]=T[Qr]=function(e){var t=e.expr,n=e.then,r=e.needFaker;if(!C(t))return n?E(n):r&&O(b(y),ve()),mt},z[Jr]=z[Qr]=z[Xr]=function(e,t){var n=t.children;if(n){var r=b(y);v(n,function(e){O(r,e)})}},T[ei]=function(e){var t=e.expr,n=e.index,o=e.children,u=C(t),c=void 0;if(r(u)?c=v:i(u)&&(c=L),c){var f=t.keypath;_(f)&&(h(s,f),l()),p=p.push(u,a),c(u,function(e,t){h(s,t),l(),p=p.push(e,a),n&&p.set(n,t),E({children:o}),p=p.pop(),w(s),l()}),p=p.pop(),_(f)&&(w(s),l())}return mt},T[Hr]=function(t,n){var u=t,c=u.key;if(c){var f=void 0;if(o(c)?f=c:i(c)?f=C(c):r(c)&&(t={type:Kr,children:c},f=P(t,E(t))),_(f)){x||(k=e.cache||{},x=e.cache={});var s=k[f];if(s){var l=s.keypath===a;if(l&&L(s.deps,function(e,t){var n=p.get(t),r=n.keypath,i=n.value;return i!==e?l=mt:void(g[r]=i)}),l)return x[f]=s,O(b(y),s.vnode),mt}S={},n.key=f,x[f]={keypath:a}}}},z[Hr]=function(e,t){var n=void 0,r=void 0;Y(t,"key")&&(n=t.key),e.props&&(r={},L(e.props,function(e,n){var i=e.keypath;r[n]=C(e,i),i&&(j(t,Yr,n,i).prop=yt)}));var i=le(e.name,{instance:u,props:r,attrs:t.attrs,directives:t.directives},t.children,n,e.component);_(n)&&(x[n].deps=S,x[n].vnode=i,S=gt),O(y[y.length-2],i)},z[Wr]=function(e){O(b(y),e.text)},z[ri]=function(e){O(b(y),C(e.expr))},z[Kr]=function(e,t){var n=y[y.length-2],r=e.name,i=e.binding;r&&($(n,r,P(e,t)),i&&j(n,Yr,r,i))},z[Zr]=function(e,t){j(y[y.length-2],e.name,e.modifier,P(e,t)).expr=e.expr},z[ii]=function(e,t){var n=e.expr,r=n.keypath,o=C(n,r);if(i(o)){var u=b(y);L(o,function(e,t){$(u,t,e),r&&j(u,Yr,t,V(r,t))})}else re('Spread "'+n.raw+'" expected to be an object.')};var D=E({type:Hr,children:r(e)?e:[e]});return{nodes:D.children,deps:g}}function qe(e){return function(t,n,r){var u=t;o(t)&&(u={},u[t]={sync:r,watcher:n});var a=this;L(u,function(t,n){var r=t,o=void 0;i(t)&&(r=t.watcher,o=t.sync);var u=a.emitter,c={func:r,context:a.context};u.has(n)||(a[Ai]=yt),u[e](n,c),Ve(n)||o&&oe(function(){var e=a.context;e&&!c.count&&St(r,e,[a.get(n),kt,n])})})}}function Re(e,t){var n=Fi[t];n||(n=t.replace(/\./g,"\\.").replace(/\*\*/g,"([.\\w]+?)").replace(/\*/g,"(\\w+)"),n=Fi[t]=new RegExp("^"+n+"$"));var r=e.match(n);if(r)return m(r).slice(1)}function Ve(e){return C(e,"*")}function Ne(e,t){var n={};return v(I(e,yt),function(r){var i=R(t,r);if(i!==mt)return n.getter=e[r],n.prop=P(t,i),mt}),n}function Ge(e,t){var n=jt.SVGElement;return"svg"===e||t&&n&&t instanceof n?Pt.createElementNS("http://www.w3.org/2000/svg",e):Pt.createElement(e)}function Ue(e){return Pt.createTextNode(e||zt)}function Ie(e){return Pt.createComment(e||zt)}function Le(e){return e}function Ye(e){return 1===e.nodeType}function Be(e,t,n){J(e,t,n,mt)}function He(e,t){Be(e,t,gt)}function Ke(e,t,n){Bi[t]&&(n=n===yt||n===xt||n===t||n==gt),Hi[t]?Be(e,Hi[t],n):Bi[t]?Be(e,t,n):e.setAttribute(t,n)}function We(e,t){Hi[t]?He(e,Hi[t]):Bi[t]?He(e,t):e.removeAttribute(t)}function Ze(e,t,n){n?e.insertBefore(t,n):Je(e,t)}function Je(e,t){e.appendChild(t)}function Qe(e,t,n){e.replaceChild(t,n)}function Xe(e,t){e.removeChild(t)}function et(e){return e.parentNode}function tt(e){return e.nextSibling}function nt(e){var t=e.tagName;return D(t)?zt:t.toLowerCase()}function rt(e){return e.childNodes}function it(e,t){return t==gt?e.nodeValue:e.nodeValue=t}function ot(e,t){return t==gt?e.innerHTML:e.innerHTML=t}function ut(e,t){return(t||Pt).querySelector(e)}function at(e,t,n){e.addEventListener(t,n,mt)}function ct(e,t,n){e.removeEventListener(t,n,mt)}function ft(e,t,r){var i=e[t];if(n(i)){var o=i.$pending;o?h(o,r):(o=i.$pending=[r],i(function(n){delete i.$pending,e[t]=n,v(o,function(e){e(n)})}))}else r(i)}function st(e,t,n){i(t)?L(t,function(t,n){e[n]=t}):e[t]=n}var lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},pt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ht=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},yt=!0,mt=!1,gt=null,kt=void 0,xt="true",bt="false",wt="null",_t="undefined",Ot="this",$t="function",jt=("undefined"==typeof window?"undefined":lt(window))!==_t?window:gt,Pt=("undefined"==typeof document?"undefined":lt(document))!==_t?document:gt,Et=Object.freeze({is:t,func:n,array:r,object:i,string:o,number:u,boolean:a,numeric:c,primitive:f}),St=function(e,t,i){if(n(e))return r(i)?e.apply(t,i):e.call(t,i)},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c(e)?+e:t},Tt=function(){function e(t){vt(this,e),t.type?(this.type=t.type,this.originalEvent=t):this.type=t}return pt(e,[{key:"prevent",value:function(){var e=this;if(!e.isPrevented){var t=e.originalEvent;t&&(n(t.prevent)?t.prevent():n(t.preventDefault)&&t.preventDefault()),e.isPrevented=yt}return e}},{key:"stop",value:function(){var e=this;if(!e.isStoped){var t=e.originalEvent;t&&(n(t.stop)?t.stop():n(t.stopPropagation)&&t.stopPropagation()),e.isStoped=yt}return e}}]),e}();Tt.is=function(e){return e instanceof Tt};var zt="",Dt=".",At=l(Dt),Ft="#",Mt=(l(Ft),"-"),qt=(l(Mt),"="),Rt=(l(qt),"/"),Vt=(l(Rt),","),Nt=l(Vt),Gt=":",Ut=l(Gt),It=";",Lt=(l(It),"'"),Yt=l(Lt),Bt='"',Ht=l(Bt),Kt="(",Wt=l(Kt),Zt=")",Jt=l(Zt),Qt="[",Xt=l(Qt),en="]",tn=l(en),nn="{",rn=(l(nn),"}"),on=(l(rn),"<"),un=(l(on),">"),an=(l(un),"?"),cn=l(an),fn="\t",sn=l(fn),ln="\n",vn=(l(ln)," "),pn=l(vn),dn=Object.freeze({each:v,merge:p,push:h,unshift:y,toArray:m,toObject:g,indexOf:k,has:x,last:b,pop:w,remove:_,falsy:O}),hn=Object.freeze({camelCase:$,trim:j,slice:P,split:E,indexOf:S,has:C,startsWith:T,endsWith:z,falsy:D}),yn=".",mn={},gn=Object.freeze({keys:N,sort:I,each:L,has:Y,exists:B,clear:H,extend:K,copy:W,get:Z,set:J}),kn=function(){function e(){vt(this,e),this.listeners={}}return pt(e,[{key:"fire",value:function(e,t,n){var i=yt,o=this.listeners,u=o[e];if(u){var a=t,c=e.split(Dt)[1];r(t)&&(a=t[0]);var f=Tt.is(a),s=void 0;v(u,function(e,r){if(!c||!e.namespace||c===e.namespace){var o=St(e.func,n!==kt?n:e.context,t);return e.count>0?e.count++:e.count=1,e.count===e.max&&h(s||(s=[]),r),f&&(o===mt?a.prevent().stop():a.isStoped&&(o=mt)),o===mt?i=mt:void 0}}),s&&(v(s,function(e){u.splice(e,1)},yt),u.length||delete o[e])}return i}},{key:"has",value:function(e,t){var n=this.listeners[e];if(t==gt)return!O(n);if(n){var r=void 0;return v(n,function(e){if(r=e.func===t)return mt}),r}}}]),e}();K(kn.prototype,{on:Q(),once:Q({max:1}),off:function(e,t){var n=this;if(e==gt)n.listeners={};else{var r=n.listeners,i=r[e];i&&(t==gt?i.length=0:v(i,function(e,n){e.func===t&&i.splice(n,1)},yt),i.length||delete r[e])}}});var xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;return e!=gt&&e.toString?e.toString():t},bn=("undefined"==typeof console?"undefined":lt(console))!==_t?console:gt,wn=/yox/.test(xn(e)),_n=Object.freeze({log:ee,warn:te,error:ne,fatal:re}),On=void 0;On=("undefined"==typeof MutationObserver?"undefined":lt(MutationObserver))===$t?function(e){var t=new MutationObserver(e),n=Pt.createTextNode(zt);t.observe(n,{characterData:yt}),n.data=vn}:("undefined"==typeof setImmediate?"undefined":lt(setImmediate))===$t?setImmediate:setTimeout;var $n=function(e){if(Pt){var t=Pt.activeElement;if(t&&B(t,"autofocus"))return void setTimeout(e)}On(e)},jn=[],Pn="!",En="create",Sn="remove",Cn="destroy",Tn="update",zn="postpatch",Dn=[En,Tn,zn,Sn,Cn],An=ce(zt,kt,{},[]),Fn={create:he,update:he},Mn={create:ye,update:me,postpatch:ye},qn=1,Rn=2,Vn=3,Nn=4,Gn=5,Un=6,In=7,Ln=8,Yn="+",Bn="-",Hn="*",Kn="/",Wn="%",Zn="~",Jn="&&",Qn="||",Xn="!",er="!!",tr="===",nr="!==",rr="==",ir="!=",or="<",ur="<=",ar=">",cr=">=",fr={};fr[Yn]=fr[Bn]=fr[Xn]=fr[Zn]=fr[er]=yt;var sr=I(fr,yt),lr={};lr[Qn]=1,lr[Jn]=2,lr[rr]=lr[ir]=lr[tr]=lr[nr]=3,lr[or]=lr[ur]=lr[ar]=lr[cr]=4,lr[Yn]=lr[Bn]=5,lr[Hn]=lr[Kn]=lr[Wn]=6;var vr=I(lr,yt),pr={};pr[Yn]=function(e){return+e},pr[Bn]=function(e){return-e},pr[Xn]=function(e){return!e},pr[Zn]=function(e){return~e},pr[er]=function(e){return!!e};var dr={};dr[Qn]=function(e,t){return e||t},dr[Jn]=function(e,t){return e&&t},dr[tr]=function(e,t){return e===t},dr[nr]=function(e,t){return e!==t},dr[rr]=function(e,t){return e==t},dr[ir]=function(e,t){return e!=t},dr[or]=function(e,t){return e<t},dr[ur]=function(e,t){return e<=t},dr[ar]=function(e,t){return e>t},dr[cr]=function(e,t){return e>=t},dr[Yn]=function(e,t){return e+t},dr[Bn]=function(e,t){return e-t},dr[Hn]=function(e,t){return e*t},dr[Kn]=function(e,t){return e/t},dr[Wn]=function(e,t){return e%t};var hr=function e(t,n){vt(this,e),this.type=t,this.raw=j(n)},yr=function(e){function t(e,n,r){vt(this,t);var i=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Vn,e)),o=[];return n.type===Vn?h(o,n.props):h(o,n),h(o,r),i.props=o,n.keypath&&r.type===qn&&(i.keypath=V(n.keypath,r.value)),i}return dt(t,e),t}(hr),mr={};mr[qn]=function(e){return e.value},mr[Rn]=function(e,t){return t(e.name)},mr[Vn]=function(e,t,n){var r=e.keypath;if(!r){var i=e.props.map(function(e,r){var i=e.type;return i===qn?e.value:r>0?ge(e,t,n):i===Rn?e.name:void 0});r=q(i,mt)}return t(r)},mr[Nn]=function(e,t,n){return pr[e.operator](ge(e.arg,t,n))},mr[Gn]=function(e,t,n){return dr[e.operator](ge(e.left,t,n),ge(e.right,t,n))},mr[Un]=function(e,t,n){return ge(e.test,t,n)?ge(e.consequent,t,n):ge(e.alternate,t,n)},mr[In]=function(e,t,n){return e.elements.map(function(e){return ge(e,t,n)})},mr[Ln]=function(e,t,n){return St(ge(e.callee,t,n),n,e.args.map(function(e){return ge(e,t,n)}))};var gr={create:we,update:we,destroy:_e},kr={create:Oe,update:$e,destroy:je},xr=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,In,e));return r.elements=n,r}return dt(t,e),t}(hr),br=function(e){function t(e,n,r,i){vt(this,t);var o=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Gn,e));return o.left=n,o.operator=r,o.right=i,o}return dt(t,e),t}(hr),wr=function(e){function t(e,n,r){vt(this,t);var i=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ln,e));return i.callee=n,i.args=r,i}return dt(t,e),t}(hr),_r=function(e){function t(e,n,r,i){vt(this,t);var o=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Un,e));return o.test=n,o.consequent=r,o.alternate=i,o}return dt(t,e),t}(hr),Or=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Rn,e));return r.name=n,r.keypath=n,r}return dt(t,e),t}(hr),$r=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,qn,e));return r.value=n,r}return dt(t,e),t}(hr),jr=function(e){function t(e,n,r){vt(this,t);var i=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Nn,e));return i.operator=n,i.arg=r,i}return dt(t,e),t}(hr),Pr={};Pr[xt]=yt,Pr[bt]=mt,Pr[wt]=gt,Pr[_t]=kt;var Er={},Sr="#if",Cr="else",Tr="else if",zr="#each",Dr="#partial",Ar=">",Fr="! ",Mr="...",qr="$event",Rr="$keypath",Vr="o-",Nr="on-",Gr="ref",Ur="lazy",Ir="model",Lr="event",Yr="binding",Br="key",Hr=1,Kr=2,Wr=3,Zr=4,Jr=5,Qr=6,Xr=7,ei=8,ti=9,ni=10,ri=11,ii=12,oi={},ui={},ai={},ci={},fi={},si={},li={};oi[Jr]=oi[Qr]=ui[Qr]=ui[Xr]=ai[Hr]=ai[Kr]=ai[Zr]=ci[Wr]=ci[ni]=ci[ii]=ci[ri]=fi[Gr]=fi[Ur]=fi[Ir]=yt,si.if=Jr,si.each=ei,si.partial=ti,L(si,function(e,t){li[e]=t});var vi=function e(t){vt(this,e),this.type=t},pi=function(e){function t(e){vt(this,t);var n=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Kr));return n.name=e,n}return dt(t,e),t}(vi),di=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Zr));return r.name=e,n&&(r.modifier=n),r}return dt(t,e),t}(vi),hi=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ei));return r.expr=e,n&&(r.index=n),r}return dt(t,e),t}(vi),yi=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Hr));return r.name=e,n&&(r.component=n),r}return dt(t,e),t}(vi),mi=function(e){function t(){return vt(this,t),ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Xr))}return dt(t,e),t}(vi),gi=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Qr));return r.expr=e,r}return dt(t,e),t}(vi),ki=function(e){function t(e,n){vt(this,t);var r=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ri));return r.expr=e,r.safe=n,r}return dt(t,e),t}(vi),xi=function(e){function t(e){vt(this,t);var n=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Jr));return n.expr=e,n}return dt(t,e),t}(vi),bi=function(e){function t(e){vt(this,t);var n=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ni));return n.name=e,n}return dt(t,e),t}(vi),wi=function(e){function t(e){vt(this,t);var n=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ti));return n.name=e,n}return dt(t,e),t}(vi),_i=function(e){function t(e){vt(this,t);var n=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ii));return n.expr=e,n}return dt(t,e),t}(vi),Oi=function(e){function t(e){vt(this,t);var n=ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Wr));return n.text=e,n}return dt(t,e),t}(vi),$i=/(\{?\{\{)\s*([^\}]+?)\s*(\}\}\}?)/,ji=/<(\/)?([a-z][-a-z0-9]*)/i,Pi=/^\s*(\/)?>/,Ei=/^\s*([-:\w]+)(?:=(['"]))?/,Si=/[-A-Z]/,Ci=/source|param|input|img|br|hr/,Ti={},zi=function(){function e(t,n,r){vt(this,e);var i=this,o={};o[Ot]=t,o[Rr]=n,i.data=o,i.cache={},r&&(i.parent=r)}return pt(e,[{key:"push",value:function(t,n){return new e(t,n,this)}},{key:"pop",value:function(){return this.parent}},{key:"set",value:function(e,t){var n=this.data,r=this.cache,i=Fe(e),o=i.keypath;Y(r,o)&&delete r[o],n[o||Ot]=t}},{key:"get",value:function(e){var t=this,n=t,r=n.data,i=n.cache,o=Fe(e),u=o.keypath,a=o.lookup,c=function(e,t){return B(e,t)?{value:e[t]}:Z(e[Ot],t)};if(!Y(i,u))if(u){var f=void 0;if(a)for(;t&&!(f=c(t.data,u));)t=t.parent;else f=c(r,u);f&&(i[u]={keypath:V(t.data[Rr],u),value:f.value})}else i[u]={keypath:r[Rr],value:r[Ot]};return(i=i[u])?i:(u=V(r[Rr],u),{keypath:u})}}]),e}(),Di=function(){function e(t){vt(this,e);var o=t.data,u=t.context,c=t.computed,f=this;if(f.data=o,f.emitter=new kn,f.context=u||f,f.cache={},f.deps={},f.reversedDeps={},i(c)){f.computedGetters={},f.computedSetters={},f.computedStack=[];var s=f.cache,l=f.computedStack;L(c,function(e,t){var o=void 0,u=void 0,c=void 0,v=yt;n(e)?o=e:i(e)&&(e.deps&&(c=e.deps),a(e.cache)&&(v=e.cache),n(e.get)&&(o=e.get),n(e.set)&&(u=e.set)),o&&(f.computedGetters[t]=function(){if(v){if(Y(s,t))return s[t];c||l.push([])}var e=St(o,f.context);if(s[t]=e,v){var n=c||w(l);r(n)&&f.setDeps(t,n)}return e}),u&&(f.computedSetters[t]=function(e){u.call(f.context,e)})})}}return pt(e,[{key:"get",value:function(e,t){var n=this,r=void 0,i=n.data,o=n.cache,u=n.computedStack,a=n.computedGetters;if(e===zt)return i;if(e=A(e),u){var c=b(u);c&&h(c,e)}if(a){var s=Ne(a,e),l=s.getter,v=s.prop;l&&(l=l(),v?B(l,v)?r={value:l[v]}:f(l)||(r=Z(l,v)):r={value:l})}return r||(r=Z(i,e)),r?o[e]=r.value:(o[e]=kt,t)}},{key:"set",value:function(t){var n=this,i=n.deps,o=n.data,u=n.cache,a=n.emitter,c=n.reversedDeps,s=n.computedGetters,l=n.computedSetters,p=n.watchKeypaths,d=n.reversedKeypaths;n[Ai]&&(delete n[Ai],c={},p={},L(a.listeners,function(e,t){p[t]=yt}),L(i,function(e,t){v(e,function(e){p[e]=yt,h(c[e]||(c[e]=[]),t)})}),c=n.reversedDeps=c,p=n.watchKeypaths=I(p,yt),d=n.reversedKeypaths=I(c,yt));var y={},m={},g=function(e){return Y(y,e)||(y[e]=Y(u,e)?u[e]:n.get(e)),y[e]},k=function(e){return Y(m,e)||(m[e]=n.get(e)),m[e]},x=function(e,t){return e+Mt+t},b=[],w={},_=function(e,t,n){var r=x(e,t);w[r]||(w[r]=yt,h(b,{keypath:e,realpath:t,match:n,oldValue:g(t)}))};L(t,function(e,t){if(t=A(t),l){var n=l[t];if(n)return _(t,t),void n(e);var r=Ne(s,t),i=r.getter,u=r.prop;if(i&&u)return i=i(),void(f(i)||(_(t,t),J(i,u,e)))}_(t,t),J(o,t,e)});for(var O=-1,$=void 0,j=void 0,P=void 0,E=void 0,S=void 0,C=void 0;$=b[++O];)j=$.keypath,P=$.realpath,E=$.oldValue,Y(u,P)&&delete u[P],S=k(P)!==E,!S&&r(E)&&E[e.FORCE]&&(S=yt,$.force=yt,delete E[e.FORCE]),S&&(C=n.differences||(n.differences={}),C[x(j,P)]=$,p&&v(p,function(e){if(e!==P)if(Ve(e)){var t=Re(P,e);t&&_(e,P,t)}else R(e,P)!==mt&&_(e,e)}),d&&v(d,function(e){var t=void 0;if(Ve(e)){var n=Re(P,e);n&&(t=c[e])}else e===P&&(t=c[e]);t&&v(t,function(e){_(e,e)})}));C&&!n.pending&&(n.pending=yt,oe(function(){if(n.pending){var e=n.differences;delete n.pending,delete n.differences,L(e,function(e){var t=e.keypath,r=e.oldValue,i=n.get(e.realpath);if(e.force||r!==i){var o=[i,r,t];e.match&&h(o,e.match),a.fire(t,o)}})}}))}},{key:"setDeps",value:function(e,t){var n=this,r=n.deps;t!==r[e]&&(r[e]=t,n[Ai]=yt)}},{key:"destroy",value:function(){this.emitter.off(),H(this)}}]),e}();
K(Di.prototype,{watch:qe("on"),watchOnce:qe("once"),unwatch:function(e,t){var n=this.emitter;n.off(e,t),n.has(e)||(this[Ai]=yt)}}),Di.FORCE="_force_";var Ai="_dirty_",Fi={},Mi=/<[^>]+>/,qi=/^[#.][-\w+]+$/,Ri="beforeCreate",Vi="afterCreate",Ni="beforeMount",Gi="afterMount",Ui="beforeUpdate",Ii="afterUpdate",Li="beforeDestroy",Yi="afterDestroy",Bi=g(E("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noshade,noresize,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,typemustmatch,visible",Vt)),Hi={};Hi.for="htmlFor",Hi.value="value",Hi.class="className",Hi.style="style.cssText",Hi.nohref="noHref",Hi.noshade="noShade",Hi.noresize="noResize",Hi.readonly="readOnly",Hi.defaultchecked="defaultChecked",Hi.defaultmuted="defaultMuted",Hi.defaultselected="defaultSelected";var Ki=Object.freeze({createElement:Ge,createText:Ue,createComment:Ie,createEvent:Le,isElement:Ye,setProp:Be,removeProp:He,setAttr:Ke,removeAttr:We,before:Ze,append:Je,replace:Qe,remove:Xe,parent:et,next:tt,tag:nt,children:rt,text:it,html:ot,find:ut,on:at,off:ct}),Wi="tap",Zi="click",Ji="input",Qi="change",Xi="compositionstart",eo="compositionend",to=W(Ki),no=to.on,ro=to.off;to.specialEvents={input:{on:function(e,t){var n=mt;to.on(e,Xi,t[Xi]=function(){n=yt}),to.on(e,eo,t[eo]=function(e){n=mt,t(e,Ji)}),no(e,Ji,t[Ji]=function(e){n||t(e)})},off:function(e,t){to.off(e,Xi,t[Xi]),to.off(e,eo,t[eo]),ro(e,Ji,t[Ji]),t[Xi]=t[eo]=t[Ji]=gt}}};var io="_emitter_";to.on=function(e,t,n,r){var i=e[io]||(e[io]=new kn);if(!i.has(t)){var o=function(t,n){Tt.is(t)||(t=new Tt(to.createEvent(t,e))),n&&(t.type=n),i.fire(t.type,t,r)};i[t]=o;var u=to.specialEvents[t];u?u.on(e,o):no(e,t,o)}i.on(t,n)},to.off=function(e,t,n){var r=e[io],i=N(r.listeners);r.off(t,n),v(i,function(t,n){if(r[t]&&!r.has(t)){var o=r[t],u=to.specialEvents[t];u?u.off(e,o):ro(e,t,o),delete r[t],i.splice(n,1)}},yt),i.length||to.removeProp(e,io)};var oo=function(e){var t=e.el,n=e.node,o=e.instance,u=e.component,a=n.value;if(!D(a)){var c=o.$refs;i(c)?Y(c,a)&&ne('Passing a ref "'+a+'" is existed.'):c=o.$refs={};var f=function(e){c[a]=e};return u?r(u)?h(u,f):f(u):f(t),function(){Y(c,a)?delete c[a]:r(u)&&_(u,f)}}},uo=function(e,t,n){var r=void 0;return function(){if(!r){var i=m(arguments);n&&St(e,gt,i),r=setTimeout(function(){r=gt,n||St(e,gt,i)},t)}}},ao=[Zi,Wi],co=function(e){var t=e.el,n=e.node,i=e.instance,o=e.component,u=e.directives,a=e.type,f=e.listener;if(a||(a=n.modifier),f||(f=i.compileDirective(n)),a&&f){var s=u.lazy;if(s){var l=s.value;c(l)&&l>=0?f=uo(f,l,x(ao,a)):a===Ji&&(a=Qi)}if(o){var v=function(e){e.on(a,f)};return r(o)?h(o,v):v(o),function(){o.off(a,f),r(o)&&_(o,v)}}return to.on(t,a,f),function(){to.off(t,a,f)}}},fo={set:function(e,t,n){var r=xn(n.get(t));r!==e.value&&(e.value=r)},sync:function(e,t,n){n.set(t,e.value)},attr:"value"},so={set:function(e,t,n){var r=xn(n.get(t)),i=e.options,o=e.selectedIndex;r!==i[o].value&&v(i,function(t,n){if(t.value===r)return e.selectedIndex=n,mt})},sync:function(e,t,n){var r=e.options[e.selectedIndex].value;n.set(t,r)}},lo={set:function(e,t,n){e.checked=e.value===xn(n.get(t))},sync:function(e,t,n){e.checked&&n.set(t,e.value)},attr:"checked"},vo={set:function(e,t,n){var i=n.get(t);e.checked=r(i)?x(i,e.value,mt):a(i)?i:!!i},sync:function(e,t,n){var i=n.get(t);r(i)?e.checked?n.append(t,e.value):n.removeAt(t,k(i,e.value,mt)):n.set(t,e.checked)},attr:"checked"},po={radio:lo,checkbox:vo,select:so},ho=function(e){var t=e.el,n=e.node,r=e.instance,i=e.directives,o=e.attrs,u=n.value,a=n.context;if(!D(u)){var c=a.get(u),f=c.keypath,s=Qi,l=po[t.type]||po[to.tag(t)];l||(l=fo,B(t,"autofocus")&&(s=Ji));var v=function(){l.set(t,f,r)};r.watch(f,v,!l.attr||!Y(o,l.attr));var p=co({el:t,node:n,instance:r,directives:i,type:s,listener:function(){l.sync(t,f,r)}});return function(){r.unwatch(f,v),p&&p()}}},yo=function(e){var t=e.el,n=e.node,r=e.instance,i=e.component,o=n.context.get(n.value),u=o.keypath,a=function(e){var r=n.modifier;n.prop?to.setProp(t,r,e):i?i.set&&i.set(r,e):to.setAttr(t,r,e)};return r.watch(u,a),function(){r.unwatch(u,a)}},mo="_template_",go=de([kr,Fn,Mn,gr],to),ko=function(){function e(t){vt(this,e);var r=this;r.$options=t,St(t[Ri],r,t);var u=t.el,a=t.data,c=t.props,f=t.parent,s=t.replace,l=t.computed,v=t.template,p=t.components,d=t.directives,h=t.partials,y=t.filters,m=t.events,g=t.watchers,k=t.methods,x=t.propTypes,b=t.extensions;b&&K(r,b);var w=c;i(w)?(i(x)&&(w=e.validate(w,x)),a&&!n(a)&&te('"data" option expected to be a function.')):w={},l=l?W(l):{};var _=0;l[mo]={deps:yt,get:function(){return _++}};var O=new Di({context:r,data:w,computed:l});r.$observer=O;var $=n(a)?St(a,r):a;i($)&&L($,function(e,t){Y(w,t)?te('"'+t+'" is already defined as a prop. Use prop default value instead.'):w[t]=e}),g&&O.watch(g),r.$emitter=new kn,m&&r.on(m),St(t[Vi],r);var j='"template" option expected to have just one root element.';o(v)?(qi.test(v)&&(v=to.html(to.find(v))),Mi.test(v)||ne(j)):v=gt,o(u)&&qi.test(u)&&(u=to.find(u)),u&&(to.isElement(u)?s||(to.html(u,"<div></div>"),u=to.children(u)[0]):ne('"el" option expected to be a html element.')),f&&(r.$parent=f),k&&L(k,function(e,t){Y(xo,t)&&re('"'+t+'" method is conflicted with built-in methods.'),r[t]=e}),p&&r.component(p),d&&r.directive(d),h&&r.partial(h),y&&r.filter(y),v&&(v=e.compile(v),v.length>1&&re(j),r.$template=v[0],r.updateView(u||to.createElement("div"),r.render()))}return pt(e,[{key:"get",value:function(e,t){return this.$observer.get(e,t)}},{key:"set",value:function(e,t){var n=void 0,r=void 0;if(o(e))n={},n[e]=t;else{if(!i(e))return;n=e,r=t===yt}this.updateModel(n,r)}},{key:"on",value:function(e,t){return this.$emitter.on(e,t),this}},{key:"once",value:function(e,t){return this.$emitter.once(e,t),this}},{key:"off",value:function(e,t){return this.$emitter.off(e,t),this}},{key:"fire",value:function(e,t){var n=e;o(e)&&(n=new Tt(e));var r=this;n.target||(n.target=r);var u=[n];i(t)&&h(u,t);var a=r.$parent,c=r.$emitter,f=c.fire(n.type,u,r);return f&&a&&(f=a.fire(n,t)),f}},{key:"watch",value:function(e,t,n){return this.$observer.watch(e,t,n),this}},{key:"watchOnce",value:function(e,t,n){return this.$observer.watchOnce(e,t,n),this}},{key:"unwatch",value:function(e,t){return this.$observer.unwatch(e,t),this}},{key:"updateModel",value:function(e){var t=this,n=arguments,r=t.get(mo);t.$observer.set(e),r!==t.get(mo)&&1!==n.length&&(2===n.length&&n[1]?t.updateView(t.$node,t.render()):t.forceUpdate())}},{key:"forceUpdate",value:function(){var e=this;e.$pending||(e.$pending=yt,ue(function(){e.$pending&&(delete e.$pending,e.updateView(e.$node,e.render()))}))}},{key:"render",value:function(){var e=this,t=e.$template,n=e.$observer,r=e.$filters,i=n.data,o=n.computedGetters,u=bo.filter,a={};K(a,u,r,i),o&&L(o,function(e,t){t!==mo&&(a[t]=e())});var c=Me(t,a,e),f=c.nodes,s=c.deps,l=N(s);return L(l,function(e){n.cache[e]=s[e]}),n.setDeps(mo,l),f[0]}},{key:"updateView",value:function(e,t){var n=this,r=void 0,i=n.$node,o=n.$options;i?(St(o[Ui],n),n.$node=go(e,t),r=Ii):(St(o[Ni],n),i=go(e,t),n.$el=i.el,n.$node=i,r=Gi),ue(function(){n.$node&&St(o[r],n)})}},{key:"create",value:function(t,n){t=K({},t,n),t.parent=this;var r=new e(t);return h(this.$children||(this.$children=[]),r),r}},{key:"importPartial",value:function(t){return e.compile(this.partial(t))}},{key:"compileDirective",value:function(e){var t=this,n=e.value,r=e.expr,i=(e.keypath,e.context);if(r&&r.type===Ln){var o=r.callee,u=r.args,a=t[o.name];if(a){var c=function(e){return ge(e,function(e){return i.get(e).value},t)};return function(e){var n=Tt.is(e),r=void 0;u.length?(n&&i.set(qr,e),r=St(a,t,u.map(c))):n&&(r=St(a,t,e)),r===mt&&n&&e.prevent().stop()}}}else if(n)return function(e,r){e.type!==n&&(e=new Tt(e),e.type=n),t.fire(e,r)}}},{key:"destroy",value:function(){var e=this,t=e.$options,n=e.$node,r=e.$parent,i=e.$emitter,o=e.$observer;St(t[Li],e),r&&r.$children&&_(r.$children,e),n&&arguments[0]!==yt&&go(n,{text:zt}),i.off(),o.destroy(),H(e),St(t[Yi],e)}},{key:"nextTick",value:function(e){oe(e)}},{key:"toggle",value:function(e){var t=!this.get(e);return this.set(e,t),t}},{key:"increase",value:function(e,t,n){var r=Ct(this.get(e),0)+(c(t)?t:1);return(!c(n)||r<=n)&&this.set(e,r),r}},{key:"decrease",value:function(e,t,n){var r=Ct(this.get(e),0)-(c(t)?t:1);return(!c(n)||r>=n)&&this.set(e,r),r}},{key:"copy",value:function(e,t){return W(e,t)}},{key:"insert",value:function(e,t,n){var i=this.get(e);r(i)||(i=[]);var o=i,u=o.length;if(n===yt||n===u)i.push(t);else if(n===mt||0===n)i.unshift(t);else{if(!(n>0&&n<u))return;i.splice(n,0,t)}return i[Di.FORCE]=yt,this.set(e,i),yt}},{key:"append",value:function(e,t){return this.insert(e,t,yt)}},{key:"prepend",value:function(e,t){return this.insert(e,t,mt)}},{key:"removeAt",value:function(e,t){var n=this.get(e);if(r(n)&&t>=0&&t<n.length)return n[Di.FORCE]=yt,n.splice(t,1),this.set(e,n),yt}},{key:"remove",value:function(e,t){var n=this.get(e);if(r(n)&&_(n,t))return n[Di.FORCE]=yt,this.set(e,n),yt}}]),e}();ko.version="0.45.1",ko.is=Et,ko.dom=to,ko.array=dn,ko.object=gn,ko.string=hn,ko.logger=_n,ko.Event=Tt,ko.Emitter=kn;var xo=ko.prototype,bo={},wo="component";return v([wo,"directive","partial","filter"],function(e){xo[e]=function(t,r){var i=this,u="$"+e+"s",a=i[u];if(o(t)){var c=arguments.length,f=a&&Y(a,t);if(1===c)return f?a[t]:ko[e](t);if(2===c&&e===wo&&n(r))return f?ft(a,t,r):ko[e](t,r)}st(a||(i[u]={}),t,r)},ko[e]=function(t,r){var i=bo[e];if(o(t)){var u=arguments.length,a=i&&Y(i,t);if(1===u)return a?i[t]:kt;if(2===u&&e===wo&&n(r))return a?ft(i,t,r):r()}st(i||(bo[e]={}),t,r)}}),ko.nextTick=oe,ko.compile=function(e){return o(e)?Ae(e):e},ko.validate=function(e,r){var i={};return L(r,function(r,o){var u=r.type,a=r.value,c=r.required;if(c=c===yt||n(c)&&c(e),Y(e,o)){if(u){var f=e[o],s=void 0;D(u)?O(u)?n(u)&&(s=u(f,e)):v(u,function(e){if(t(f,e))return s=yt,mt}):s=t(f,u),s===yt?i[o]=f:te('"'+o+"\" prop's type is not matched.")}}else c?te('"'+o+'" prop is not found.'):Y(r,"value")&&(i[o]=n(a)?a(e):a)}),i},ko.use=function(e){e.install(ko)},ko.directive({ref:oo,event:co,model:ho,binding:yo}),ko});
